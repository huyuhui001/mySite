<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://huyuhui001.github.io/mySite/linux/SRE/05-RegExpress/ rel=canonical><link rel=icon href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.3.1, mkdocs-material-8.4.3"><title>Regular Expression - UPSkilling</title><link rel=stylesheet href=../../../assets/stylesheets/main.6b80c2a2.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.cbb835fc.min.css><meta name=theme-color content=#009485><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../extra.css><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme data-md-color-primary=teal data-md-color-accent=green> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#_1 class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title=UPSkilling class="md-header__button md-logo" aria-label=UPSkilling data-md-component=logo> <img src=../../../assets/logo.jpg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> UPSkilling </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Regular Expression </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/huyuhui001/mySite title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> huyuhui001/mySite </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> UPSkilling </a> </li> <li class=md-tabs__item> <a href=../../ class="md-tabs__link md-tabs__link--active"> Linux </a> </li> <li class=md-tabs__item> <a href=../../../k8s/ class=md-tabs__link> Kubernetes </a> </li> <li class=md-tabs__item> <a href=../../../python/ class=md-tabs__link> Python </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title=UPSkilling class="md-nav__button md-logo" aria-label=UPSkilling data-md-component=logo> <img src=../../../assets/logo.jpg alt=logo> </a> UPSkilling </label> <div class=md-nav__source> <a href=https://github.com/huyuhui001/mySite title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> huyuhui001/mySite </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_1 type=checkbox id=__nav_1> <label class=md-nav__link for=__nav_1> UPSkilling <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=UPSkilling data-md-level=1> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> UPSkilling </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> Welcome </a> </li> <li class=md-nav__item> <a href=../../../about/ class=md-nav__link> About </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2> Linux <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Linux data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Linux </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ class=md-nav__link> Index </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_2 type=checkbox id=__nav_2_2 checked> <label class=md-nav__link for=__nav_2_2> Linux SRE <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Linux SRE" data-md-level=2> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> Linux SRE </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../01-fundamentals/ class=md-nav__link> Linux Fundamentals </a> </li> <li class=md-nav__item> <a href=../02-filesystem/ class=md-nav__link> File System </a> </li> <li class=md-nav__item> <a href=../03-identity-security/ class=md-nav__link> Identity & Security </a> </li> <li class=md-nav__item> <a href=../04-TextTools/ class=md-nav__link> Text Tools </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Regular Expression <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Regular Expression </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#_2 class=md-nav__link> 基本正则表达式符号 </a> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> 扩展正则表达式符号 </a> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> 字符匹配 </a> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> 位置标记 </a> </li> <li class=md-nav__item> <a href=#_6 class=md-nav__link> 标识符 </a> </li> <li class=md-nav__item> <a href=#_7 class=md-nav__link> 数量修饰符 </a> </li> <li class=md-nav__item> <a href=#_8 class=md-nav__link> 分组 </a> </li> <li class=md-nav__item> <a href=#_9 class=md-nav__link> 正则小练习 </a> </li> <li class=md-nav__item> <a href=#grep class=md-nav__link> 三剑客grep命令 </a> </li> <li class=md-nav__item> <a href=#sed class=md-nav__link> 三剑客sed命令 </a> </li> <li class=md-nav__item> <a href=#awk class=md-nav__link> 三剑客awk命令 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_3 type=checkbox id=__nav_2_3> <label class=md-nav__link for=__nav_2_3> SUSE Linux Administration <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="SUSE Linux Administration" data-md-level=2> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> SUSE Linux Administration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Administration/01/ class=md-nav__link> Linux File System Overview </a> </li> <li class=md-nav__item> <a href=../../Administration/02/ class=md-nav__link> Useful Commands </a> </li> <li class=md-nav__item> <a href=../../Administration/03/ class=md-nav__link> Shell </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_4 type=checkbox id=__nav_2_4> <label class=md-nav__link for=__nav_2_4> SUSE Enterprise Storage Foundation <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="SUSE Enterprise Storage Foundation" data-md-level=2> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> SUSE Enterprise Storage Foundation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../SES/linux_ses_memo/ class=md-nav__link> SUSE Enterprise Storage Foundation </a> </li> <li class=md-nav__item> <a href=../../SES/linux_ses_demo/ class=md-nav__link> SUSE Enterprise Storage Basic Operation </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3> Kubernetes <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Kubernetes data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Kubernetes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/ class=md-nav__link> Index </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_2 type=checkbox id=__nav_3_2> <label class=md-nav__link for=__nav_3_2> Installation <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Installation data-md-level=2> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> Installation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/installation/single-local/ class=md-nav__link> Single Node Installation </a> </li> <li class=md-nav__item> <a href=../../../k8s/installation/multiple-local/ class=md-nav__link> Multiple Nodes Installation </a> </li> <li class=md-nav__item> <a href=../../../k8s/installation/aliyun-ubuntu/ class=md-nav__link> Installation on Aliyun ECS </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3 type=checkbox id=__nav_3_3> <label class=md-nav__link for=__nav_3_3> Docker <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Docker data-md-level=2> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> Docker </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/foundamentals/docker/ class=md-nav__link> Fundamentals </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_4 type=checkbox id=__nav_3_4> <label class=md-nav__link for=__nav_3_4> Foundamentals <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Foundamentals data-md-level=2> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> Foundamentals </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/foundamentals/memo/ class=md-nav__link> Memo </a> </li> <li class=md-nav__item> <a href=../../../k8s/foundamentals/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../k8s/foundamentals/basics/ class=md-nav__link> kubectl basics </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_5 type=checkbox id=__nav_3_5> <label class=md-nav__link for=__nav_3_5> Core Kubernetes <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Core Kubernetes" data-md-level=2> <label class=md-nav__title for=__nav_3_5> <span class="md-nav__icon md-icon"></span> Core Kubernetes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/foundamentals/pod/ class=md-nav__link> Pod </a> </li> <li class=md-nav__item> <a href=../../../k8s/foundamentals/deployment/ class=md-nav__link> Deployment </a> </li> <li class=md-nav__item> <a href=../../../k8s/foundamentals/service/ class=md-nav__link> Service </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_6 type=checkbox id=__nav_3_6> <label class=md-nav__link for=__nav_3_6> Application Modeling <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Application Modeling" data-md-level=2> <label class=md-nav__title for=__nav_3_6> <span class="md-nav__icon md-icon"></span> Application Modeling </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/foundamentals/namespace/ class=md-nav__link> Namespace </a> </li> <li class=md-nav__item> <a href=../../../k8s/foundamentals/statefulset/ class=md-nav__link> StatefulSet </a> </li> <li class=md-nav__item> <a href=../../../k8s/foundamentals/daemonset/ class=md-nav__link> DaemonSet </a> </li> <li class=md-nav__item> <a href=../../../k8s/foundamentals/job/ class=md-nav__link> Job and Cronjob </a> </li> <li class=md-nav__item> <a href=../../../k8s/foundamentals/configuration/ class=md-nav__link> Configuration </a> </li> <li class=md-nav__item> <a href=../../../k8s/foundamentals/secrets/ class=md-nav__link> Secrets </a> </li> <li class=md-nav__item> <a href=../../../k8s/foundamentals/persistence/ class=md-nav__link> Persistence </a> </li> <li class=md-nav__item> <a href=../../../k8s/foundamentals/rbac/ class=md-nav__link> Role Based Access Control (RBAC) </a> </li> <li class=md-nav__item> <a href=../../../k8s/foundamentals/ingress/ class=md-nav__link> Ingress </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_7 type=checkbox id=__nav_3_7> <label class=md-nav__link for=__nav_3_7> Advanced Kubernetes <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Advanced Kubernetes" data-md-level=2> <label class=md-nav__title for=__nav_3_7> <span class="md-nav__icon md-icon"></span> Advanced Kubernetes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/foundamentals/scheduling/ class=md-nav__link> Scheduling </a> </li> <li class=md-nav__item> <a href=../../../k8s/foundamentals/hpa/ class=md-nav__link> Horizontal Pod Autoscaling </a> </li> <li class=md-nav__item> <a href=../../../k8s/foundamentals/policy/ class=md-nav__link> Policy </a> </li> <li class=md-nav__item> <a href=../../../k8s/foundamentals/networkpolicy/ class=md-nav__link> Network Policy </a> </li> <li class=md-nav__item> <a href=../../../k8s/foundamentals/clustermgt/ class=md-nav__link> Cluster Management </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_8 type=checkbox id=__nav_3_8> <label class=md-nav__link for=__nav_3_8> Operating Kubernetes <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Operating Kubernetes" data-md-level=2> <label class=md-nav__title for=__nav_3_8> <span class="md-nav__icon md-icon"></span> Operating Kubernetes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/foundamentals/troubleshooting/ class=md-nav__link> Troubleshooting </a> </li> <li class=md-nav__item> <a href=../../../k8s/foundamentals/healthcheck/ class=md-nav__link> Health Check </a> </li> <li class=md-nav__item> <a href=../../../k8s/foundamentals/helming/ class=md-nav__link> Helming </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_9 type=checkbox id=__nav_3_9> <label class=md-nav__link for=__nav_3_9> Case Study <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Case Study" data-md-level=2> <label class=md-nav__title for=__nav_3_9> <span class="md-nav__icon md-icon"></span> Case Study </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/foundamentals/casestudy-operation-resources/ class=md-nav__link> Operations on Resources </a> </li> <li class=md-nav__item> <a href=../../../k8s/foundamentals/casestudy-health-check/ class=md-nav__link> Health Check </a> </li> <li class=md-nav__item> <a href=../../../k8s/foundamentals/casestudy-calico/ class=md-nav__link> Calico Installation </a> </li> <li class=md-nav__item> <a href=../../../k8s/foundamentals/kyma/ class=md-nav__link> Kyma </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_10 type=checkbox id=__nav_3_10> <label class=md-nav__link for=__nav_3_10> Demos <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Demos data-md-level=2> <label class=md-nav__title for=__nav_3_10> <span class="md-nav__icon md-icon"></span> Demos </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/demo/cap_on_kyma/ class=md-nav__link> Build CAP application on Kyma </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4> Python <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Python data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Python </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../python/ class=md-nav__link> Index </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_2 type=checkbox id=__nav_4_2> <label class=md-nav__link for=__nav_4_2> Python基础 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Python基础 data-md-level=2> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Python基础 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../python/Foundation/ch00/ class=md-nav__link> 安装 </a> </li> <li class=md-nav__item> <a href=../../../python/Foundation/ch01/ class=md-nav__link> 语言基础 </a> </li> <li class=md-nav__item> <a href=../../../python/Foundation/ch02/ class=md-nav__link> 打包和拆包 </a> </li> <li class=md-nav__item> <a href=../../../python/Foundation/ch03/ class=md-nav__link> 函数及文件 </a> </li> <li class=md-nav__item> <a href=../../../python/Foundation/ch04/ class=md-nav__link> 面向对象概念 </a> </li> <li class=md-nav__item> <a href=../../../python/Foundation/ch05/ class=md-nav__link> 面向对象特性 </a> </li> <li class=md-nav__item> <a href=../../../python/Foundation/Algorithms/ class=md-nav__link> 数据结构和算法 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3 type=checkbox id=__nav_4_3> <label class=md-nav__link for=__nav_4_3> Python数据分析基础 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Python数据分析基础 data-md-level=2> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> Python数据分析基础 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../python/DataAnalysis/ch01/ class=md-nav__link> NumPy基础 </a> </li> <li class=md-nav__item> <a href=../../../python/DataAnalysis/ch10/ class=md-nav__link> NumPy进阶 </a> </li> <li class=md-nav__item> <a href=../../../python/DataAnalysis/ch02/ class=md-nav__link> Pandas入门 </a> </li> <li class=md-nav__item> <a href=../../../python/DataAnalysis/ch03/ class=md-nav__link> 数据载入、存储及文件格式 </a> </li> <li class=md-nav__item> <a href=../../../python/DataAnalysis/ch04/ class=md-nav__link> 数据清洗与准备 </a> </li> <li class=md-nav__item> <a href=../../../python/DataAnalysis/ch05/ class=md-nav__link> 数据规整：连接、联合与重塑 </a> </li> <li class=md-nav__item> <a href=../../../python/DataAnalysis/ch06/ class=md-nav__link> 绘图与可视化 </a> </li> <li class=md-nav__item> <a href=../../../python/DataAnalysis/ch07/ class=md-nav__link> 数据聚合与分组操作 </a> </li> <li class=md-nav__item> <a href=../../../python/DataAnalysis/ch08/ class=md-nav__link> 时间序列 </a> </li> <li class=md-nav__item> <a href=../../../python/DataAnalysis/ch09/ class=md-nav__link> 高阶pandas </a> </li> <li class=md-nav__item> <a href=../../../python/DataAnalysis/ch11/ class=md-nav__link> Python建模库介绍 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_4 type=checkbox id=__nav_4_4> <label class=md-nav__link for=__nav_4_4> Demos <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Demos data-md-level=2> <label class=md-nav__title for=__nav_4_4> <span class="md-nav__icon md-icon"></span> Demos </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../python/Demo/CourseSystem/ class=md-nav__link> 选课系统 </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#_2 class=md-nav__link> 基本正则表达式符号 </a> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> 扩展正则表达式符号 </a> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> 字符匹配 </a> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> 位置标记 </a> </li> <li class=md-nav__item> <a href=#_6 class=md-nav__link> 标识符 </a> </li> <li class=md-nav__item> <a href=#_7 class=md-nav__link> 数量修饰符 </a> </li> <li class=md-nav__item> <a href=#_8 class=md-nav__link> 分组 </a> </li> <li class=md-nav__item> <a href=#_9 class=md-nav__link> 正则小练习 </a> </li> <li class=md-nav__item> <a href=#grep class=md-nav__link> 三剑客grep命令 </a> </li> <li class=md-nav__item> <a href=#sed class=md-nav__link> 三剑客sed命令 </a> </li> <li class=md-nav__item> <a href=#awk class=md-nav__link> 三剑客awk命令 </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/huyuhui001/mySite/edit/main/docs/linux/SRE/05-RegExpress.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg> </a> <h1 id=_1>正则表达式<a class=headerlink href=#_1 title="Permanent link"> ¶</a></h1> <p>正则表达式分两类：</p> <ul> <li>基本正则表达式（Basic Regular Expression， 又叫Basic RegEx，简称BREs）</li> <li>扩展正则表达式（Extended Regular Expression， 又叫Extended RegEx，简称EREs）</li> <li>Perl正则表达式（Perl Regular Expression， 又叫Perl RegEx 简称PREs</li> </ul> <p>基本的正则表达式和扩展正则表达式的区别就是元字符的不同。</p> <h2 id=_2>基本正则表达式符号<a class=headerlink href=#_2 title="Permanent link"> ¶</a></h2> <p><code>^</code>：表示以某个字符开始 <code>$</code>：表示以某个字符结尾 <code>.</code>：表示匹配一个且只匹配一个字符 <code>*</code>：表示匹配前边一个字符出现0次或者多次 <code>[]</code>：表示匹配括号内的多个字符信息,一个一个匹配 <code>.*</code>：表示匹配所有，空行也会进行匹配 <code>[^]</code>：表示不匹配括号内的每一个字符 <code>^$</code>：表示匹配空行信息 <code>\</code>：将有特殊含义的字符转义为通配符</p> <h2 id=_3>扩展正则表达式符号<a class=headerlink href=#_3 title="Permanent link"> ¶</a></h2> <p><code>+</code>：表示前一个字符出现一次或一次以上 <code>?</code>：表示前一个字符出现0次或者一次以上 <code>|</code>：表示或者的关系,匹配多个信息 <code>()</code>：匹配一个整体信息，也可以接后项引用 <code>{}</code>：定义前边字符出现几次</p> <div class="admonition tips"> <p class=admonition-title>Tips</p> <p><code>grep -E</code> 或者<code>egrep</code>只是表示扩展正则，不代表加了e就表示转义了。</p> <p>当<code>grep</code>使用扩展正则的符号时候需要用<code>\</code>转义为通配符才能使用。</p> </div> <h2 id=_4>字符匹配<a class=headerlink href=#_4 title="Permanent link"> ¶</a></h2> <ul> <li><code>[:alpha:]</code>：表示所有的字母（不区分大小写），效果同<code>[a-z]</code></li> <li><code>[:digit:]</code>：表示任意单个数字，效果同<code>[0-9]</code></li> <li><code>[:xdigit:]</code>：表示十六进制数字</li> <li><code>[:lower:]</code>：表示任意单个小写字母</li> <li><code>[:upper:]</code>：表示任意单个大写字母</li> <li><code>[:alnum:]</code>：表示任意单个字母或数字</li> <li><code>[:blank:]</code>：表示空白字符（空格和制表符）</li> <li><code>[:space:]</code>：表示包括空格、制表符（水平和垂直）、换行符、回车符等各种类型的空白，比<code>[:blank:]</code>范围更广</li> <li><code>[:cntrl:]</code>：表示不可打印的控制字符（退格、删除、警铃等）</li> <li><code>[:graph:]</code>：表示可打印的非空白字符</li> <li><code>[:print:]</code>：表示可打印字符</li> <li><code>[:punct:]</code>：表示标点符号</li> </ul> <h2 id=_5>位置标记<a class=headerlink href=#_5 title="Permanent link"> ¶</a></h2> <p>位置标记锚点（position marker anchor）是标识字符串位置的正则表达式。默认情况下，正则表达式所匹配的字符可以出现在字符串中任何位置。</p> <ul> <li> <p><code>^</code>：行首锚定，指定了匹配正则表达式的文本必须起始于字符串的首部。</p> <ul> <li>例如：<code>^tux</code>能够匹配以<code>tux</code>起始的行</li> </ul> </li> <li> <p><code>$</code>：行尾锚定，指定了匹配正则表达式的文本必须结束于目标字符串的尾部。</p> <ul> <li>例如：<code>tux$</code>能够匹配以<code>tux</code>结尾的行</li> </ul> </li> <li> <p><code>^PATTERN$</code>：用模式PATTERN匹配整行。</p> </li> <li> <p><code>^$</code>：匹配空行。</p> </li> <li> <p><code>^[[:space:]]*$</code>：匹配空白行（整行）。</p> </li> <li> <p><code>\&lt;</code>或<code>\b</code>：词首锚定，用于单词模式匹配左侧。（单词是有字母、数字、下划线组成）</p> </li> <li> <p><code>\&gt;</code>或<code>\b</code>：词尾锚定，用于单词模式匹配右侧。（单词是有字母、数字、下划线组成）</p> </li> <li> <p><code>\&lt;PATTERN\&gt;</code>：匹配整个单词。（单词是有字母、数字、下划线组成）</p> </li> </ul> <h2 id=_6>标识符<a class=headerlink href=#_6 title="Permanent link"> ¶</a></h2> <p>标识符是正则表达式的基础组成部分。它定义了那些为了匹配正则表达式，必须存在（或不存在）的字符。</p> <ul> <li> <p><code>A</code>字符：正则表达式必须匹配该字符。</p> <ul> <li>例如：<code>A</code>能够匹配字符<code>A</code>。</li> </ul> </li> <li> <p><code>.</code>：匹配任意一个字符。</p> <ul> <li>例如：<code>Hack.</code>能够匹配<code>Hackl</code>和<code>Hacki</code>，但是不能匹配<code>Hackl2</code>或<code>Hackil</code>，它只能匹配单个字符。</li> </ul> </li> <li> <p><code>[]</code>：匹配中括号内的任意一个字符。中括号内可以是一个字符组或字符范围 </p> <ul> <li>例如：<code>coo[kl]</code>能够匹配<code>cook</code>或<code>cool</code>。</li> <li>例如：<code>[0-9]</code>匹配任意单个数字</li> </ul> </li> <li> <p><code>[^]</code>：匹配不在中括号内的任意一个字符。中括号内可以是一个字符组或字符范围 </p> <ul> <li>例如：<code>9[^01]</code>能够匹配<code>92</code>和<code>93</code>，但是不匹配<code>91</code>和<code>90</code>。</li> <li>例如：<code>A[^0-9]</code>匹配A以及随后除数字外的任意单个字符</li> </ul> </li> <li> <p><code>\s</code>：匹配任何空白字符，包括空格、制表符、换页等。等价于<code>[\f\r\t\v]</code></p> </li> <li> <p><code>\S</code>：匹配任何非空白字符，等价于<code>[^\f\r\t\v]</code></p> </li> <li> <p><code>\w</code>：匹配一个字母、数字、下划线、汉字、其他国家文字字符，等价于<code>[_[:alnum:]字]</code></p> </li> <li> <p><code>\W</code>：匹配一个非字母、数字、下划线、汉字、其他国家文字字符，等价于<code>[^_[:alnum:]字]</code></p> </li> </ul> <h2 id=_7>数量修饰符<a class=headerlink href=#_7 title="Permanent link"> ¶</a></h2> <p>一个标识符可以出现一次、多次或是不出现。数量修饰符定义了模式可以出现的次数。</p> <ul> <li> <p><code>?</code>：匹配之前的项0次或1次。</p> <ul> <li>例如：<code>colou?r</code>能够匹配<code>color</code>或<code>colour</code>，但是不能匹配<code>colouur</code>。</li> </ul> </li> <li> <p><code>+</code>：匹配之前的项1次或多次。</p> <ul> <li>例如：<code>Rollno-9+</code>能够匹配<code>Rollno-99</code>和<code>Rollno-9</code>，但是不能匹配<code>Rollno-</code>。</li> <li>例如：<code>colou+r</code>能够匹配<code>colour</code>或<code>colouur</code>，不能匹配<code>color</code>。</li> <li>例如：<code>goo\+gle</code>能够匹配1个或多个<code>o</code>，如：<code>google</code>，<code>gooogle</code>，<code>goooogle</code>等。</li> </ul> </li> <li> <p><code>*</code>：匹配之前的项0次或多次。</p> <ul> <li>例如：<code>co*l</code>能够匹配<code>col</code>和<code>coool</code>。</li> <li>例如：<code>goo*gle</code>能匹配0个或多个<code>o</code>，如：<code>gogle</code>、<code>google</code>、<code>gooogle</code>、<code>gooooooooogle</code>等。</li> <li>例如：<code>gooo*gle</code>，则可以匹配<code>google</code>、<code>gooogle</code>、<code>gooooooooogle</code>等，对比上面等差别。</li> </ul> </li> <li> <p><code>.*</code>：匹配任意长度等任意字符。</p> </li> <li> <p><code>{n}</code>：匹配之前的项<code>n</code>次。</p> <ul> <li>例如：<code>[0-9]{3}</code>能够匹配任意的三位数。</li> <li>例如：<code>[0-9]{3}</code>可以扩展为<code>[0-9][0-9][0-9]</code>。</li> </ul> </li> <li> <p><code>{n}</code>：之前的项至少需要匹配<code>n</code>次。</p> <ul> <li>例如：<code>[0-9]{2,}</code>能够匹配任意一个两位或更多位的数字。</li> <li>例如：<code>go\{2,\}gle</code>能够匹配2个或者多个<code>o</code>，如<code>google</code>，<code>gooooogle</code>等，不能匹配<code>gogle</code>。</li> </ul> </li> <li> <p><code>{n,m}</code>：之前的项所必须匹配的最小<code>n</code>次数和最大<code>m</code>次数。</p> <ul> <li>例如：<code>[0-9]{2,5}</code>能够匹配两位数到五位数之间的任意一个数字。</li> </ul> </li> </ul> <h2 id=_8>分组<a class=headerlink href=#_8 title="Permanent link"> ¶</a></h2> <p>有一些特殊字符可以调整正则表达式的匹配方式。</p> <ul> <li> <p><code>\</code>：转义字符可以转义特殊字符。</p> <ul> <li>例如：<code>a\.b</code>能够匹配<code>a.b</code>，但不能匹配<code>ajb</code>。因为<code>\</code>忽略了<code>.</code>的特殊意义。</li> </ul> </li> <li> <p><code>()</code>：将括号中的内容视为一个整体。</p> <ul> <li>例如：<code>ma(tri)?x</code> 能够匹配<code>max</code>或<code>matrix</code></li> <li>例如：<code>\(root\)+</code></li> </ul> </li> <li> <p>后向引用：分组括号中的模式匹配到的内容会被正则表达式引擎记录于内部变量中，这些变量名方式为：<code>\1</code>，<code>\2</code>，<code>\3</code>。</p> <ul> <li><code>\1</code>：表示从左侧起第一个左括号以及与之匹配的右括号之间的模式所匹配到的字符<ul> <li>例如：<code>\(string1\(string2\)\)</code>，<code>\1</code>是<code>string1\(string2\)</code>，<code>\2</code>是<code>string2</code></li> </ul> </li> <li><code>\0</code>：表示正则表达式匹配的所有字符</li> </ul> </li> <li> <p><code>|</code>：指定了一种选择结构，可以匹配<code>|</code>两边的任意一项。</p> <ul> <li>例如：<code>Oct (1st|2nd)</code>能够匹配<code>Oct 1st</code>或<code>Oct 2nd</code>。</li> </ul> </li> </ul> <p>举例：匹配正负数 <div class=highlight><pre><span></span><code>$ echo -1 -2 12 -125 23 | grep &#39;\-\?[0-9]\+&#39; 
-1 -2 12 -125 3log 23 it4u

$ echo -1 -2 12 -125 3log 23 it4u | grep &#39;\-\?[0-9]\+&#39;
-1 -2 12 -125 3log 23 it4u

$ echo -1 -2 12 -125 3log 23 it4u | grep &#39;\-\?[0-9]*&#39;
-1 -2 12 -125 3log 23 it4u

$ echo -1 -2 12 -125 3log 23 it4u | grep -E &#39;\-\?[0-9]\+&#39;


$ echo -1 -2 12 -125 3log 23 it4u | grep -E -- &#39;-?[0-9]+&#39;
-1 -2 12 -125 3log 23 it4u

$ echo -1 -2 12 -125 3log 23 it4u | grep -E &#39;(-)?[0-9]+&#39;
-1 -2 12 -125 3log 23 it4u
</code></pre></div></p> <p>举例：获取IP地址 <div class=highlight><pre><span></span><code>ifconfig eth0
eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
        inet 192.168.10.210  netmask 255.255.255.0  broadcast 192.168.10.255
        inet6 fe80::20c:29ff:fea4:e17a  prefixlen 64  scopeid 0x20&lt;link&gt;
        ether 00:0c:29:a4:e1:7a  txqueuelen 1000  (Ethernet)
        RX packets 7654  bytes 635932 (621.0 KiB)
        RX errors 0  dropped 1  overruns 0  frame 0
        TX packets 1934  bytes 279649 (273.0 KiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

$ ifconfig eth0 | grep netmask | grep -o &#39;[0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}&#39;
192.168.10.210
255.255.255.0
192.168.10.255

$ ifconfig eth0 | grep netmask | grep -o &#39;[0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}&#39; | head -n 1
192.168.10.210



$ ifconfig eth0 | grep -o &#39;[0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}&#39;
192.168.10.210
255.255.255.0
192.168.10.255

ifconfig eth0 | grep -o &#39;[0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}&#39; | head -n 1
192.168.10.210
</code></pre></div></p> <p>匹配空行和非空行： <div class=highlight><pre><span></span><code>$ grep &#39;^$&#39; /etc/profile
$ grep -v &#39;^$&#39; /etc/profile
</code></pre></div></p> <p>匹配非空行和非#开头的行：（三种方法） <div class=highlight><pre><span></span><code>$ grep -v &#39;^$&#39; /etc/profile | grep -v &#39;^#&#39;
$ grep -v &#39;^$\|#&#39; /etc/profile
$ grep &#39;^[^#]&#39; /etc/profile
</code></pre></div></p> <h2 id=_9>正则小练习<a class=headerlink href=#_9 title="Permanent link"> ¶</a></h2> <ul> <li> <p>显示<code>/proc/meminfo</code>文件中以大小s开头的行，要求使用两种方法。 <div class=highlight><pre><span></span><code>$ cat /proc/meminfo | grep -i &quot;^s&quot;

$ cat /proc/meminfo | grep &quot;^[sS]&quot;
</code></pre></div></p> </li> <li> <p>显示<code>/etc/passwd</code>文件中不以<code>/bin/bash</code>结尾的行。 <div class=highlight><pre><span></span><code>$ grep -v &quot;/bin/bash$&quot; /etc/passwd
</code></pre></div></p> </li> <li> <p>显示用户<code>rpc</code>默认的shell程序。 <div class=highlight><pre><span></span><code>$ grep &quot;rpc&quot; /etc/passwd | cut -d &quot;:&quot; -f 7
/sbin/nologin
</code></pre></div></p> </li> <li> <p>找出<code>/etc/passwd</code>中的两位或三位数。 <div class=highlight><pre><span></span><code>$ grep -Eo &quot;[:digit:]{2,3}&quot; /etc/passwd
$ grep -Eo &quot;[0-9]{2,3}&quot; /etc/passwd
</code></pre></div> 这里用到了<code>{}</code>，属于扩展正则符号，所以要用<code>-E</code>。</p> </li> <li> <p>显示Rocky 9的<code>/etc/grub2.cfg</code>文件中，至少以一个空白字符开头的且后面有非空白字符的行。（注：<code>/etc/grub2.cfg</code>在openSUSE和Ubuntu中没有） <div class=highlight><pre><span></span><code># 不含首字符为tab
$ sudo grep &quot;^ &quot; /etc/grub2.cfg

# 包含首字符为tab
$ sudo grep &quot;^[[:space:]]&quot; /etc/grub2.cfg
</code></pre></div></p> </li> <li> <p>找出<code>netstat -tan</code>命令结果中以<code>LISTEN</code>后跟任意多个空白字符结尾的行。 <div class=highlight><pre><span></span><code>$ netstat -tan | grep -E &quot;LISTEN[[:space:]]+&quot;
</code></pre></div></p> </li> <li> <p>显示Rocky 9上所有UID小于1000以内的用户名和UID。 <div class=highlight><pre><span></span><code>$ cat /etc/passwd | cut -d &quot;:&quot; -f 1,3 | grep -E &quot;\:[0-9]{1,3}$&quot;
$ grep -E &quot;\:[0-9]{1,3}\:[0-9]{1,}&quot; /etc/passwd | cut -d &quot;:&quot; -f 1,3
</code></pre></div></p> </li> <li> <p>在Rocky 9上显示文件<code>/etc/passwd</code>用户名和shell同名的行。 <div class=highlight><pre><span></span><code>$ grep -E &quot;^([[:alnum:]]+\b).*\1$&quot; /etc/passwd
sync:x:5:0:sync:/sbin:/bin/sync
shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown
halt:x:7:0:halt:/sbin:/sbin/halt
</code></pre></div></p> </li> <li> <p>利用<code>df</code>和<code>grep</code>，取出磁盘各分区利用率,并从大到小排序。 <div class=highlight><pre><span></span><code>$ df | tr -s &quot; &quot; | cut -d &quot; &quot; -f 1,5 | sort -n -t &quot; &quot; -k 2
devtmpfs 0%
Filesystem Use%
tmpfs 0%
tmpfs 0%
/dev/mapper/rl-home 1%
tmpfs 2%
/dev/mapper/rl-root 5%
/dev/nvme0n1p1 23%
</code></pre></div></p> </li> <li> <p>显示三个用户<code>root</code>，<code>mage</code>，<code>wang</code>的UID和默认shell。 <div class=highlight><pre><span></span><code>$ grep &quot;^root:\|^sync:\|^bin:&quot; /etc/passwd | cut -d &quot;:&quot; -f 1,7
root:/bin/bash
bin:/usr/sbin/nologin
</code></pre></div></p> </li> <li> <p>使用<code>egrep</code>取出<code>/etc/default-1/text_2/local.3/grub</code>中其基名和目录名。 <div class=highlight><pre><span></span><code># 基名
$ echo &quot;/etc/default-1/text_2/local.3/grub&quot; | egrep -io &quot;[[:alpha:]]+$&quot;
grub

# 目录名
$  echo &quot;/etc/default-1/text_2/local.3/grub&quot; | egrep -io &quot;/([[:alpha:]]+.|_?[[:alpha:]]|[[:alnum:]]+/){7}&quot;
/etc/default-1/text_2/local.3/ 
</code></pre></div></p> </li> <li> <p>统计<code>last</code>命令中以<code>vagrant</code>登录的每个主机IP地址登录次数。 <div class=highlight><pre><span></span><code>$ last | grep vagrant | tr -s &quot; &quot; | cut -d &quot; &quot; -f 3 | grep -E &quot;([0-9]{1,3}\.){1,3}[0-9]{1,3}&quot; | sort -n | uniq -c
     24 192.168.10.107
     38 192.168.10.109
     17 192.168.10.201
      6 192.168.10.210
      2 192.168.10.220
</code></pre></div></p> </li> <li> <p>利用扩展正则表达式分别表示0-9、10-99、100-199、200-249、250-255。 <div class=highlight><pre><span></span><code>[0-9]|[0-9]{2}|1[0-9]{2}|2[0-4][0-9]|25[0-5]
</code></pre></div></p> </li> <li> <p>显示<code>ifconfig</code>命令结果中所有IPv4地址。 <div class=highlight><pre><span></span><code>$ ifconfig | grep -Eo &quot;([0-9]{1,3}\.){3}[0-9]{1,3}&quot; | grep -v &quot;^255&quot;
192.168.10.210
192.168.10.255
127.0.0.1
</code></pre></div></p> </li> <li> <p>显示<code>ip addr</code>命令结果中所有IPv4地址。 <div class=highlight><pre><span></span><code>$ ip addr show eth0 | grep inet | grep eth0 | tr -s &quot; &quot; | cut -d &quot; &quot; -f 3 | cut -d &quot;/&quot; -f 1
192.168.10.210

$ ip addr show | grep -Eo &quot;([0-9]{1,3}\.){3}[0-9]{1,3}&quot; | grep -v &quot;^255&quot;
127.0.0.1
192.168.10.210
192.168.10.255
</code></pre></div></p> </li> <li> <p>将此字符串Welcome to the linux world中的每个字符去重并排序，重复次数多的排到前面。 <div class=highlight><pre><span></span><code>$ echo &quot;Welcome to the linux world&quot; | grep -o [[:alpha:]] | sort | uniq -c | sort -nr
      3 o
      3 l
      3 e
      2 t
      1 x
      1 W
      1 w
      1 u
      1 r
      1 n
      1 m
      1 i
      1 h
      1 d
      1 c
</code></pre></div></p> </li> </ul> <h2 id=grep>三剑客<code>grep</code>命令<a class=headerlink href=#grep title="Permanent link"> ¶</a></h2> <p>格式：</p> <ul> <li>grep [OPTIONS] PATTERN [FILE...]</li> <li>grep [OPTIONS] -e PATTERN ... [FILE...]</li> <li>grep [OPTIONS] -f FILE ... [FILE...]</li> </ul> <p>参数：</p> <ul> <li><code>-n</code>：显示过滤出来的文件在文件当中的行号</li> <li><code>-c</code>：显示匹配到的行数</li> <li><code>-o</code>：只显示匹配到的内容</li> <li><code>-q</code>：静默输出（一般用在shell脚本当中，通过<code>echo $?</code>查看命令执行结果，0表示成功，非0表示失败））</li> <li><code>-i</code>：忽略大小写</li> <li><code>-v</code>：反向查找</li> <li><code>-w</code>：匹配某个词词：在Linux中，词为一连串字母、数字和下划线组成的字符串</li> <li><code>-E</code>：使用扩展正则</li> <li><code>-R</code>：递归查询</li> <li><code>-l</code>：只打印文件路径</li> </ul> <p>扩展参数：</p> <ul> <li><code>-A</code>：显示匹配到的数据的后几n行</li> <li><code>-B</code>：显示匹配到的数据的前几n行</li> <li><code>-C</code>：显示匹配到的数据的前后各几n行</li> </ul> <p>示例：</p> <p>匹配用户： <div class=highlight><pre><span></span><code>grep root /etc/passwd
root:x:0:0:root:/root:/bin/bash

$ grep &quot;USER&quot; /etc/passwd

$ grep &quot;$USER&quot; /etc/passwd
vagrant:x:1000:478:vagrant:/home/vagrant:/bin/bash

$ grep &#39;$USER&#39; /etc/passwd
</code></pre></div></p> <p>匹配关键字： <div class=highlight><pre><span></span><code>$ grep processor /proc/cpuinfo
processor       : 0
processor       : 1

$ grep -o processor /proc/cpuinfo
processor
processor

$ grep &quot;cpu family&quot; /proc/cpuinfo
cpu family      : 6
cpu family      : 6

$ grep -o &quot;cpu family&quot; /proc/cpuinfo
cpu family
cpu family
</code></pre></div></p> <p>通过grep进行文件比较。 <div class=highlight><pre><span></span><code># 最后一行是空行
$ cat f1
a
b
1
c


# 最后一行是空行
$ cat f2
b
e
f
c
1
2


# 高亮显示相同内容的行，包含最后一行空行
$ grep -f f1 f2
b
e
f
c
1
2


# 只显示相同内容的行，包含最后一行空行
$ grep -wf f1 f2
b
c
1


# 只显示不同内容的行
$ grep -wvf f1 f2
e
f
2
</code></pre></div></p> <div class="admonition tips"> <p class=admonition-title>Tips</p> <p><code>grep -wvf f1 f2</code> 或者<code>grep -w -v -f f1 f2</code>中，<code>-f</code>只能作为最后一个参数，否则会报错。</p> </div> <p>体会基本正则和扩展正则的差异。</p> <p>例1：转义。 <div class=highlight><pre><span></span><code># 下面几个命令返回的结果是一样的。
$ grep &quot;root\|bash&quot; /etc/passwd
$ grep -E &quot;root|bash&quot; /etc/passwd
$ grep -e &quot;root&quot; -e &quot;bash&quot; /etc/passwd

# 下面的命令没有匹配结果返回。
$ grep &quot;root|bash&quot; /etc/passwd
</code></pre></div></p> <p>例2：下面4个命令返回同样的结果。 <div class=highlight><pre><span></span><code>$ grep &quot;root&quot; /etc/passwd
$ grep -E &quot;root&quot; /etc/passwd
$ grep &quot;\&lt;root\&gt;&quot; /etc/passwd
$ grep -E &quot;\&lt;root\&gt;&quot; /etc/passwd
</code></pre></div></p> <p>例3：行首行尾锚定。 <div class=highlight><pre><span></span><code>$ grep &quot;^\(.*\)\&gt;.*\&lt;\1$&quot; /etc/passwd
$ grep -E &quot;^(.*)\&gt;.*\&lt;\1$&quot; /etc/passwd
$ egrep &quot;^(.*)\&gt;.*\&lt;\1$&quot; /etc/passwd
sync:x:5:0:sync:/sbin:/bin/sync
shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown
halt:x:7:0:halt:/sbin:/sbin/halt
</code></pre></div></p> <p>例4：三种方法求和计算，运用<code>grep</code>，<code>cut</code>，<code>bc</code>和<code>paste</code>命令。 <div class=highlight><pre><span></span><code>$cat age
Jason=20
Tom=30
Jack=40

# 方法1
$ cat age | cut -d &quot;=&quot; -f 2 | tr &quot;\n&quot; + | grep -Eo &quot;.*[0-9]&quot; | bc
90

# 方法2
$ grep -Eo &quot;[0-9]+&quot; age | tr &quot;\n&quot; + | grep -Eo &quot;.*[0-9]&quot; | bc
90

# 方法3
$  grep -Eo &quot;[0-9]+&quot; age | paste -s -d &quot;+&quot; | bc
90
</code></pre></div></p> <h2 id=sed>三剑客<code>sed</code>命令<a class=headerlink href=#sed title="Permanent link"> ¶</a></h2> <p><code>sed</code>是stream editor的缩写，中文称之为“流编辑器”。 <code>sed</code>命令是一个面向行处理的工具，它以“行”为处理单位，针对每一行进行处理，处理后的结果会输出到标准输出<code>STDOUT</code>，不会对读取的文件做任何修改。</p> <p><code>sed</code>的工作原理：</p> <p><code>sed</code>命令是面向“行”进行处理的，每一次处理一行内容。 处理时，<code>sed</code>会把要处理的行存储在缓冲区中，接着用<code>sed</code>命令处理缓冲区中的内容，处理完成后，把缓冲区的内容送往屏幕。接着处理下一行，这样不断重复，直到文件末尾。这个缓冲区被称为“模式空间”（pattern space）。</p> <p>sed 命令格式： <div class=highlight><pre><span></span><code>$ sed command file
</code></pre></div></p> <p><code>command</code>部分可以分为两部分：</p> <ul> <li> <p>范围设定，可以采用两种不同的方式来表达：</p> <ul> <li>指定行数：如：<ul> <li><code>3,5</code>表示第3、4、5行</li> <li><code>5,$</code>表示第5行至文件最后一行</li> </ul> </li> <li>模式匹配：如：<ul> <li><code>/^[^dD]/</code>表示匹配行首不是以<code>d</code>或<code>D</code>开头的行</li> </ul> </li> </ul> </li> <li> <p>动作处理，下面是常用的动作：</p> <ul> <li><code>a</code>：新增， <code>a</code>后面的字串会在新的一行出现（当前行的下一行）</li> <li><code>i</code>：插入， <code>i</code>后面的字串会在新的一行出现（当前行的上一行）</li> <li><code>r filename</code>：读取指定文件<code>fllename</code>的内容，追加到当前行的下一行</li> <li><code>R filename</code>：读取指定文件<code>fllename</code>的一行，追加到当前行的下一行</li> <li><code>d</code>：删除该行</li> <li><code>p</code>：打印该行</li> <li><code>w filename</code>：写入到指定文件filename中。</li> <li><code>s/regexp/replacement/</code>：取代，用replacement取代正则regexp匹配到的内容</li> </ul> </li> </ul> <p>创建一个<code>testfile</code>文件。 <div class=highlight><pre><span></span><code>$ cat testfile
HELLO LINUX!
Linux is a free unix-type opterating system.
This is a linux testfile!
Linux test
Google
Taobao
Banbooob
Tesetfile
Wiki
</code></pre></div></p> <p>将<code>testfile</code>的内容列出第5～7行，并且列印行号。 <div class=highlight><pre><span></span><code>$ nl testfile | sed -n &#39;5,7p&#39;
     5  Google
     6  Taobao
     7  Banbooob
</code></pre></div></p> <p>将<code>testfile</code>的内容列出，且在第6行后加上<code>I love Linux</code>。 <div class=highlight><pre><span></span><code>$ sed -e &#39;6a I love Linux&#39; testfile
HELLO LINUX!
Linux is a free unix-type opterating system.
This is a linux testfile!
Linux test
Google
Taobao
I love Linux
Banbooob
Tesetfile
Wiki
</code></pre></div></p> <p>将<code>testfile</code>的内容列出并且列印行号，且在第6行后添加<code>I love Linux</code>。 <div class=highlight><pre><span></span><code>$ nl testfile | sed &#39;6a I love Linux&#39;
$ nl testfile | sed &#39;6a\I love Linux&#39;
     1  HELLO LINUX!
     2  Linux is a free unix-type opterating system.
     3  This is a linux testfile!
     4  Linux test
     5  Google
     6  Taobao
I love Linux
     7  Banbooob
     8  Tesetfile
     9  Wiki
</code></pre></div></p> <p>将<code>testfile</code>的内容列出并且列印行号，且在第3行前添加<code>I am a journer learner</code>。 <div class=highlight><pre><span></span><code>$ nl testfile | sed &#39;3i\I am a journer learner&#39;
     1  HELLO LINUX!
     2  Linux is a free unix-type opterating system.
I am a journer learner
     3  This is a linux testfile!
     4  Linux test
     5  Google
     6  Taobao
     7  Banbooob
     8  Tesetfile
     9  Wiki
</code></pre></div></p> <p>将<code>testfile</code>的内容列出并且列印行号，且在第3行前添加三行内容<code>Add line 1</code>，<code>Add line 2</code>，<code>Add line 3</code>。 <div class=highlight><pre><span></span><code>$ nl testfile | sed &#39;3i\Add line 1 \
Add line 2 \
Add line 3&#39;
     1  HELLO LINUX!
     2  Linux is a free unix-type opterating system.
Add line 1
Add line 2
Add line 3
     3  This is a linux testfile!
     4  Linux test
     5  Google
     6  Taobao
     7  Banbooob
     8  Tesetfile
     9  Wiki
</code></pre></div></p> <p>将<code>testfile</code>的内容列出并且列印行号，且将第2-5行的内容取代成为<code>replaced</code>。 <div class=highlight><pre><span></span><code>$ nl testfile | sed &#39;2,5c\replaced&#39;
     1  HELLO LINUX!
replaced
     6  Taobao
     7  Banbooob
     8  Tesetfile
     9  Wiki
</code></pre></div></p> <p>将<code>testfile</code>的内容列出并且列印行号，且删除第2~5行。 <div class=highlight><pre><span></span><code>$ nl testfile | sed &#39;2,5d&#39;
     1  HELLO LINUX!
     6  Taobao
     7  Banbooob
     8  Tesetfile
     9  Wiki
</code></pre></div></p> <p>将<code>testfile</code>的内容列出并且列印行号，且删除第5行到最后一行。 <div class=highlight><pre><span></span><code>$ nl testfile | sed &#39;5,$d&#39;
     1  HELLO LINUX!
     2  Linux is a free unix-type opterating system.
     3  This is a linux testfile!
     4  Linux test
</code></pre></div></p> <p>将<code>testfile</code>的内容列出并且列印行号，并搜索所有包含<code>oo</code>关键字的行（包含匹配）。 <div class=highlight><pre><span></span><code>$ nl testfile | sed -n &#39;/ooo/p&#39;
     7  Banbooob

$ nl testfile | sed -n &#39;/oo/p&#39;
     5  Google
     7  Banbooob
</code></pre></div></p> <p>将<code>testfile</code>的内容列出并且列印行号，搜索所有包含<code>oo</code>关键字的行并删除。 <div class=highlight><pre><span></span><code>nl testfile | sed &#39;/oo/d&#39;
     1  HELLO LINUX!
     2  Linux is a free unix-type opterating system.
     3  This is a linux testfile!
     4  Linux test
     6  Taobao
     8  Tesetfile
     9  Wiki
</code></pre></div></p> <p>将<code>testfile</code>的内容列出并且列印行号，搜索包含有<code>oo</code>的行，把<code>oo</code>替换为<code>kk</code>，再输出这行。 <div class=highlight><pre><span></span><code>$ nl testfile | sed -n &#39;/oo/{s/oo/kk/;p;q}&#39;
$ nl testfile | sed -ne &#39;/oo/{s/oo/kk/;p;q}&#39;
     5  Gkkgle
</code></pre></div></p> <p>将<code>testfile</code>的每行中所有含有<code>ao</code>的全部替换成<code>HH</code>。<code>g</code>表示全局匹配。 <div class=highlight><pre><span></span><code>$ sed -e &#39;s/ao/HH/g&#39; testfile
$ sed &#39;s/ao/HH/g&#39; testfile
HELLO LINUX!
Linux is a free unix-type opterating system.
This is a linux testfile!
Linux test
Google
THHbHH
Banbooob
Tesetfile
Wiki
</code></pre></div></p> <p>将<code>testfile</code>的每行中第一次出现<code>ao</code>的替换成<code>HH</code>。 <div class=highlight><pre><span></span><code>$ sed &#39;s/ao/HH/&#39; testfile
HELLO LINUX!
Linux is a free unix-type opterating system.
This is a linux testfile!
Linux test
Google
THHbao
Banbooob
Tesetfile
Wiki
</code></pre></div></p> <p>使用参数<code>-i</code>进行源文件修改。 <div class=highlight><pre><span></span><code>$ sed -i &#39;s/ao/HH/&#39; testfile
$ cat testfile
HELLO LINUX!
Linux is a free unix-type opterating system.
This is a linux testfile!
Linux test
Google
THHbao
Banbooob
Tesetfile
Wiki
</code></pre></div></p> <h2 id=awk>三剑客<code>awk</code>命令<a class=headerlink href=#awk title="Permanent link"> ¶</a></h2> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../04-TextTools/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Text Tools" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Text Tools </div> </div> </a> <a href=../../Administration/01/ class="md-footer__link md-footer__link--next" aria-label="Next: Linux File System Overview" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Linux File System Overview </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.instant", "navigation.top"], "search": "../../../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script> <script src=../../../assets/javascripts/bundle.2ab50757.min.js></script> </body> </html>