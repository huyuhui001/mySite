<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://huyuhui001.github.io/mySite/linux/SRE/02-filesystem/ rel=canonical><link rel=icon href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.3.0, mkdocs-material-7.3.6"><title>第二章 文件系统 - UPSkilling</title><link rel=stylesheet href=../../../assets/stylesheets/main.a57b2b03.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.3f5d1f46.min.css><meta name=theme-color content=#009485><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style><link rel=stylesheet href=../../../extra.css></head> <body dir=ltr data-md-color-scheme data-md-color-primary=teal data-md-color-accent=green> <script>function __prefix(e){return new URL("../../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#_1 class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title=UPSkilling class="md-header__button md-logo" aria-label=UPSkilling data-md-component=logo> <img src=../../../assets/logo.jpg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> UPSkilling </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> 第二章 文件系统 </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/huyuhui001/mySite title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> huyuhui001/mySite </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> UPSkilling </a> </li> <li class=md-tabs__item> <a href=../../ class="md-tabs__link md-tabs__link--active"> Linux </a> </li> <li class=md-tabs__item> <a href=../../../k8s/ class=md-tabs__link> Kubernetes </a> </li> <li class=md-tabs__item> <a href=../../../python/ class=md-tabs__link> Python </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title=UPSkilling class="md-nav__button md-logo" aria-label=UPSkilling data-md-component=logo> <img src=../../../assets/logo.jpg alt=logo> </a> UPSkilling </label> <div class=md-nav__source> <a href=https://github.com/huyuhui001/mySite title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> huyuhui001/mySite </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_1 type=checkbox id=__nav_1> <label class=md-nav__link for=__nav_1> UPSkilling <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=UPSkilling data-md-level=1> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> UPSkilling </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> Index </a> </li> <li class=md-nav__item> <a href=../../../about/ class=md-nav__link> About </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2> Linux <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Linux data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Linux </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ class=md-nav__link> Index </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_2 type=checkbox id=__nav_2_2 checked> <label class=md-nav__link for=__nav_2_2> Linux SRE <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Linux SRE" data-md-level=2> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> Linux SRE </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../01-fundamentals/ class=md-nav__link> 第一章 Linux基础 </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> 第二章 文件系统 <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> 第二章 文件系统 </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#1 class=md-nav__link> 1.主要目录 </a> </li> <li class=md-nav__item> <a href=#2 class=md-nav__link> 2.文件操作命令 </a> <nav class=md-nav aria-label=2.文件操作命令> <ul class=md-nav__list> <li class=md-nav__item> <a href=#21 class=md-nav__link> 2.1.显示当前工作目录 </a> </li> <li class=md-nav__item> <a href=#22 class=md-nav__link> 2.2.相对和绝对路径 </a> </li> <li class=md-nav__item> <a href=#23 class=md-nav__link> 2.3.更改目录 </a> </li> <li class=md-nav__item> <a href=#24 class=md-nav__link> 2.4.列出目录内容 </a> </li> <li class=md-nav__item> <a href=#25stat class=md-nav__link> 2.5.文件状态stat </a> </li> <li class=md-nav__item> <a href=#26 class=md-nav__link> 2.6.确定文件类型 </a> </li> <li class=md-nav__item> <a href=#27 class=md-nav__link> 2.7.文件编码转换 </a> </li> <li class=md-nav__item> <a href=#28 class=md-nav__link> 2.8.通配符 </a> </li> <li class=md-nav__item> <a href=#29 class=md-nav__link> 2.9.字符集 </a> </li> <li class=md-nav__item> <a href=#210 class=md-nav__link> 2.10.特殊符号 </a> </li> <li class=md-nav__item> <a href=#211touch class=md-nav__link> 2.11.刷新文件时间touch </a> </li> <li class=md-nav__item> <a href=#212cp class=md-nav__link> 2.12.复制文件和目录cp </a> </li> <li class=md-nav__item> <a href=#213mv class=md-nav__link> 2.13.移动文件和目录mv </a> </li> <li class=md-nav__item> <a href=#214rename class=md-nav__link> 2.14.重命名文件和目录rename </a> </li> <li class=md-nav__item> <a href=#215rm class=md-nav__link> 2.15.删除文件rm </a> </li> <li class=md-nav__item> <a href=#216 class=md-nav__link> 2.16.目录操作命令 </a> </li> <li class=md-nav__item> <a href=#217 class=md-nav__link> 2.17.练习 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#3 class=md-nav__link> 3.七种文件类型 </a> <nav class=md-nav aria-label=3.七种文件类型> <ul class=md-nav__list> <li class=md-nav__item> <a href=#31inode class=md-nav__link> 3.1.inode结构 </a> </li> <li class=md-nav__item> <a href=#32 class=md-nav__link> 3.2.链接类型 </a> </li> <li class=md-nav__item> <a href=#33 class=md-nav__link> 3.3.设备文件 </a> </li> <li class=md-nav__item> <a href=#34 class=md-nav__link> 3.4.练习 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#4 class=md-nav__link> 4.文件属性说明 </a> </li> <li class=md-nav__item> <a href=#5 class=md-nav__link> 5.标准输入输出 </a> </li> <li class=md-nav__item> <a href=#6 class=md-nav__link> 6.重定向和管道 </a> <nav class=md-nav aria-label=6.重定向和管道> <ul class=md-nav__list> <li class=md-nav__item> <a href=#61 class=md-nav__link> 6.1.输入重定向 </a> </li> <li class=md-nav__item> <a href=#62 class=md-nav__link> 6.2.输出重定向 </a> </li> <li class=md-nav__item> <a href=#63 class=md-nav__link> 6.3.特殊重定向 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#7 class=md-nav__link> 7.管道 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../03-identity-security/ class=md-nav__link> 第三章 身份与安全 </a> </li> <li class=md-nav__item> <a href=../04-TextTools/ class=md-nav__link> 第四章 文本编辑 </a> </li> <li class=md-nav__item> <a href=../05-RegExpress/ class=md-nav__link> 第五章 正则表达式 </a> </li> <li class=md-nav__item> <a href=../06-FileLookup/ class=md-nav__link> 第六章 文件查找 </a> </li> <li class=md-nav__item> <a href=../07-FilePacking/ class=md-nav__link> 第七章 文件打包和解包 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_3 type=checkbox id=__nav_2_3> <label class=md-nav__link for=__nav_2_3> SUSE Linux Administration <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="SUSE Linux Administration" data-md-level=2> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> SUSE Linux Administration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Administration/01/ class=md-nav__link> Linux File System Overview </a> </li> <li class=md-nav__item> <a href=../../Administration/02/ class=md-nav__link> Useful Commands </a> </li> <li class=md-nav__item> <a href=../../Administration/03/ class=md-nav__link> Shell </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_4 type=checkbox id=__nav_2_4> <label class=md-nav__link for=__nav_2_4> SUSE Enterprise Storage Foundation <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="SUSE Enterprise Storage Foundation" data-md-level=2> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> SUSE Enterprise Storage Foundation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../SES/linux_ses_memo/ class=md-nav__link> SUSE Enterprise Storage Foundation </a> </li> <li class=md-nav__item> <a href=../../SES/linux_ses_demo/ class=md-nav__link> SUSE Enterprise Storage Basic Operation </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3> Kubernetes <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Kubernetes data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Kubernetes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/ class=md-nav__link> Index </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_2 type=checkbox id=__nav_3_2> <label class=md-nav__link for=__nav_3_2> CKA Learning Memo <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="CKA Learning Memo" data-md-level=2> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> CKA Learning Memo </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_2_1 type=checkbox id=__nav_3_2_1> <label class=md-nav__link for=__nav_3_2_1> Installation <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Installation data-md-level=3> <label class=md-nav__title for=__nav_3_2_1> <span class="md-nav__icon md-icon"></span> Installation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_en/installation/single-local/ class=md-nav__link> Single Node Installation </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/installation/multiple-local/ class=md-nav__link> Multiple Nodes Installation </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/installation/aliyun-ubuntu/ class=md-nav__link> Installation on Aliyun ECS </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_2_2 type=checkbox id=__nav_3_2_2> <label class=md-nav__link for=__nav_3_2_2> Docker <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Docker data-md-level=3> <label class=md-nav__title for=__nav_3_2_2> <span class="md-nav__icon md-icon"></span> Docker </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/docker/ class=md-nav__link> Fundamentals </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_2_3 type=checkbox id=__nav_3_2_3> <label class=md-nav__link for=__nav_3_2_3> Foundamentals <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Foundamentals data-md-level=3> <label class=md-nav__title for=__nav_3_2_3> <span class="md-nav__icon md-icon"></span> Foundamentals </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/memo/ class=md-nav__link> Memo </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/basics/ class=md-nav__link> kubectl basics </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_2_4 type=checkbox id=__nav_3_2_4> <label class=md-nav__link for=__nav_3_2_4> Core Kubernetes <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Core Kubernetes" data-md-level=3> <label class=md-nav__title for=__nav_3_2_4> <span class="md-nav__icon md-icon"></span> Core Kubernetes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/pod/ class=md-nav__link> Pod </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/deployment/ class=md-nav__link> Deployment </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/service/ class=md-nav__link> Service </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_2_5 type=checkbox id=__nav_3_2_5> <label class=md-nav__link for=__nav_3_2_5> Application Modeling <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Application Modeling" data-md-level=3> <label class=md-nav__title for=__nav_3_2_5> <span class="md-nav__icon md-icon"></span> Application Modeling </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/namespace/ class=md-nav__link> Namespace </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/statefulset/ class=md-nav__link> StatefulSet </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/daemonset/ class=md-nav__link> DaemonSet </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/job/ class=md-nav__link> Job and Cronjob </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/configuration/ class=md-nav__link> Configuration </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/secrets/ class=md-nav__link> Secrets </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/persistence/ class=md-nav__link> Persistence </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/rbac/ class=md-nav__link> Role Based Access Control (RBAC) </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/ingress/ class=md-nav__link> Ingress </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_2_6 type=checkbox id=__nav_3_2_6> <label class=md-nav__link for=__nav_3_2_6> Advanced Kubernetes <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Advanced Kubernetes" data-md-level=3> <label class=md-nav__title for=__nav_3_2_6> <span class="md-nav__icon md-icon"></span> Advanced Kubernetes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/scheduling/ class=md-nav__link> Scheduling </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/hpa/ class=md-nav__link> Horizontal Pod Autoscaling </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/policy/ class=md-nav__link> Policy </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/networkpolicy/ class=md-nav__link> Network Policy </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/clustermgt/ class=md-nav__link> Cluster Management </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_2_7 type=checkbox id=__nav_3_2_7> <label class=md-nav__link for=__nav_3_2_7> Operating Kubernetes <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Operating Kubernetes" data-md-level=3> <label class=md-nav__title for=__nav_3_2_7> <span class="md-nav__icon md-icon"></span> Operating Kubernetes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/troubleshooting/ class=md-nav__link> Troubleshooting </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/healthcheck/ class=md-nav__link> Health Check </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/helming/ class=md-nav__link> Helming </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_2_8 type=checkbox id=__nav_3_2_8> <label class=md-nav__link for=__nav_3_2_8> Topics <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Topics data-md-level=3> <label class=md-nav__title for=__nav_3_2_8> <span class="md-nav__icon md-icon"></span> Topics </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/casestudy-operation-resources/ class=md-nav__link> Operations on Resources </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/casestudy-health-check/ class=md-nav__link> Health Check </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/casestudy-calico/ class=md-nav__link> Calico Installation </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/kyma/ class=md-nav__link> Kyma </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3 type=checkbox id=__nav_3_3> <label class=md-nav__link for=__nav_3_3> CKA学习笔记 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=CKA学习笔记 data-md-level=2> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> CKA学习笔记 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3_1 type=checkbox id=__nav_3_3_1> <label class=md-nav__link for=__nav_3_3_1> 安装 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=安装 data-md-level=3> <label class=md-nav__title for=__nav_3_3_1> <span class="md-nav__icon md-icon"></span> 安装 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_cn/installation/single-local/ class=md-nav__link> 单节点虚拟机安装Kubernetes </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/installation/multiple-local/ class=md-nav__link> 多节点虚拟机安装Kubernetes </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/installation/aliyun-ubuntu/ class=md-nav__link> 阿里云ECS安装Kubernetes </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3_2 type=checkbox id=__nav_3_3_2> <label class=md-nav__link for=__nav_3_3_2> Docker <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Docker data-md-level=3> <label class=md-nav__title for=__nav_3_3_2> <span class="md-nav__icon md-icon"></span> Docker </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/docker/ class=md-nav__link> Docker基础 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3_3 type=checkbox id=__nav_3_3_3> <label class=md-nav__link for=__nav_3_3_3> 基础知识 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=基础知识 data-md-level=3> <label class=md-nav__title for=__nav_3_3_3> <span class="md-nav__icon md-icon"></span> 基础知识 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/memo/ class=md-nav__link> Kubernetes随笔 </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/overview/ class=md-nav__link> Kubernetes集群概览 </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/basics/ class=md-nav__link> kubectl基础 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3_4 type=checkbox id=__nav_3_3_4> <label class=md-nav__link for=__nav_3_3_4> 核心概念 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=核心概念 data-md-level=3> <label class=md-nav__title for=__nav_3_3_4> <span class="md-nav__icon md-icon"></span> 核心概念 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/pod/ class=md-nav__link> Pod </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/deployment/ class=md-nav__link> Deployment </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/service/ class=md-nav__link> Service </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3_5 type=checkbox id=__nav_3_3_5> <label class=md-nav__link for=__nav_3_3_5> 应用体系 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=应用体系 data-md-level=3> <label class=md-nav__title for=__nav_3_3_5> <span class="md-nav__icon md-icon"></span> 应用体系 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/namespace/ class=md-nav__link> Namespace </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/statefulset/ class=md-nav__link> StatefulSet </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/daemonset/ class=md-nav__link> DaemonSet </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/job/ class=md-nav__link> Job and Cronjob </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/configuration/ class=md-nav__link> Configuration </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/secrets/ class=md-nav__link> secrets </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/persistence/ class=md-nav__link> Persistence </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/rbac/ class=md-nav__link> RBAC鉴权 </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/ingress/ class=md-nav__link> Ingress-nginx </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3_6 type=checkbox id=__nav_3_3_6> <label class=md-nav__link for=__nav_3_3_6> 进阶概念 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=进阶概念 data-md-level=3> <label class=md-nav__title for=__nav_3_3_6> <span class="md-nav__icon md-icon"></span> 进阶概念 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/scheduling/ class=md-nav__link> Scheduling </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/hpa/ class=md-nav__link> Horizontal Pod Autoscaling (HPA) </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/policy/ class=md-nav__link> Policy </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/networkpolicy/ class=md-nav__link> Network Policy </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/clustermgt/ class=md-nav__link> Cluster Management </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3_7 type=checkbox id=__nav_3_3_7> <label class=md-nav__link for=__nav_3_3_7> 日常维护 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=日常维护 data-md-level=3> <label class=md-nav__title for=__nav_3_3_7> <span class="md-nav__icon md-icon"></span> 日常维护 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/troubleshooting/ class=md-nav__link> Troubleshooting </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/healthcheck/ class=md-nav__link> 健康检查 </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/helming/ class=md-nav__link> Helm Chart </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3_8 type=checkbox id=__nav_3_3_8> <label class=md-nav__link for=__nav_3_3_8> 主题讨论 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=主题讨论 data-md-level=3> <label class=md-nav__title for=__nav_3_3_8> <span class="md-nav__icon md-icon"></span> 主题讨论 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/casestudy-operation-resources/ class=md-nav__link> Kubernetes资源常见操作 </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/casestudy-health-check/ class=md-nav__link> 健康检查 </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/casestudy-calico/ class=md-nav__link> 安装Calico </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_4 type=checkbox id=__nav_3_4> <label class=md-nav__link for=__nav_3_4> Demos <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Demos data-md-level=2> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> Demos </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/demo/cap_on_kyma/ class=md-nav__link> Build CAP Application on Kyma </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4> Python <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Python data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Python </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../python/ class=md-nav__link> Index </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_2 type=checkbox id=__nav_4_2> <label class=md-nav__link for=__nav_4_2> Python基础 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Python基础 data-md-level=2> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Python基础 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../python/Foundation/ch00/ class=md-nav__link> Python安装 </a> </li> <li class=md-nav__item> <a href=../../../python/Foundation/ch01/ class=md-nav__link> Python语言基础 </a> </li> <li class=md-nav__item> <a href=../../../python/Foundation/ch02/ class=md-nav__link> Python打包和解包 </a> </li> <li class=md-nav__item> <a href=../../../python/Foundation/ch03/ class=md-nav__link> Python内置函数及文件 </a> </li> <li class=md-nav__item> <a href=../../../python/Foundation/ch04/ class=md-nav__link> Python面向对象概念 </a> </li> <li class=md-nav__item> <a href=../../../python/Foundation/ch05/ class=md-nav__link> Python面向对象三大特性 </a> </li> <li class=md-nav__item> <a href=../../../python/Foundation/Algorithms/ class=md-nav__link> Python数据结构和算法 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3 type=checkbox id=__nav_4_3> <label class=md-nav__link for=__nav_4_3> Python数据分析基础 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Python数据分析基础 data-md-level=2> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> Python数据分析基础 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../python/DataAnalysis/ch01/ class=md-nav__link> NumPy基础 </a> </li> <li class=md-nav__item> <a href=../../../python/DataAnalysis/ch10/ class=md-nav__link> NumPy进阶 </a> </li> <li class=md-nav__item> <a href=../../../python/DataAnalysis/ch02/ class=md-nav__link> Pandas入门 </a> </li> <li class=md-nav__item> <a href=../../../python/DataAnalysis/ch03/ class=md-nav__link> 数据载入、存储及文件格式 </a> </li> <li class=md-nav__item> <a href=../../../python/DataAnalysis/ch04/ class=md-nav__link> 数据清洗与准备 </a> </li> <li class=md-nav__item> <a href=../../../python/DataAnalysis/ch05/ class=md-nav__link> 数据规整：连接、联合与重塑 </a> </li> <li class=md-nav__item> <a href=../../../python/DataAnalysis/ch06/ class=md-nav__link> 绘图与可视化 </a> </li> <li class=md-nav__item> <a href=../../../python/DataAnalysis/ch07/ class=md-nav__link> 数据聚合与分组操作 </a> </li> <li class=md-nav__item> <a href=../../../python/DataAnalysis/ch08/ class=md-nav__link> 时间序列 </a> </li> <li class=md-nav__item> <a href=../../../python/DataAnalysis/ch09/ class=md-nav__link> 高阶pandas </a> </li> <li class=md-nav__item> <a href=../../../python/DataAnalysis/ch11/ class=md-nav__link> Python建模库介绍 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_4 type=checkbox id=__nav_4_4> <label class=md-nav__link for=__nav_4_4> 数据结构和算法 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=数据结构和算法 data-md-level=2> <label class=md-nav__title for=__nav_4_4> <span class="md-nav__icon md-icon"></span> 数据结构和算法 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../python/DataStructure/01_PythonFundmantal/ class=md-nav__link> 基础知识回顾 </a> </li> <li class=md-nav__item> <a href=../../../python/DataStructure/02_CollectionsOverview/ class=md-nav__link> 多项集的概述 </a> </li> <li class=md-nav__item> <a href=../../../python/DataStructure/03_TimeComplexity/ class=md-nav__link> 搜索、排序以及复杂度分析 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5 type=checkbox id=__nav_4_5> <label class=md-nav__link for=__nav_4_5> Demos <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Demos data-md-level=2> <label class=md-nav__title for=__nav_4_5> <span class="md-nav__icon md-icon"></span> Demos </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../python/Demo/CourseSystem/ class=md-nav__link> 选课系统 </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#1 class=md-nav__link> 1.主要目录 </a> </li> <li class=md-nav__item> <a href=#2 class=md-nav__link> 2.文件操作命令 </a> <nav class=md-nav aria-label=2.文件操作命令> <ul class=md-nav__list> <li class=md-nav__item> <a href=#21 class=md-nav__link> 2.1.显示当前工作目录 </a> </li> <li class=md-nav__item> <a href=#22 class=md-nav__link> 2.2.相对和绝对路径 </a> </li> <li class=md-nav__item> <a href=#23 class=md-nav__link> 2.3.更改目录 </a> </li> <li class=md-nav__item> <a href=#24 class=md-nav__link> 2.4.列出目录内容 </a> </li> <li class=md-nav__item> <a href=#25stat class=md-nav__link> 2.5.文件状态stat </a> </li> <li class=md-nav__item> <a href=#26 class=md-nav__link> 2.6.确定文件类型 </a> </li> <li class=md-nav__item> <a href=#27 class=md-nav__link> 2.7.文件编码转换 </a> </li> <li class=md-nav__item> <a href=#28 class=md-nav__link> 2.8.通配符 </a> </li> <li class=md-nav__item> <a href=#29 class=md-nav__link> 2.9.字符集 </a> </li> <li class=md-nav__item> <a href=#210 class=md-nav__link> 2.10.特殊符号 </a> </li> <li class=md-nav__item> <a href=#211touch class=md-nav__link> 2.11.刷新文件时间touch </a> </li> <li class=md-nav__item> <a href=#212cp class=md-nav__link> 2.12.复制文件和目录cp </a> </li> <li class=md-nav__item> <a href=#213mv class=md-nav__link> 2.13.移动文件和目录mv </a> </li> <li class=md-nav__item> <a href=#214rename class=md-nav__link> 2.14.重命名文件和目录rename </a> </li> <li class=md-nav__item> <a href=#215rm class=md-nav__link> 2.15.删除文件rm </a> </li> <li class=md-nav__item> <a href=#216 class=md-nav__link> 2.16.目录操作命令 </a> </li> <li class=md-nav__item> <a href=#217 class=md-nav__link> 2.17.练习 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#3 class=md-nav__link> 3.七种文件类型 </a> <nav class=md-nav aria-label=3.七种文件类型> <ul class=md-nav__list> <li class=md-nav__item> <a href=#31inode class=md-nav__link> 3.1.inode结构 </a> </li> <li class=md-nav__item> <a href=#32 class=md-nav__link> 3.2.链接类型 </a> </li> <li class=md-nav__item> <a href=#33 class=md-nav__link> 3.3.设备文件 </a> </li> <li class=md-nav__item> <a href=#34 class=md-nav__link> 3.4.练习 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#4 class=md-nav__link> 4.文件属性说明 </a> </li> <li class=md-nav__item> <a href=#5 class=md-nav__link> 5.标准输入输出 </a> </li> <li class=md-nav__item> <a href=#6 class=md-nav__link> 6.重定向和管道 </a> <nav class=md-nav aria-label=6.重定向和管道> <ul class=md-nav__list> <li class=md-nav__item> <a href=#61 class=md-nav__link> 6.1.输入重定向 </a> </li> <li class=md-nav__item> <a href=#62 class=md-nav__link> 6.2.输出重定向 </a> </li> <li class=md-nav__item> <a href=#63 class=md-nav__link> 6.3.特殊重定向 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#7 class=md-nav__link> 7.管道 </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/huyuhui001/mySite/edit/main/docs/linux/SRE/02-filesystem.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <h1 id=_1>第二章 文件系统<a class=headerlink href=#_1 title="Permanent link"> ¶</a></h1> <p>文件系统层次标准（Filesystem Hierarchy Standard, FHS），它是Linux 标准库（Linux Standards Base, LSB）规范的一部分。</p> <p>根目录<code>/</code>指文件系统树的最高层。 根分区在系统启动时首先挂载。 系统启动时运行的所有程序都必须在此分区中。</p> <h2 id=1>1.主要目录<a class=headerlink href=#1 title="Permanent link"> ¶</a></h2> <p>以下目录必须在根分区中：</p> <ul> <li><code>/bin</code> - 用户基本程序。</li> <li>包含未挂载其他文件系统时所需的可执行文件。 例如，系统启动、处理文件和配置所需的程序。</li> <li>不能关联到独立分区，操作系统启动即会调用的程序。</li> <li><code>/bin/bash</code> - <code>bash</code>脚本处理</li> <li><code>/bin/cat</code> - 显示文件内容</li> <li><code>/bin/cp</code> - 拷贝文件</li> <li><code>/bin/dd</code> - 拷贝文件（基于字节byte）</li> <li><code>/bin/gzip</code> - 压缩文件</li> <li><code>/bin/mount</code> - 挂载文件系统</li> <li><code>/bin/rm</code> - 删除文件</li> <li><code>/bin/vi</code> - 文件编辑</li> <li><code>/sbin</code> - 系统基本程序。</li> <li>包含基本系统管理的程序。</li> <li>默认是root用户有权限执行，因此它不在常规用户路径中。</li> <li>不能关联到独立分区，操作系统启动即会调用的程序</li> <li>一些重要管理程序：<ul> <li><code>/sbin/fdisk*</code> - 管理硬盘分区</li> <li><code>/sbin/fsck*</code> - 文件系统检查。不能在运行的系统上面直接执行<code>fsck</code>，损坏根文件系统，执行前需要<code>umount</code>。</li> <li><code>/sbin/mkfs</code> - 创建文件系统</li> <li><code>/sbin/shutdown</code> - 关闭系统</li> </ul> </li> <li><code>/dev</code> - 设备文件</li> <li>以太网卡是内核模块，其他硬件都以设备dev的方式展现。</li> <li>应用程序读取和写入这些文件以操作使用硬件组件。</li> <li>两种类型设备文件：<ul> <li>字符设备（Character-oriented）– 序列设备（打印机，磁带机，鼠标等）</li> <li>块设备（Block-oriented）– 硬盘，DVD等</li> </ul> </li> <li>与设备驱动程序的连接通过内核中称为主设备号的通道实现。</li> <li>过去，这些文件是使用<code>mknod</code>命令手动创建的。 现在当内核发现设备时，它们会由<code>udev</code>自动创建。</li> <li>一些重要的设备文件：<ul> <li>Null设备: - <code>/dev/null</code></li> <li>Zero设备: - <code>/dev/zero</code></li> <li>系统终端: - <code>/dev/console</code></li> <li>虚拟终端: - <code>/dev/tty1</code></li> <li>串行端口 - <code>/dev/ttyS0</code></li> <li>并行端口: - <code>/dev/lp0</code></li> <li>软盘驱动器: - <code>/dev/fd0</code></li> <li>硬盘驱动器: - <code>/dev/sda</code></li> <li>硬盘分区: - <code>/dev/sda1</code></li> <li>CD-ROM驱动器: - <code>/dev/scd0</code></li> </ul> </li> <li><code>/etc</code> - 配置文件</li> <li>存放系统和服务的配置文件。</li> <li>大部分都是ASCII文件</li> <li>普通用户可以默认读取其中的大部分内容。 这会带来一个潜在的全问题，因为其中一些文件包含密码，因此重要的是要确保这些文件只能由root用户读取。</li> <li>根据FHS标准，此处不能放置任何可执行文件，但子目录可能包含shell脚本。</li> <li>几乎每个已安装的服务在<code>/etc</code>或其子目录中至少有一个配置文件。</li> <li>一些重要的配置文件:<ul> <li><code>/etc/os-release</code> - 系统版本信息</li> <li><code>/etc/DIR_COLORS</code> - <code>ls</code>命令中的颜色配置信息（openSUSE和Rocky）</li> <li><code>/etc/fstab</code> - 配置要挂载的文件系统</li> <li><code>/etc/profile</code> - Shell登录脚本</li> <li><code>/etc/passwd</code> - 用户信息集合（不含密码）</li> <li><code>/etc/shadow</code> - 密码和相关信息</li> <li><code>/etc/group</code> - 用户组信息集合</li> <li><code>/etc/cups/*</code> - 用于CUPS打印系统（CUPS=Common UNIX Printing System）</li> <li><code>/etc/hosts</code> - 主机名机器IP地址</li> <li><code>/etc/motd</code> - 登录后显示的欢迎信息</li> <li><code>/etc/issue</code> - 登录前显示的欢迎信息</li> <li><code>/etc/sysconfig/*</code> - 系统配置文件</li> </ul> </li> <li><code>/lib</code> - 库（Libraries）</li> <li>许多程序都具有一些通用功能。 这些通用功能可以保存在共享库中。</li> <li>共享库中文件的扩展名是<code>.so</code>。</li> <li>目录<code>/lib</code>包含的共享库文件主要是被<code>/bin</code>和<code>/sbin</code>目录包含的程序所调用。</li> <li>目录<code>/lib</code>的子目录包含一些额外需要的共享库。</li> <li>内核模块存储在目录<code>/lib/modules</code>。</li> <li><code>/lib64</code> - 64位共享库（64-Bit Libraries），类似目录<code>/lib</code>。</li> <li>这个目录因系统架构不同而不同。</li> <li>一些系统支持不同的二进制格式并保留同一个共享库的不同版本。</li> <li><code>/usr</code> - 包含应用程序、图形界面文件、库、本地程序、文档等。</li> <li><code>/usr</code> 即 Unix System Resources. 例如：</li> <li><code>/usr/X11R6/</code> - X Window 系统文件</li> <li><code>/usr/bin/</code> - 几乎包含所有可执行文件</li> <li><code>/usr/lib/</code> - 包含库和应用程序</li> <li><code>/usr/lib64/</code> - 包含64位库和应用程序</li> <li><code>/usr/include/</code> - 包含C程序的头文件（head file）</li> <li><code>/usr/local/</code> - 包含本地安装程序。这个目录下的内容不会被系统升级所覆盖。下面3个目录在初始安装后是空的。<ul> <li><code>/usr/local/bin</code>-</li> <li><code>/usr/local/sbin</code>-</li> <li><code>/usr/local/lib</code>-</li> </ul> </li> <li><code>/usr/sbin/</code> - 系统管理程序</li> <li><code>/usr/src/</code> - 内核和应用程序的源代码<ul> <li><code>/usr/src/linux</code>-</li> </ul> </li> <li><code>/usr/share/</code> - 结构化独立数据<ul> <li><code>/usr/share/doc/</code> - 文档</li> <li><code>/usr/share/man/</code> - <code>man</code>命令使用的内容</li> </ul> </li> <li><code>/opt</code> - 第三方应用程序目录</li> <li>各发行版包含的应用程序一般存储在目录<code>/usr/lib/</code>。</li> <li>各发行版可选程序，或第三方应用程序则存储在目录<code>/opt</code>。</li> <li>在安装时，会为每个应用程序的文件创建一个目录，其中包含应用程序的名称。比如：<ul> <li><code>/opt/novell</code>-</li> </ul> </li> <li><code>/boot</code> - 引导目录</li> <li><code>/boot/grub2</code> - 包含GRUB2的静态引导加载程序文件（GRUB = Grand Unified Boot Loader）。</li> <li>包含以链接 vmlinuz 和 initrd 标识的内核和 initrd 文件。</li> <li><code>/root</code> - 管理员的主目录（home directory）。</li> <li><code>root</code>用户的主目录。其他用户的主目录是在目录<code>/home</code>下。</li> <li><code>root</code>用户的登录环境配置保存至<code>/root</code>分区中。</li> <li><code>/home</code> - 用户主目录</li> <li>每个系统用户都有一个分配的文件区域，该文件区域在登录后成为当前工作目录。 默认情况下，它们存在于<code>/home</code>中。</li> <li><code>/home</code>中的文件和目录可以位于单独的分区中，也可以位于网络上的另一台计算机上。</li> <li>用户配置信息和配置文件（user profile and configuration files）主要有：<ul> <li>.profile - 用户私有登录脚本</li> <li>.bashrc - <code>bash</code>的配置文件</li> <li>.bash_history - <code>bash</code>环境下保持命令历史记录</li> </ul> </li> <li><code>run</code> - 应用程序状态文件</li> <li>为应用程序提供了一个标准位置来存储它们需要的临时文件，例如套接字和进程ID。 这些文件不能存储在<code>/tmp</code>中，因为<code>/tmp</code>中的文件可能会被删除。</li> <li><code>/run/media/&lt;user&gt;/*</code> - 可移动设备的挂载点，例如：<ul> <li><code>/run/media/media_name/</code></li> <li><code>/run/media/cdrom/</code>-</li> <li><code>/run/media/dvd/</code>-</li> <li><code>/run/media/usbdisk/</code>-</li> </ul> </li> <li><code>/mnt</code> - 文件系统临时挂载点</li> <li>用于挂载临时使用的文件系统的目录。</li> <li>文件系统使用 mount 命令挂载，使用 umount 命令删除。</li> <li>子目录默认不存在，也不会自动创建。</li> <li><code>/srv</code> - 服务数据目录</li> <li>存放各种服务的数据，比如：<ul> <li><code>/srv/www</code> - 用于存放 Apache Web Server 的数据</li> <li><code>/srv/ftp</code> - 用于存放 FTP server 的数据</li> </ul> </li> <li><code>/var</code> - 可变文件（Variable Files）</li> <li>在系统运行过程中会被修改的文件</li> <li>Important subdirectories:<ul> <li><code>/var/lib/</code> - 可变库文件，应用程序状态信息数据</li> <li><code>/var/log/</code> - 日志文件</li> <li><code>/var/run/</code> - 运行中的进程的信息</li> <li><code>/var/lock/</code> - 多用户访问时的锁文件</li> <li><code>/var/cache</code>- 应用程序缓存数据目录</li> <li><code>/var/opt</code> - 专为<code>/opt</code>下的应用程序存储可变数据</li> <li><code>/var/mail</code>-</li> <li><code>/var/spool/</code> - 应用程序数据池，比如：打印机，邮件</li> <li><code>/var/spool/mail</code>-</li> <li><code>/var/spool/cron</code>-</li> </ul> </li> <li><code>/tmp</code> - 临时文件</li> <li>程序在运行时创建临时文件的位置</li> <li><code>/proc</code> - 进程文件</li> <li>虚拟文件系统，不占空间，大小始终为零，保持当前进程的状态信息</li> <li>包含有关各个进程的信息的目录，根据进程的 PID 号命名</li> <li>有些值可以临时在线更改生效，但重启后丢失<ul> <li><code>/proc/cpuinfo/</code> - Processor information</li> <li><code>/proc/dma/</code> - Use of DMA ports</li> <li><code>/proc/interrupts/</code> - Use of interrupts</li> <li><code>/proc/ioports/</code> - Use of I/O ports</li> <li><code>/proc/filesystems/</code> - File system formats the kernel knows</li> <li><code>/proc/modules/</code> - Active modules</li> <li><code>/proc/mounts/</code> - Mounted file systems</li> <li><code>/proc/net/*</code> - Network information and statistics</li> <li><code>/proc/partitions/</code> - Existing partitions</li> <li><code>/proc/bus/pci/</code> - Connected PCI devices</li> <li><code>/proc/bus/scsi/</code> - Connected SCSI devices</li> <li><code>/proc/sys/*</code> - System and kernel information</li> <li><code>/proc/version</code> - Kernel version</li> </ul> </li> <li><code>/sys</code> - 系统信息目录</li> <li>虚拟文件系统，仅存在于内存中，文件大小为零。主要提供如下信息：<ul> <li>硬件总线（hardware buses）</li> <li>硬件设备（hardware devices）</li> <li>有源设备（active devices）</li> <li>驱动程序（drivers）</li> </ul> </li> </ul> <h2 id=2>2.文件操作命令<a class=headerlink href=#2 title="Permanent link"> ¶</a></h2> <h3 id=21>2.1.显示当前工作目录<a class=headerlink href=#21 title="Permanent link"> ¶</a></h3> <p>pwd命令（print working directory）:</p> <ul> <li>-L: 显示链接路径</li> <li>-P：显示真实物理路径</li> </ul> <h3 id=22>2.2.相对和绝对路径<a class=headerlink href=#22 title="Permanent link"> ¶</a></h3> <p>对于绝对路径<code>/etc/firewalld/policies</code>，可以通过下面命令得到该路径的基名<code>policies</code>和目录名<code>/etc/firewalld</code>。</p> <div class=highlight><pre><span></span><code>basename<span class=w> </span>/etc/firewalld/policies
dirname<span class=w> </span>/etc/firewalld/policies
</code></pre></div> <h3 id=23>2.3.更改目录<a class=headerlink href=#23 title="Permanent link"> ¶</a></h3> <p><code>.</code>指当前目录，即<code>pwd</code>命令所返回的目录。</p> <p><code>..</code>指当前目录的上一级目录，及当前目录的父目录。</p> <ul> <li> <p>切换至父目录：<code>cd ..</code></p> </li> <li> <p>切换至当前用户主目录：<code>cd ~</code></p> </li> <li> <p>切换至上次工作目录：<code>cd -</code></p> </li> <li> <p><code>echo $PWD</code>：当前工作目录</p> </li> <li> <p><code>echo $OLDPWD</code>：上次工作目录</p> </li> </ul> <h3 id=24>2.4.列出目录内容<a class=headerlink href=#24 title="Permanent link"> ¶</a></h3> <p><code>ls</code>命令：</p> <ul> <li><code>-a</code> 显示所有文件及目录 (. 开头的隐藏文件也会列出)</li> <li><code>-A</code> 同 <code>-a</code> ，但不列出 <code>.</code> (目前目录) 及 <code>..</code> (父目录)</li> <li><code>-l</code> 除文件名称外，亦将文件型态、权限、拥有者、文件大小等资讯详细列出</li> <li><code>-r</code> 将文件以相反次序显示(原定依英文字母次序)</li> <li><code>-t</code> 将文件依建立时间之先后次序列出</li> <li><code>-F</code> 在列出的文件名称后加一符号；例如可执行档则加 "*", 目录则加 "/"</li> <li><code>-R</code> 递归列出子目录</li> <li><code>-S</code> 按文件大小排序，从大到小</li> <li><code>-1</code> 按一个文件一行列出</li> <li><code>-t</code> 按文件时间排序，最新的在前</li> <li><code>-U</code> 不排序输出，按目录存放顺序列出</li> <li><code>-u</code> 配合<code>-lt</code>，按访问时间排序并显示；配合<code>-l</code>，显示访问时间并按名称排序； 否则按访问时间排序，最新的在前</li> <li><code>-X</code> 按文件扩展名字母顺序排序输出</li> <li><code>-F</code> 对不同类型文件显示时附加不同的符号，<code>* / = &gt; @ |</code>之一</li> </ul> <p><code>ls</code>命令查看不同文件是的颜色，由<code>/etc/DIR_COLORS</code>和变量<code>@LS_COLORS</code>定义。</p> <h3 id=25stat>2.5.文件状态stat<a class=headerlink href=#25stat title="Permanent link"> ¶</a></h3> <p>每个文件有三个时间戳：</p> <ul> <li>访问时间 Access Time <code>atime</code> : 读取文件内容。</li> <li>修改时间 Modify Time <code>mtime</code> : 改变文件内容（数据）。</li> <li>改变时间 Change Time <code>ctime</code> : 元数据发生改变。</li> </ul> <p>读取三个时间戳的命令<code>stat</code>：</p> <div class=highlight><pre><span></span><code>stat<span class=w> </span>/etc/fstab
</code></pre></div> <p>输出结果：</p> <div class=highlight><pre><span></span><code><span class=go>  File: /etc/fstab</span>
<span class=go>  Size: 927             Blocks: 8          IO Block: 4096   regular file</span>
<span class=go>Device: 30h/48d Inode: 263         Links: 1</span>
<span class=go>Access: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)</span>
<span class=go>Access: 2022-10-31 10:26:34.987466959 +0800</span>
<span class=go>Modify: 2022-06-24 14:50:24.387992912 +0800</span>
<span class=go>Change: 2022-06-24 14:50:24.387992912 +0800</span>
<span class=go> Birth: 2022-06-24 14:50:23.755992937 +0800</span>
</code></pre></div> <h3 id=26>2.6.确定文件类型<a class=headerlink href=#26 title="Permanent link"> ¶</a></h3> <p>命令<code>file</code>检查文件类型。</p> <ul> <li><code>-b</code>：列出辨识结果时，不显示文件名称。</li> <li><code>-c</code>：详细显示指令执行过程，便于排错或分析程序执行的情形。</li> <li><code>-f &lt;名称文件&gt;</code>：指定名称文件，其内容有一个或多个文件名称时，让file依序辨识这些文件，格式为每列一个文件名称。</li> <li><code>-L</code>： 直接显示符号连接所指向的文件的类别。</li> <li><code>-v</code>： 显示版本信息。</li> <li><code>-z</code>： 尝试去解读压缩文件的内容。</li> </ul> <p>编辑文件<code>list.txt</code>包含一下内容：</p> <div class=highlight><pre><span></span><code><span class=go>/etc/</span>
<span class=go>/bin</span>
<span class=go>/etc/issue</span>
</code></pre></div> <p>运行命令<code>file -f list.txt</code>，结果如下：</p> <div class=highlight><pre><span></span><code><span class=go>/etc/:      directory</span>
<span class=go>/bin:       directory</span>
<span class=go>/etc/issue: symbolic link to ../run/issue</span>
</code></pre></div> <h3 id=27>2.7.文件编码转换<a class=headerlink href=#27 title="Permanent link"> ¶</a></h3> <p><code>iconv</code>命令用于将一种编码中的某些文本转换为另一种编码。 如果没有提供输入文件，则它从标准输入中读取。 同样，如果没有给出输出文件，那么它会写入标准输出。 如果没有提供 <code>from-encoding</code> 或 <code>to-encoding</code>，则它使用当前本地的字符编码。</p> <p>将文本从 ISO 8859-15 字符编码转换为 UTF-8，读入<code>input.txt</code>，输出<code>output.txt</code>。</p> <div class=highlight><pre><span></span><code>iconv<span class=w> </span>-f<span class=w> </span>ISO-8859-15<span class=w> </span>-t<span class=w> </span>UTF-8<span class=w> </span>&lt;<span class=w> </span>input.txt<span class=w> </span>&gt;<span class=w> </span>output.txt
</code></pre></div> <p>从 UTF-8 转换为 ASCII，尽可能进行音译（transliterating）：</p> <div class=highlight><pre><span></span><code><span class=nb>echo</span><span class=w> </span>abc<span class=w> </span>ß<span class=w> </span>α<span class=w> </span>€<span class=w> </span>àḃç<span class=w> </span><span class=p>|</span><span class=w> </span>iconv<span class=w> </span>-f<span class=w> </span>UTF-8<span class=w> </span>-t<span class=w> </span>ASCII//TRANSLIT
</code></pre></div> <p>运行结果：</p> <div class=highlight><pre><span></span><code><span class=go>abc ss ? EUR abc</span>
</code></pre></div> <h3 id=28>2.8.通配符<a class=headerlink href=#28 title="Permanent link"> ¶</a></h3> <p>通配符，指包含这些字符的字符串</p> <ul> <li><code>?</code> ：表示任意一个字符</li> <li><code>*</code> ：表示任意长度的任意字符</li> <li><code>[]</code> ：匹配指定范围内任意一个字符</li> <li><code>[abcd]</code>：匹配abcd中的任何一个字符</li> <li><code>[a-z]</code>：匹配范围a到z内任意一个字符</li> <li><code>[!abcd]</code>：不匹配括号里面任何一个字符</li> <li><code>{}</code> ：表示生成序列，以逗号分割，不能有空格</li> </ul> <p>示例：</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>touch<span class=w> </span>file_<span class=o>{</span>a..z<span class=o>}</span>.txt
$<span class=w> </span>touch<span class=w> </span>file_<span class=o>{</span>A..Z<span class=o>}</span>.txt

$<span class=w> </span>ls
file_a.txt<span class=w>  </span>file_C.txt<span class=w>  </span>file_f.txt<span class=w>  </span>file_H.txt<span class=w>  </span>file_k.txt<span class=w>  </span>file_M.txt<span class=w>  </span>file_p.txt<span class=w>  </span>file_R.txt<span class=w>  </span>file_u.txt<span class=w>  </span>file_W.txt<span class=w>  </span>file_z.txt
file_A.txt<span class=w>  </span>file_d.txt<span class=w>  </span>file_F.txt<span class=w>  </span>file_i.txt<span class=w>  </span>file_K.txt<span class=w>  </span>file_n.txt<span class=w>  </span>file_P.txt<span class=w>  </span>file_s.txt<span class=w>  </span>file_U.txt<span class=w>  </span>file_x.txt<span class=w>  </span>file_Z.txt
file_b.txt<span class=w>  </span>file_D.txt<span class=w>  </span>file_g.txt<span class=w>  </span>file_I.txt<span class=w>  </span>file_l.txt<span class=w>  </span>file_N.txt<span class=w>  </span>file_q.txt<span class=w>  </span>file_S.txt<span class=w>  </span>file_v.txt<span class=w>  </span>file_X.txt
file_B.txt<span class=w>  </span>file_e.txt<span class=w>  </span>file_G.txt<span class=w>  </span>file_j.txt<span class=w>  </span>file_L.txt<span class=w>  </span>file_o.txt<span class=w>  </span>file_Q.txt<span class=w>  </span>file_t.txt<span class=w>  </span>file_V.txt<span class=w>  </span>file_y.txt
file_c.txt<span class=w>  </span>file_E.txt<span class=w>  </span>file_h.txt<span class=w>  </span>file_J.txt<span class=w>  </span>file_m.txt<span class=w>  </span>file_O.txt<span class=w>  </span>file_r.txt<span class=w>  </span>file_T.txt<span class=w>  </span>file_w.txt<span class=w>  </span>file_Y.txt

$<span class=w> </span>ls<span class=w> </span>file_<span class=o>[</span>a..d<span class=o>]</span>.*
file_a.txt<span class=w>  </span>file_d.txt

$<span class=w> </span>ls<span class=w> </span>file_<span class=o>[</span>a...d<span class=o>]</span>.*
file_a.txt<span class=w>  </span>file_d.txt

$<span class=w> </span>ls<span class=w> </span>file_<span class=o>[</span>ad<span class=o>]</span>.*
file_a.txt<span class=w>  </span>file_d.txt

$<span class=w> </span>ls<span class=w> </span>file_<span class=o>[</span>a-c<span class=o>]</span>.*
file_a.txt<span class=w>  </span>file_A.txt<span class=w>  </span>file_b.txt<span class=w>  </span>file_B.txt<span class=w>  </span>file_c.txt

$<span class=w> </span>ls<span class=w> </span>file_<span class=o>[</span>a-C<span class=o>]</span>.*
file_a.txt<span class=w>  </span>file_A.txt<span class=w>  </span>file_b.txt<span class=w>  </span>file_B.txt<span class=w>  </span>file_c.txt<span class=w>  </span>file_C.txt

$<span class=w> </span>ls<span class=w> </span>file_<span class=o>[</span>!d-W<span class=o>]</span>.*
file_a.txt<span class=w>  </span>file_b.txt<span class=w>  </span>file_c.txt<span class=w>  </span>file_x.txt<span class=w>  </span>file_y.txt<span class=w>  </span>file_z.txt
file_A.txt<span class=w>  </span>file_B.txt<span class=w>  </span>file_C.txt<span class=w>  </span>file_X.txt<span class=w>  </span>file_Y.txt<span class=w>  </span>file_Z.txt
</code></pre></div> <p>比较有无<code>*</code>的区别：</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>ls<span class=w> </span>-a<span class=w> </span>*
file_a.txt<span class=w>  </span>file_D.txt<span class=w>  </span>file_h.txt<span class=w>  </span>file_K.txt<span class=w>  </span>file_o.txt<span class=w>  </span>file_R.txt<span class=w>  </span>file_v.txt<span class=w>  </span>file_Y.txt
file_A.txt<span class=w>  </span>file_e.txt<span class=w>  </span>file_H.txt<span class=w>  </span>file_l.txt<span class=w>  </span>file_O.txt<span class=w>  </span>file_s.txt<span class=w>  </span>file_V.txt<span class=w>  </span>file_z.txt
file_b.txt<span class=w>  </span>file_E.txt<span class=w>  </span>file_i.txt<span class=w>  </span>file_L.txt<span class=w>  </span>file_p.txt<span class=w>  </span>file_S.txt<span class=w>  </span>file_w.txt<span class=w>  </span>file_Z.txt
file_B.txt<span class=w>  </span>file_f.txt<span class=w>  </span>file_I.txt<span class=w>  </span>file_m.txt<span class=w>  </span>file_P.txt<span class=w>  </span>file_t.txt<span class=w>  </span>file_W.txt
file_c.txt<span class=w>  </span>file_F.txt<span class=w>  </span>file_j.txt<span class=w>  </span>file_M.txt<span class=w>  </span>file_q.txt<span class=w>  </span>file_T.txt<span class=w>  </span>file_x.txt
file_C.txt<span class=w>  </span>file_g.txt<span class=w>  </span>file_J.txt<span class=w>  </span>file_n.txt<span class=w>  </span>file_Q.txt<span class=w>  </span>file_u.txt<span class=w>  </span>file_X.txt
file_d.txt<span class=w>  </span>file_G.txt<span class=w>  </span>file_k.txt<span class=w>  </span>file_N.txt<span class=w>  </span>file_r.txt<span class=w>  </span>file_U.txt<span class=w>  </span>file_y.txt

$<span class=w> </span>ls<span class=w> </span>-a
.<span class=w>           </span>file_C.txt<span class=w>  </span>file_g.txt<span class=w>  </span>file_J.txt<span class=w>  </span>file_n.txt<span class=w>  </span>file_Q.txt<span class=w>  </span>file_u.txt<span class=w>  </span>file_X.txt
..<span class=w>          </span>file_d.txt<span class=w>  </span>file_G.txt<span class=w>  </span>file_k.txt<span class=w>  </span>file_N.txt<span class=w>  </span>file_r.txt<span class=w>  </span>file_U.txt<span class=w>  </span>file_y.txt
file_a.txt<span class=w>  </span>file_D.txt<span class=w>  </span>file_h.txt<span class=w>  </span>file_K.txt<span class=w>  </span>file_o.txt<span class=w>  </span>file_R.txt<span class=w>  </span>file_v.txt<span class=w>  </span>file_Y.txt
file_A.txt<span class=w>  </span>file_e.txt<span class=w>  </span>file_H.txt<span class=w>  </span>file_l.txt<span class=w>  </span>file_O.txt<span class=w>  </span>file_s.txt<span class=w>  </span>file_V.txt<span class=w>  </span>file_z.txt
file_b.txt<span class=w>  </span>file_E.txt<span class=w>  </span>file_i.txt<span class=w>  </span>file_L.txt<span class=w>  </span>file_p.txt<span class=w>  </span>file_S.txt<span class=w>  </span>file_w.txt<span class=w>  </span>file_Z.txt
file_B.txt<span class=w>  </span>file_f.txt<span class=w>  </span>file_I.txt<span class=w>  </span>file_m.txt<span class=w>  </span>file_P.txt<span class=w>  </span>file_t.txt<span class=w>  </span>file_W.txt
file_c.txt<span class=w>  </span>file_F.txt<span class=w>  </span>file_j.txt<span class=w>  </span>file_M.txt<span class=w>  </span>file_q.txt<span class=w>  </span>file_T.txt<span class=w>  </span>file_x.txt
</code></pre></div> <h3 id=29>2.9.字符集<a class=headerlink href=#29 title="Permanent link"> ¶</a></h3> <ul> <li><code>[:alpha:]</code>：表示所有的字母（不区分大小写），效果同<code>[a-z]</code></li> <li><code>[:digit:]</code>：表示任意单个数字，效果同<code>[0-9]</code></li> <li><code>[:xdigit:]</code>：表示十六进制数字</li> <li><code>[:lower:]</code>：表示任意单个小写字母</li> <li><code>[:upper:]</code>：表示任意单个大写字母</li> <li><code>[:alnum:]</code>：表示任意单个字母或数字</li> <li><code>[:blank:]</code>：表示空白字符（空格和制表符）</li> <li><code>[:space:]</code>：表示包括空格、制表符（水平和垂直）、换行符、回车符等各种类型的空白，比<code>[:blank:]</code>范围更广</li> <li><code>[:cntrl:]</code>：表示不可打印的控制字符（退格、删除、警铃等）</li> <li><code>[:graph:]</code>：表示可打印的非空白字符</li> <li><code>[:print:]</code>：表示可打印字符</li> <li><code>[:punct:]</code>：表示标点符号</li> </ul> <p>举例：</p> <ul> <li><code>ls -d [[:alpha:]]</code>即<code>ls -d [a-Z]</code>：显示当前目录下所有单个字母的目录和文件</li> <li><code>ls -d *[[:digit:]]</code>即<code>ls -d *[0-9]</code>：显示当前目录下所有以数字结尾的目录和文件</li> <li><code>ls [[:lower:]].txt</code>：显示当前目录下所有以单个小写字母为名的.txt格式的文件</li> <li><code>ls -d [[:alnum:]]</code>：显示当前目录下所有单个字母（不区分大小写）或数字为名的目录或文件</li> </ul> <h3 id=210>2.10.特殊符号<a class=headerlink href=#210 title="Permanent link"> ¶</a></h3> <ul> <li><code>|</code> ：管道符，或者（正则）</li> <li><code>&gt;</code> ：输出重定向</li> <li><code>&gt;&gt;</code> ：输出追加重定向</li> <li><code>&lt;</code> ：输入重定向</li> <li><code>&lt;&lt;</code> ：追加输入重定向</li> <li><code>~</code> ：当前用户家目录</li> <li><code>$()</code> ：引用命令被执行后的结果</li> <li><code>$</code> ：以...结尾（正则）</li> <li><code>^</code> ：以...开头（正则）</li> <li><code>*</code> ：匹配全部字符，通配符</li> <li><code>?</code> ：任意一个字符，通配符</li> <li><code>#</code> ：注释</li> <li><code>&amp;</code> ：让程序或脚本切换到后台执行</li> <li><code>&amp;&amp;</code> ：并且，同时成立</li> <li><code>[]</code> ：表示一个范围（正则，通配符）</li> <li><code>{}</code> ：产生一个序列（通配符）</li> <li><code>.</code> ：当前目录的硬链接</li> <li><code>..</code> ：上级目录的硬链接</li> </ul> <h3 id=211touch>2.11.刷新文件时间<code>touch</code><a class=headerlink href=#211touch title="Permanent link"> ¶</a></h3> <p><code>touch</code>命令可以创建空文件，也可以刷新文件时间。参数如下：</p> <ul> <li><code>-a</code>：仅改变<code>atime</code>和<code>ctime</code></li> <li><code>-m</code>：仅改变<code>mtime</code>和<code>ctime</code></li> <li><code>-t [[CC]YY]MMDDhhmm[.ss]</code>：指定<code>atime</code>和<code>mtime</code></li> <li><code>-c</code>：如果文件不存在，则不创建</li> </ul> <div class=highlight><pre><span></span><code>$<span class=w> </span>touch<span class=w> </span>file1
$<span class=w> </span>touch<span class=w> </span>file2

$<span class=w> </span>ll
-rw-r--r--.<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w> </span><span class=m>5</span><span class=w> </span>Nov<span class=w>  </span><span class=m>8</span><span class=w> </span><span class=m>20</span>:49<span class=w> </span>file1
-rw-r--r--.<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w> </span><span class=m>0</span><span class=w> </span>Nov<span class=w>  </span><span class=m>8</span><span class=w> </span><span class=m>20</span>:28<span class=w> </span>file2
</code></pre></div> <p>创建文件file-non.log，如果不存在则不创建。</p> <div class=highlight><pre><span></span><code>touch<span class=w> </span>-c<span class=w> </span>file-non.log
</code></pre></div> <p>更新<code>file1</code>的时间和<code>file2</code>一致。</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>touch<span class=w> </span>-r<span class=w> </span>file1<span class=w> </span>file2

$<span class=w> </span>ll
-rw-r--r--.<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w> </span><span class=m>5</span><span class=w> </span>Nov<span class=w>  </span><span class=m>8</span><span class=w> </span><span class=m>20</span>:49<span class=w> </span>file1
-rw-r--r--.<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w> </span><span class=m>0</span><span class=w> </span>Nov<span class=w>  </span><span class=m>8</span><span class=w> </span><span class=m>20</span>:49<span class=w> </span>file2
</code></pre></div> <p>指定<code>file2</code>的时间。<code>202210012135.25</code>代表<code>YYYYMMDDHHMM.SS</code>。</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>touch<span class=w> </span>-t<span class=w> </span><span class=m>202210012135</span>.25<span class=w> </span>file2

$<span class=w> </span>ll
-rw-r--r--.<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w> </span><span class=m>5</span><span class=w> </span>Nov<span class=w>  </span><span class=m>8</span><span class=w> </span><span class=m>20</span>:49<span class=w> </span>file1
-rw-r--r--.<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w> </span><span class=m>0</span><span class=w> </span>Oct<span class=w>  </span><span class=m>1</span><span class=w> </span><span class=m>21</span>:35<span class=w> </span>file2

$<span class=w> </span>stat<span class=w> </span>file2
<span class=w>  </span>File:<span class=w> </span>file2
<span class=w>  </span>Size:<span class=w> </span><span class=m>0</span><span class=w>               </span>Blocks:<span class=w> </span><span class=m>0</span><span class=w>          </span>IO<span class=w> </span>Block:<span class=w> </span><span class=m>4096</span><span class=w>   </span>regular<span class=w> </span>empty<span class=w> </span>file
Device:<span class=w> </span>fd02h/64770d<span class=w>    </span>Inode:<span class=w> </span><span class=m>140</span><span class=w>         </span>Links:<span class=w> </span><span class=m>1</span>
Access:<span class=w> </span><span class=o>(</span><span class=m>0644</span>/-rw-r--r--<span class=o>)</span><span class=w>  </span>Uid:<span class=w> </span><span class=o>(</span><span class=w> </span><span class=m>1000</span>/<span class=w> </span>vagrant<span class=o>)</span><span class=w>   </span>Gid:<span class=w> </span><span class=o>(</span><span class=w>   </span><span class=m>10</span>/<span class=w>   </span>wheel<span class=o>)</span>
Context:<span class=w> </span>unconfined_u:object_r:user_home_t:s0
Access:<span class=w> </span><span class=m>2022</span>-10-01<span class=w> </span><span class=m>21</span>:35:25.000000000<span class=w> </span>+0800
Modify:<span class=w> </span><span class=m>2022</span>-10-01<span class=w> </span><span class=m>21</span>:35:25.000000000<span class=w> </span>+0800
Change:<span class=w> </span><span class=m>2022</span>-11-08<span class=w> </span><span class=m>20</span>:56:18.306315887<span class=w> </span>+0800
<span class=w> </span>Birth:<span class=w> </span><span class=m>2022</span>-11-08<span class=w> </span><span class=m>20</span>:28:37.809551441<span class=w> </span>+0800
</code></pre></div> <h3 id=212cp>2.12.复制文件和目录<code>cp</code><a class=headerlink href=#212cp title="Permanent link"> ¶</a></h3> <p><code>cp</code>命令：Copy SOURCE to DEST, or multiple SOURCE(s) to DIRECTORY.</p> <p>常用参数：</p> <ul> <li><code>-a</code>：归档，相当于<code>-dR --preserv=all</code>参数组合，常用于备份。</li> <li><code>-d</code>：不复制原文件，只复制链接名。相当于<code>--no-dereference --preserve=links</code>参数组合。</li> <li><code>-f</code>：覆盖已经存在的目标文件。</li> <li><code>-i</code>：覆盖目标文件之前给出提示。</li> <li><code>-p</code>：除复制文件的内容外，也复制文件权限，时间戳，属主属组。相当于<code>--preserve=mode,ownership,timestamps</code>。</li> <li><code>-r, -R, --recursive</code>：递归复制目录所包含的全部内容。</li> <li><code>-l</code>：不复制文件，只是生成硬链接文件。</li> </ul> <p>参数<code>--preserv</code>可选项：</p> <ul> <li>mode：权限</li> <li>ownership：属主属组</li> <li>timestamp</li> <li>links</li> <li>xattr</li> <li>context</li> <li>all</li> </ul> <p>创建测试目录。</p> <div class=highlight><pre><span></span><code><span class=nb>cd</span><span class=w> </span>~
mkdir<span class=w> </span><span class=nb>test</span>
</code></pre></div> <p>对比参数<code>-p</code>的差别。</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>cp<span class=w> </span>/etc/issue<span class=w> </span>~/test/issue1
$<span class=w> </span>cp<span class=w> </span>-p<span class=w> </span>/etc/issue<span class=w> </span>~/test/issue1
$<span class=w> </span>sudo<span class=w> </span>cp<span class=w> </span>/etc/issue<span class=w> </span>~/test/issue3
$<span class=w> </span>sudo<span class=w> </span>cp<span class=w> </span>-p<span class=w> </span>/etc/issue<span class=w> </span>~/test/issue4

$<span class=w> </span>ll<span class=w> </span>~/test
-rw-r--r--.<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w> </span><span class=m>23</span><span class=w> </span>Nov<span class=w>  </span><span class=m>8</span><span class=w> </span><span class=m>22</span>:25<span class=w> </span>issue1
-rw-r--r--.<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w> </span><span class=m>23</span><span class=w> </span>Jul<span class=w> </span><span class=m>21</span><span class=w> </span><span class=m>01</span>:10<span class=w> </span>issue2
-rw-r--r--.<span class=w> </span><span class=m>1</span><span class=w> </span>root<span class=w>    </span>root<span class=w>  </span><span class=m>23</span><span class=w> </span>Nov<span class=w>  </span><span class=m>8</span><span class=w> </span><span class=m>22</span>:43<span class=w> </span>issue3
-rw-r--r--.<span class=w> </span><span class=m>1</span><span class=w> </span>root<span class=w>    </span>root<span class=w>  </span><span class=m>23</span><span class=w> </span>Jul<span class=w> </span><span class=m>21</span><span class=w> </span><span class=m>01</span>:10<span class=w> </span>issue4

$<span class=w> </span>ll<span class=w> </span>/etc/issue
-rw-r--r--.<span class=w> </span><span class=m>1</span><span class=w> </span>root<span class=w> </span>root<span class=w> </span><span class=m>23</span><span class=w> </span>Jul<span class=w> </span><span class=m>21</span><span class=w> </span><span class=m>01</span>:10<span class=w> </span>/etc/issue
</code></pre></div> <p>对比参数<code>-r</code>。</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>sudo<span class=w> </span>cp<span class=w> </span>/etc/sysconfig/<span class=w> </span>~/test
cp:<span class=w> </span>-r<span class=w> </span>not<span class=w> </span>specified<span class=p>;</span><span class=w> </span>omitting<span class=w> </span>directory<span class=w> </span><span class=s1>&#39;/etc/sysconfig/&#39;</span>

$<span class=w> </span>sudo<span class=w> </span>cp<span class=w> </span>-r<span class=w> </span>/etc/sysconfig/<span class=w> </span>~/test

$<span class=w> </span>tree<span class=w> </span>-L<span class=w> </span><span class=m>2</span><span class=w> </span>~/test
/home/vagrant/test
├──<span class=w> </span>issue1
├──<span class=w> </span>issue2
├──<span class=w> </span>issue3
├──<span class=w> </span>issue4
└──<span class=w> </span>sysconfig
<span class=w>    </span>├──<span class=w> </span>anaconda
<span class=w>    </span>├──<span class=w> </span>atd
<span class=w>    </span>├──<span class=w> </span>chronyd
<span class=w>    </span>├──<span class=w> </span>cpupower
<span class=w>    </span>├──<span class=w> </span>crond
<span class=w>    </span>├──<span class=w> </span>firewalld
<span class=w>    </span>├──<span class=w> </span>irqbalance
<span class=w>    </span>├──<span class=w> </span>kdump
<span class=w>    </span>├──<span class=w> </span>kernel
<span class=w>    </span>├──<span class=w> </span>man-db
<span class=w>    </span>├──<span class=w> </span>network
<span class=w>    </span>├──<span class=w> </span>network-scripts
<span class=w>    </span>├──<span class=w> </span>nftables.conf
<span class=w>    </span>├──<span class=w> </span>raid-check
<span class=w>    </span>├──<span class=w> </span>rsyslog
<span class=w>    </span>├──<span class=w> </span>run-parts
<span class=w>    </span>├──<span class=w> </span>samba
<span class=w>    </span>├──<span class=w> </span>selinux<span class=w> </span>-&gt;<span class=w> </span>../selinux/config
<span class=w>    </span>├──<span class=w> </span>smartmontools
<span class=w>    </span>└──<span class=w> </span>sshd
</code></pre></div> <p>参数<code>-b</code>，如果目标文件存在，复制前先将原文件复制并以<code>~</code>结尾。</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>ll<span class=w> </span>/etc/motd
-rw-r--r--.<span class=w> </span><span class=m>1</span><span class=w> </span>root<span class=w> </span>root<span class=w> </span><span class=m>0</span><span class=w> </span>Jun<span class=w> </span><span class=m>23</span><span class=w>  </span><span class=m>2020</span><span class=w> </span>/etc/motd

$<span class=w> </span>ll<span class=w> </span>~/test/issue1
-rw-r--r--.<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w> </span><span class=m>23</span><span class=w> </span>Nov<span class=w>  </span><span class=m>8</span><span class=w> </span><span class=m>22</span>:25<span class=w> </span>/home/vagrant/test/issue1

$<span class=w> </span>cp<span class=w> </span>-b<span class=w> </span>/etc/motd<span class=w> </span>~/test/issue
$<span class=w> </span>cp<span class=w> </span>-b<span class=w> </span>/etc/motd<span class=w> </span>~/test/issue1<span class=w> </span>

$<span class=w> </span>ll<span class=w> </span>~/test
-rw-r--r--.<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w>    </span><span class=m>0</span><span class=w> </span>Nov<span class=w>  </span><span class=m>8</span><span class=w> </span><span class=m>23</span>:00<span class=w> </span>issue
-rw-r--r--.<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w>    </span><span class=m>0</span><span class=w> </span>Nov<span class=w>  </span><span class=m>8</span><span class=w> </span><span class=m>22</span>:57<span class=w> </span>issue1
-rw-r--r--.<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w>   </span><span class=m>23</span><span class=w> </span>Nov<span class=w>  </span><span class=m>8</span><span class=w> </span><span class=m>22</span>:25<span class=w> </span>issue1~
-rw-r--r--.<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w>   </span><span class=m>23</span><span class=w> </span>Jul<span class=w> </span><span class=m>21</span><span class=w> </span><span class=m>01</span>:10<span class=w> </span>issue2
-rw-r--r--.<span class=w> </span><span class=m>1</span><span class=w> </span>root<span class=w>    </span>root<span class=w>    </span><span class=m>23</span><span class=w> </span>Nov<span class=w>  </span><span class=m>8</span><span class=w> </span><span class=m>22</span>:43<span class=w> </span>issue3
-rw-r--r--.<span class=w> </span><span class=m>1</span><span class=w> </span>root<span class=w>    </span>root<span class=w>    </span><span class=m>23</span><span class=w> </span>Jul<span class=w> </span><span class=m>21</span><span class=w> </span><span class=m>01</span>:10<span class=w> </span>issue4
drwxr-xr-x.<span class=w> </span><span class=m>3</span><span class=w> </span>root<span class=w>    </span>root<span class=w>  </span><span class=m>4096</span><span class=w> </span>Nov<span class=w>  </span><span class=m>8</span><span class=w> </span><span class=m>22</span>:49<span class=w> </span>sysconfig
</code></pre></div> <p>参数<code>--backup=numbered</code>会在复制原文件时加上数字序号，序号1代表原始的文件。</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>cp<span class=w> </span>--backup<span class=o>=</span>numbered<span class=w> </span>/etc/motd<span class=w> </span>~/test/issue2
$<span class=w> </span>cp<span class=w> </span>--backup<span class=o>=</span>numbered<span class=w> </span>/etc/motd<span class=w> </span>~/test/issue2
$<span class=w> </span>cp<span class=w> </span>--backup<span class=o>=</span>numbered<span class=w> </span>/etc/motd<span class=w> </span>~/test/issue2

$<span class=w> </span>ll<span class=w> </span>~/test
-rw-r--r--.<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w>    </span><span class=m>0</span><span class=w> </span>Nov<span class=w>  </span><span class=m>8</span><span class=w> </span><span class=m>23</span>:00<span class=w> </span>issue
-rw-r--r--.<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w>    </span><span class=m>0</span><span class=w> </span>Nov<span class=w>  </span><span class=m>8</span><span class=w> </span><span class=m>22</span>:57<span class=w> </span>issue1
-rw-r--r--.<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w>   </span><span class=m>23</span><span class=w> </span>Nov<span class=w>  </span><span class=m>8</span><span class=w> </span><span class=m>22</span>:25<span class=w> </span>issue1~
-rw-r--r--.<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w>    </span><span class=m>0</span><span class=w> </span>Nov<span class=w>  </span><span class=m>8</span><span class=w> </span><span class=m>23</span>:09<span class=w> </span>issue2
-rw-r--r--.<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w>   </span><span class=m>23</span><span class=w> </span>Jul<span class=w> </span><span class=m>21</span><span class=w> </span><span class=m>01</span>:10<span class=w> </span>issue2.~1~
-rw-r--r--.<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w>    </span><span class=m>0</span><span class=w> </span>Nov<span class=w>  </span><span class=m>8</span><span class=w> </span><span class=m>23</span>:09<span class=w> </span>issue2.~2~
-rw-r--r--.<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w>    </span><span class=m>0</span><span class=w> </span>Nov<span class=w>  </span><span class=m>8</span><span class=w> </span><span class=m>23</span>:09<span class=w> </span>issue2.~3~
-rw-r--r--.<span class=w> </span><span class=m>1</span><span class=w> </span>root<span class=w>    </span>root<span class=w>    </span><span class=m>23</span><span class=w> </span>Nov<span class=w>  </span><span class=m>8</span><span class=w> </span><span class=m>22</span>:43<span class=w> </span>issue3
-rw-r--r--.<span class=w> </span><span class=m>1</span><span class=w> </span>root<span class=w>    </span>root<span class=w>    </span><span class=m>23</span><span class=w> </span>Jul<span class=w> </span><span class=m>21</span><span class=w> </span><span class=m>01</span>:10<span class=w> </span>issue4
drwxr-xr-x.<span class=w> </span><span class=m>3</span><span class=w> </span>root<span class=w>    </span>root<span class=w>  </span><span class=m>4096</span><span class=w> </span>Nov<span class=w>  </span><span class=m>8</span><span class=w> </span><span class=m>22</span>:49<span class=w> </span>sysconfig
</code></pre></div> <h3 id=213mv>2.13.移动文件和目录<code>mv</code><a class=headerlink href=#213mv title="Permanent link"> ¶</a></h3> <p><code>mv</code>命令。Rename SOURCE to DEST, or move SOURCE(s) to DIRECTORY.</p> <p>常用参数：</p> <ul> <li><code>-v</code>：显示命令执行的信息。</li> <li><code>-i</code>：交互式，比如，重名覆盖时会提升是否确认。</li> <li><code>-b</code>：覆盖时创建备份。默认情况下，移动文件将会覆盖已存在的目标文件。</li> </ul> <p>移动多个文件到某个目录。</p> <div class=highlight><pre><span></span><code>mv<span class=w> </span>file1<span class=w> </span>file2<span class=w> </span>file3<span class=w> </span>~/dest
mv<span class=w> </span>file*<span class=w> </span>~/dest
</code></pre></div> <p>移动目录。</p> <div class=highlight><pre><span></span><code>mv<span class=w> </span>~/test<span class=w> </span>~/dest/new/one/
</code></pre></div> <p>重命名文件和目录。</p> <div class=highlight><pre><span></span><code>mv<span class=w> </span>file1<span class=w> </span>file2
mv<span class=w> </span>~/test<span class=w> </span>~/dest
</code></pre></div> <h3 id=214rename>2.14.重命名文件和目录<code>rename</code><a class=headerlink href=#214rename title="Permanent link"> ¶</a></h3> <p><code>rename</code>命令。分为perl版本和C语言版本。 区分方法: <code>rename --version</code>。如果返回结果中包含 <code>util-linux</code>，说明是C语言版本, 反之是Perl版本。 openSUSE和Rocy是C语言版本，Ubuntu是Perl版本。</p> <p>举例：修改当前目录所有扩展名为<code>s</code>的文件改为扩展名为<code>gz</code>。</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>touch<span class=w> </span>file<span class=o>{</span><span class=m>1</span>..3<span class=o>}</span>.s

$<span class=w> </span>rename<span class=w> </span>-v<span class=w> </span><span class=s1>&#39;.s&#39;</span><span class=w> </span><span class=s1>&#39;.gz&#39;</span><span class=w> </span>*.s
$<span class=w> </span>rename<span class=w> </span>-v<span class=w> </span><span class=s2>&quot;.s&quot;</span><span class=w> </span><span class=s2>&quot;.gz&quot;</span><span class=w> </span>*.s
<span class=sb>`</span>file1.txt<span class=s1>&#39; -&gt; `file1.html&#39;</span>
<span class=sb>`</span>file2.txt<span class=s1>&#39; -&gt; `file2.html&#39;</span>
<span class=sb>`</span>file3.txt<span class=s1>&#39; -&gt; `file3.html&#39;</span>
</code></pre></div> <p>在Ubuntu上完成同样任务，则需要使用正则。</p> <div class=highlight><pre><span></span><code>rename<span class=w> </span>-v<span class=w> </span><span class=s2>&quot;s/s/gz/g&quot;</span><span class=w> </span>*.s
</code></pre></div> <h3 id=215rm>2.15.删除文件<code>rm</code><a class=headerlink href=#215rm title="Permanent link"> ¶</a></h3> <p><code>rm</code>命令。建议使用<code>mv</code>命令代替<code>rm</code>命令。</p> <h3 id=216>2.16.目录操作命令<a class=headerlink href=#216 title="Permanent link"> ¶</a></h3> <p>创建目录：<code>mkdir</code></p> <p>删除空目录：<code>rmdir</code></p> <p>删除非空目录：<code>rm -r</code></p> <p>显示目录树：<code>tree</code></p> <h3 id=217>2.17.练习<a class=headerlink href=#217 title="Permanent link"> ¶</a></h3> <ul> <li>显示<code>/etc</code>目录下所有以<code>l</code>开头，以一个小写字母结尾，且中间出现至少一位数字的文件或目录列表。</li> </ul> <div class=highlight><pre><span></span><code>ls<span class=w> </span>-d<span class=w> </span>/etc/l*<span class=o>[</span><span class=m>0</span>-9<span class=o>]</span>*<span class=o>[</span>a-z<span class=o>]</span>
ls<span class=w> </span>-d<span class=w> </span>/etc/l*<span class=o>[[</span>:digit:<span class=o>]]</span>*<span class=o>[[</span>:lower:<span class=o>]]</span>
</code></pre></div> <p>如果无符合条件的记录返回，可以手工创建一个符合条件的文件和目录。</p> <div class=highlight><pre><span></span><code>sudo<span class=w> </span>touch<span class=w> </span>/etc/lam4you
sudo<span class=w> </span>mkdir<span class=w> </span>/etc/lam5you
</code></pre></div> <p>验证后删除。</p> <div class=highlight><pre><span></span><code>sudo<span class=w> </span>rm<span class=w> </span>/etc/lam4you
sudo<span class=w> </span>rm<span class=w> </span>-rf<span class=w> </span>/etc/lam5you
</code></pre></div> <ul> <li>显示<code>/etc</code>目录下以任意一位数字开头，且以非数字结尾的文件或目录列表。</li> </ul> <div class=highlight><pre><span></span><code>ls<span class=w> </span>/etc/<span class=o>[</span><span class=m>0</span>-9<span class=o>]</span>*<span class=o>[</span>!0-9<span class=o>]</span>
ls<span class=w> </span>/etc/<span class=o>[[</span>:digit:<span class=o>]]</span>*<span class=o>[</span>^<span class=o>[</span>:digit:<span class=o>]]</span>
</code></pre></div> <p>如果无符合条件的记录返回，可以手工创建一个符合条件的文件和目录。</p> <div class=highlight><pre><span></span><code>sudo<span class=w> </span>touch<span class=w> </span>/etc/5am4yo.
sudo<span class=w> </span>mkdir<span class=w> </span>/etc/5am5yo.
</code></pre></div> <p>验证后删除。</p> <div class=highlight><pre><span></span><code>sudo<span class=w> </span>rm<span class=w> </span>/etc/5am4yo.
sudo<span class=w> </span>rm<span class=w> </span>-rf<span class=w> </span>/etc/5am5yo.
</code></pre></div> <ul> <li>显示<code>/etc</code>目录下以非字母开头，后面跟了一个字母及其它任意长度任意字符的文件或目录列表。</li> </ul> <div class=highlight><pre><span></span><code>ls<span class=w> </span>/etc/<span class=o>[</span>!a-zA-Z<span class=o>][</span>a-zA-Z<span class=o>]</span>*
ls<span class=w> </span>/etc/<span class=o>[</span>^<span class=o>[</span>:alpha:<span class=o>]][[</span>:alpha:<span class=o>]]</span>*
</code></pre></div> <p>如果无符合条件的记录返回，可以手工创建一个符合条件的文件和目录。</p> <div class=highlight><pre><span></span><code>sudo<span class=w> </span>touch<span class=w> </span>/etc/5Ato3
sudo<span class=w> </span>mkdir<span class=w> </span>/etc/6dog6
</code></pre></div> <p>验证后删除。</p> <div class=highlight><pre><span></span><code>sudo<span class=w> </span>rm<span class=w> </span>/etc/5Ato3
sudo<span class=w> </span>rm<span class=w> </span>-rf<span class=w> </span>/etc/6dog6
</code></pre></div> <ul> <li>显示<code>/etc</code>目录下，所有以<code>rc</code>开头，并后面是0-6之间的数字，其它为任意字符的文件或目录列表。</li> </ul> <div class=highlight><pre><span></span><code>ls<span class=w> </span>/etc/rc<span class=o>[</span><span class=m>0</span>-6<span class=o>]</span>*
</code></pre></div> <p>如果无符合条件的记录返回，可以手工创建一个符合条件的文件和目录。</p> <div class=highlight><pre><span></span><code>sudo<span class=w> </span>touch<span class=w> </span>/etc/rc5come
sudo<span class=w> </span>mkdir<span class=w> </span>/etc/rc0123
</code></pre></div> <p>验证后删除。</p> <div class=highlight><pre><span></span><code>sudo<span class=w> </span>rm<span class=w> </span>/etc/rc5come
sudo<span class=w> </span>rm<span class=w> </span>-rf<span class=w> </span>/etc/rc0123
</code></pre></div> <ul> <li>显示<code>/etc</code>目录下，所有以<code>.conf</code>结尾，且以<code>m</code>、<code>n</code>、<code>r</code>、<code>p</code>开头的文件或目录列表。</li> </ul> <div class=highlight><pre><span></span><code>ls<span class=w> </span>/etc/<span class=o>[</span>mnrp<span class=o>]</span>*.conf
</code></pre></div> <ul> <li>只显示<code>/root</code>下的隐藏文件和目录列表。</li> </ul> <div class=highlight><pre><span></span><code>ls<span class=w> </span>.*
</code></pre></div> <ul> <li>只显示/etc下非隐藏目录列表。</li> </ul> <div class=highlight><pre><span></span><code>ls<span class=w> </span>/etc/<span class=o>[</span>^.<span class=o>]</span>*/
</code></pre></div> <ul> <li>将<code>/etc</code>目录下所有文件，备份到<code>~/test/</code>目录下，并要求子目录格式为<code>backupYYYY-mm-dd</code>，备份过程可见。</li> </ul> <div class=highlight><pre><span></span><code>sudo<span class=w> </span>cp<span class=w> </span>-av<span class=w> </span>/etc/<span class=w> </span>~/test/backup<span class=sb>`</span>date<span class=w> </span>+%F<span class=sb>`</span>
sudo<span class=w> </span>cp<span class=w> </span>-av<span class=w> </span>/etc/<span class=w> </span>~/test/backup<span class=sb>`</span>date<span class=w> </span>+%F_%H-%M-%S<span class=sb>`</span>
</code></pre></div> <ul> <li>创建目录<code>~/testdir/dir1/x</code>，<code>~/testdir/dir1/y</code>，<code>~/testdir/dir1/x/a</code>，<code>~/testdir/dir1/x/b</code>，<code>~/testdir/dir1/y/a</code>，<code>~/testdir/dir1/y/b</code>。</li> </ul> <div class=highlight><pre><span></span><code>$<span class=w> </span>mkdir<span class=w> </span>-p<span class=w> </span>~/testdir/dir1/<span class=o>{</span>x,y<span class=o>}</span>/<span class=o>{</span>a,b<span class=o>}</span>

$<span class=w> </span>tree<span class=w> </span>~/testdir/dir1/
/home/vagrant/testdir/dir1/
├──<span class=w> </span>x
│<span class=w>   </span>├──<span class=w> </span>a
│<span class=w>   </span>└──<span class=w> </span>b
└──<span class=w> </span>y
<span class=w>  </span>├──<span class=w> </span>a
<span class=w>  </span>└──<span class=w> </span>b
</code></pre></div> <ul> <li>创建目录<code>~/testdir/dir2/x</code>，<code>~/testdir/dir2/y</code>，<code>~/testdir/dir2/x/a</code>，<code>~/testdir/dir2/x/b</code>。</li> </ul> <div class=highlight><pre><span></span><code>$<span class=w> </span>mkdir<span class=w> </span>-p<span class=w> </span>~/testdir/dir2/<span class=o>{</span>x/<span class=o>{</span>a,b<span class=o>}</span>,y<span class=o>}</span>

$<span class=w> </span>tree<span class=w> </span>~/testdir/dir2/
/home/vagrant/testdir/dir2/
├──<span class=w> </span>x
│<span class=w>   </span>├──<span class=w> </span>a
│<span class=w>   </span>└──<span class=w> </span>b
└──<span class=w> </span>y
</code></pre></div> <ul> <li>创建目录<code>~/testdir/dir3</code>、<code>~/testdir/dir4</code>、<code>~/testdir/dir5</code>、<code>~/testdir/dir5/dir6</code>、<code>~/testdir/dir5/dir7</code>。</li> </ul> <div class=highlight><pre><span></span><code>$<span class=w> </span>mkdir<span class=w> </span>-p<span class=w> </span>~/testdir/dir<span class=o>{</span><span class=m>3</span>,4,5/dir<span class=o>{</span><span class=m>6</span>,7<span class=o>}}</span>

$<span class=w> </span>tree<span class=w> </span>~/testdir
/home/vagrant/testdir
├──<span class=w> </span>dir1
│<span class=w>   </span>├──<span class=w> </span>x
│<span class=w>   </span>│<span class=w>   </span>├──<span class=w> </span>a
│<span class=w>   </span>│<span class=w>   </span>└──<span class=w> </span>b
│<span class=w>   </span>└──<span class=w> </span>y
│<span class=w>       </span>├──<span class=w> </span>a
│<span class=w>       </span>└──<span class=w> </span>b
├──<span class=w> </span>dir2
│<span class=w>   </span>├──<span class=w> </span>x
│<span class=w>   </span>│<span class=w>   </span>├──<span class=w> </span>a
│<span class=w>   </span>│<span class=w>   </span>└──<span class=w> </span>b
│<span class=w>   </span>└──<span class=w> </span>y
├──<span class=w> </span>dir3
├──<span class=w> </span>dir4
└──<span class=w> </span>dir5
<span class=w> </span>├──<span class=w> </span>dir6
<span class=w> </span>└──<span class=w> </span>dir7
</code></pre></div> <h2 id=3>3.七种文件类型<a class=headerlink href=#3 title="Permanent link"> ¶</a></h2> <ul> <li>普通文件（Normal Files）</li> <li>ASCII 文本文件</li> <li>可执行文件</li> <li>图形文件</li> <li>目录（Directories）</li> <li>组织规划磁盘上的文件</li> <li>包含文件和子目录</li> <li>实现分层文件系统</li> <li>链接（Links）</li> <li>硬链接（Hard links）<ul> <li>磁盘上文件的辅助文件名</li> <li>多个文件名引用单个<code>inode</code></li> <li>引用的文件必须存在于同一个文件系统中</li> </ul> </li> <li>符号链接（Symbolic links）<ul> <li>对磁盘上其他文件的引用</li> <li><code>inode</code>包含对另一个文件名的引用</li> <li>被引用的文件可以存在于同一个文件系统中，也可以存在于其他文件系统中</li> <li>符号链接可以引用不存在的文件（断开的链接）</li> </ul> </li> <li>套接字Sockets - 用于进程之间的双向通信。</li> <li>管道（Pipes）(FIFOs) - 用于从一个进程到另一个进程的单向通信。</li> <li>块设备（Block Devices）</li> <li>字符设备（Character Devices）</li> </ul> <h3 id=31inode>3.1.inode结构<a class=headerlink href=#31inode title="Permanent link"> ¶</a></h3> <p>文件储存在硬盘上，硬盘的最小存储单位叫做“扇区”（Sector）。每个扇区储存512字节（相当于0.5KB）。</p> <p>操作系统读取硬盘的时候，不是一个一个扇区读取，而是一次性连续读取多个扇区，我们称为读取一个“块”（block）。</p> <p>常见的block的大小是4KB（连续八个sector组成一个block）。</p> <p>多个扇区组成的block是文件存取的*最小单位*。</p> <p>文件数据储存在block中，文件的元信息，比如文件的创建者、创建日期、文大小等，存储在inode，即“索引节点”。</p> <p>每一个文件都有对应的inode，里面包含了与该文件有关的一些信息。注意，除了文件名以外的其它文件信息，都存在inode之中。</p> <p>inode包含文件的元信息主要有：</p> <ul> <li>文件的字节数</li> <li>文件拥有者的 User ID</li> <li>文件的 Group ID</li> <li>文件的读、写、执行权限</li> <li>文件的时间戳，共有三个：ctime指inode上一次变动的时间，mtime指文件内容上一次变动的时间，atime指文件上一次打开的时间。</li> <li>链接数，即有多少文件名指向这个inode</li> <li>文件数据block的位置</li> </ul> <p>查看inode信息的命令<code>stat</code>：</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>stat<span class=w> </span>file1
<span class=w>  </span>File:<span class=w> </span>file1
<span class=w>  </span>Size:<span class=w> </span><span class=m>5</span><span class=w>               </span>Blocks:<span class=w> </span><span class=m>8</span><span class=w>          </span>IO<span class=w> </span>Block:<span class=w> </span><span class=m>4096</span><span class=w>   </span>regular<span class=w> </span>file
Device:<span class=w> </span>fd02h/64770d<span class=w>    </span>Inode:<span class=w> </span><span class=m>143</span><span class=w>         </span>Links:<span class=w> </span><span class=m>1</span>
Access:<span class=w> </span><span class=o>(</span><span class=m>0644</span>/-rw-r--r--<span class=o>)</span><span class=w>  </span>Uid:<span class=w> </span><span class=o>(</span><span class=w> </span><span class=m>1000</span>/<span class=w> </span>vagrant<span class=o>)</span><span class=w>   </span>Gid:<span class=w> </span><span class=o>(</span><span class=w>   </span><span class=m>10</span>/<span class=w>   </span>wheel<span class=o>)</span>
Context:<span class=w> </span>unconfined_u:object_r:user_home_t:s0
Access:<span class=w> </span><span class=m>2022</span>-11-08<span class=w> </span><span class=m>20</span>:49:26.019678244<span class=w> </span>+0800
Modify:<span class=w> </span><span class=m>2022</span>-11-08<span class=w> </span><span class=m>20</span>:49:26.019678244<span class=w> </span>+0800
Change:<span class=w> </span><span class=m>2022</span>-11-08<span class=w> </span><span class=m>20</span>:49:26.028678455<span class=w> </span>+0800
<span class=w> </span>Birth:<span class=w> </span><span class=m>2022</span>-11-08<span class=w> </span><span class=m>20</span>:49:26.019678244<span class=w> </span>+0800
</code></pre></div> <p>格式化硬盘时，操作系统会自动将硬盘分成两个区域。一个是数据区，存放文件数据。另一个是inode区（inode table），存放inode所包含的文件的元信息。</p> <p>每个inode节点的大小，一般是128字节或256字节。inode节点的总数，在格式化时就确定了，一般是每1KB或每2KB就设置一个inode。</p> <p>假定一块1GB的硬盘，如果每个inode节点的大小为128字节，且每1KB就设置一个inode，则inode table的大小就会达到128MB，占整块硬盘的12.8%。</p> <p>通过<code>df</code>命令查看每个硬盘分区的inode总数和已经使用的数量。 由于每个文件都必须有一个inode，因此有可能发生inode已经用光，但是硬盘还未存满的情况，也就无法在硬盘上创建新文件。</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>df<span class=w> </span>-i
Filesystem<span class=w>                         </span>Inodes<span class=w> </span>IUsed<span class=w>   </span>IFree<span class=w> </span>IUse%<span class=w> </span>Mounted<span class=w> </span>on
tmpfs<span class=w>                              </span><span class=m>497897</span><span class=w>   </span><span class=m>872</span><span class=w>  </span><span class=m>497025</span><span class=w>    </span><span class=m>1</span>%<span class=w> </span>/run
/dev/mapper/ubuntu--vg-ubuntu--lv<span class=w> </span><span class=m>3211264</span><span class=w> </span><span class=m>81473</span><span class=w> </span><span class=m>3129791</span><span class=w>    </span><span class=m>3</span>%<span class=w> </span>/
tmpfs<span class=w>                              </span><span class=m>497897</span><span class=w>     </span><span class=m>1</span><span class=w>  </span><span class=m>497896</span><span class=w>    </span><span class=m>1</span>%<span class=w> </span>/dev/shm
tmpfs<span class=w>                              </span><span class=m>497897</span><span class=w>     </span><span class=m>3</span><span class=w>  </span><span class=m>497894</span><span class=w>    </span><span class=m>1</span>%<span class=w> </span>/run/lock
/dev/sda2<span class=w>                          </span><span class=m>131072</span><span class=w>   </span><span class=m>316</span><span class=w>  </span><span class=m>130756</span><span class=w>    </span><span class=m>1</span>%<span class=w> </span>/boot
tmpfs<span class=w>                               </span><span class=m>99579</span><span class=w>    </span><span class=m>25</span><span class=w>   </span><span class=m>99554</span><span class=w>    </span><span class=m>1</span>%<span class=w> </span>/run/user/1000
</code></pre></div> <p>下面命令可以查看每个inode节点的大小：</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>sudo<span class=w> </span>dumpe2fs<span class=w> </span>-h<span class=w> </span>/dev/sda2<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span><span class=s2>&quot;Inode size&quot;</span>
dumpe2fs<span class=w> </span><span class=m>1</span>.46.5<span class=w> </span><span class=o>(</span><span class=m>30</span>-Dec-2021<span class=o>)</span>
Inode<span class=w> </span>size:<span class=w>               </span><span class=m>256</span>
</code></pre></div> <p>每个inode都有一个号码，操作系统用inode号码来识别不同的文件，注意，不是通过文件名来识别不同文件。从操作系统角度看，文件名只是inode号码对一个别名。</p> <p>用户通过文件名，打开某个文件的过程，操作系统分成三步完成： 首先，系统找到这个文件名对应的inode号码。 其次，通过inode号，获取inode信息。 第三，通过inode信息，找到文件数据所在的block，读出数据。</p> <p>通过<code>ls -i</code>命令，可以得到文件对应的inode号：</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>ls<span class=w> </span>-i<span class=w> </span>file1
<span class=m>143</span><span class=w> </span>file1
</code></pre></div> <p>目录（directory）也是一种文件。打开目录，实际上就是打开目录文件。</p> <p>目录文件的结构是由一个包含一系列目录项（dirent）的列表组成。 每个目录项由两部分组成：所包含文件的文件名，以及该文件名对应的inode号。</p> <p>命令<code>ls -i</code>列出整个目录文件，即文件名和inode号：</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>ls<span class=w> </span>-i
<span class=m>143</span><span class=w> </span>file1<span class=w>  </span><span class=m>140</span><span class=w> </span>file2<span class=w>  </span><span class=m>139</span><span class=w> </span><span class=nb>test</span>

$<span class=w> </span>ls<span class=w> </span>-il
<span class=m>143</span><span class=w> </span>-rw-r--r--.<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w>    </span><span class=m>5</span><span class=w> </span>Nov<span class=w>  </span><span class=m>8</span><span class=w> </span><span class=m>20</span>:49<span class=w> </span>file1
<span class=m>140</span><span class=w> </span>-rw-r--r--.<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w>    </span><span class=m>0</span><span class=w> </span>Oct<span class=w>  </span><span class=m>1</span><span class=w> </span><span class=m>21</span>:35<span class=w> </span>file2
<span class=m>139</span><span class=w> </span>drwxr-xr-x.<span class=w> </span><span class=m>5</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w> </span><span class=m>4096</span><span class=w> </span>Nov<span class=w>  </span><span class=m>9</span><span class=w> </span><span class=m>22</span>:00<span class=w> </span><span class=nb>test</span>
</code></pre></div> <h3 id=32>3.2.链接类型<a class=headerlink href=#32 title="Permanent link"> ¶</a></h3> <p><strong>硬链接</strong>（Hard links）硬链接是存储卷上文件的目录引用或指针。 文件名是存储在目录结构中的标签，目录结构指向文件数据。 因此，可以将多个文件名与同一文件关联。 通过不同的文件名访问时，所做的任何更改都是针对源文件数据。</p> <p><strong>符号链接</strong>（Symbolic links）: 符号链接包含一个文本字符串，操作系统将其解释为另一个文件或目录。 它本身就是一个文件，可以独立于目标而存在。 如果删除了符号链接，则其目标文件或目录不受影响。 如果移动，重命名或删除目标文件或目录，则用于指向它的任何符号链接将继续存在，但指向的是一个不存在的文件。</p> <p>仅当文件和链接文件位于同一文件系统（在同一分区上）时，才能使用硬链接，因为inode编号在同一文件系统中仅是唯一的。 可以使用<code>ln</code>命令创建硬链接，指向已存在文件的inode，可以通过文件名或者硬链接名访问文件。</p> <p>可以使用<code>ln -s</code>选项创建符号链接。 一个符号链接会被分配一个单独的inode，并指向一个文件，所以可以明显区分符号链接文件和实际文件。</p> <p>文件系统本质上是一个用于跟踪分区卷中的文件的数据库。 对于普通文件，分配数据块以存储文件的数据，分配inode以指向数据块以及存储关于文件的元数据，然后将文件名分配给inode。 硬链接是与现有inode关联的辅助文件名。 对于符号链接，将为新的inode分配一个与之关联的新文件名，但inode引用另一个文件名而不是引用数据块。</p> <p>查看文件名和inode之间关系的一个方法是使用<code>ls -il</code>命令。inode的典型大小为128位，数据块的大小范围可以是1k，2k，4k或更大，具体取决于文件系统类型。</p> <p>软连接可以针对目录，硬连接只能针对文件。</p> <p>硬链接相当于增加了一个登记项，使得原来的文件多了一个名字，至于inode都没变。所谓的登记项其实是目录文件中的一个条目(目录项)，使用hard link 是让多个不同的目录项指向同一个文件的inode，没有多余的内容需要存储在磁盘扇区中，所以hardlink不占用额外的空间。</p> <p>符号链接有单独的inode，在inode中存放另一个文件的路径而不是文件数据，所以符号链接会占用额外的空间。</p> <table> <thead> <tr> <th>特征</th> <th>硬链接</th> <th>符号链接</th> </tr> </thead> <tbody> <tr> <td>本质</td> <td>同一个文件</td> <td>不是同一个文件</td> </tr> <tr> <td>跨设备</td> <td>不支持</td> <td>支持</td> </tr> <tr> <td>inode</td> <td>相同</td> <td>不同</td> </tr> <tr> <td>链接数</td> <td>创建硬链接，链接数会增加，删除则减少</td> <td>创建或删除，链接数都不变</td> </tr> <tr> <td>文件夹</td> <td>不支持</td> <td>支持</td> </tr> <tr> <td>相对路径</td> <td>原始文件的相对路径是相对于当前工作目录</td> <td>原始文件的相对路径是相对于链接文件的相对路径</td> </tr> <tr> <td>删除源文件</td> <td>只是链接数减少，链接文件访问不受影响</td> <td>链接文件将无法访问</td> </tr> <tr> <td>文件类型</td> <td>和源文件相同</td> <td>链接文件，和源文件无关</td> </tr> <tr> <td>文件大小</td> <td>和源文件相同</td> <td>源文件的路径的长度</td> </tr> </tbody> </table> <h3 id=33>3.3.设备文件<a class=headerlink href=#33 title="Permanent link"> ¶</a></h3> <p><strong>设备文件</strong>（Device File）表示硬件（网卡除外）。 每个硬件都由一个设备文件表示。 网卡是接口。</p> <p>设备文件把内核驱动和物理硬件设备连接起来。 内核驱动程序通过对设备文件进行读写（正确的格式）来实现对硬件的读写。</p> <p>类型：</p> <ul> <li>块设备（Block Devices）：块设备（通常）在512字节的大块中读取/写入信息。</li> <li>字符设备（Character Devices）：字符设备以字符方式读取/写入信息。 字符设备直接提供对硬件设备的无缓冲访问。</li> <li>有时称为裸设备（raw devices）。（注意：裸设备被视为字符设备，不是块设备）</li> <li>通过辅以不同选项，可以广泛而多样地应用和使用字符设备。</li> <li>当内核发现设备时由操作系统<code>udev</code>自动创建。</li> </ul> <h3 id=34>3.4.练习<a class=headerlink href=#34 title="Permanent link"> ¶</a></h3> <p>目标：以Rocky 9为例。</p> <ul> <li>查看软/硬链接文件的特征。</li> <li>查看目录结构。</li> </ul> <p>可以通过下面命令得到当前系统的2级目录的结构。</p> <div class=highlight><pre><span></span><code>tree<span class=w> </span>-L<span class=w> </span><span class=m>2</span><span class=w> </span>-d<span class=w> </span>/
</code></pre></div> <p>创建练习目录。</p> <div class=highlight><pre><span></span><code>mkdir<span class=w> </span>data
mkdir<span class=w> </span>-p<span class=w> </span>data/typelink
<span class=nb>cd</span><span class=w> </span>data
</code></pre></div> <p>创建硬链接。注意：<code>file</code>、<code>hardlinkfile1</code>、<code>hardlinkfile2</code> 文件的链接位置的数值的变化)</p> <div class=highlight><pre><span></span><code><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;it&#39;s original file&quot;</span><span class=w> </span>&gt;<span class=w> </span>file
ln<span class=w> </span>file<span class=w> </span>hardlinkfile1
ln<span class=w> </span>-s<span class=w> </span>file<span class=w> </span>symlinkfile1
ln<span class=w> </span>-s<span class=w> </span>file<span class=w> </span>symlinkfile2
</code></pre></div> <p>执行<code>ls -l</code>命令可以得到下面的结果：</p> <div class=highlight><pre><span></span><code>-rw-r--r--.<span class=w> </span><span class=m>2</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w> </span><span class=m>19</span><span class=w> </span>Nov<span class=w>  </span><span class=m>1</span><span class=w> </span><span class=m>10</span>:42<span class=w> </span>file
-rw-r--r--.<span class=w> </span><span class=m>2</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w> </span><span class=m>19</span><span class=w> </span>Nov<span class=w>  </span><span class=m>1</span><span class=w> </span><span class=m>10</span>:42<span class=w> </span>hardlinkfile1
lrwxrwxrwx.<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w>  </span><span class=m>4</span><span class=w> </span>Nov<span class=w>  </span><span class=m>1</span><span class=w> </span><span class=m>10</span>:43<span class=w> </span>symlinkfile1<span class=w> </span>-&gt;<span class=w> </span>file
lrwxrwxrwx.<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w>  </span><span class=m>4</span><span class=w> </span>Nov<span class=w>  </span><span class=m>1</span><span class=w> </span><span class=m>10</span>:43<span class=w> </span>symlinkfile2<span class=w> </span>-&gt;<span class=w> </span>file
</code></pre></div> <p>创建另外一个硬链接。</p> <div class=highlight><pre><span></span><code>ln<span class=w> </span>file<span class=w> </span>hardlinkfile2
</code></pre></div> <p>执行<code>ls -l</code>命令可以得到下面的结果：</p> <div class=highlight><pre><span></span><code>-rw-r--r--.<span class=w> </span><span class=m>3</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w>  </span><span class=m>19</span><span class=w> </span>Nov<span class=w>  </span><span class=m>1</span><span class=w> </span><span class=m>10</span>:42<span class=w> </span>file
-rw-r--r--.<span class=w> </span><span class=m>3</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w>  </span><span class=m>19</span><span class=w> </span>Nov<span class=w>  </span><span class=m>1</span><span class=w> </span><span class=m>10</span>:42<span class=w> </span>hardlinkfile1
-rw-r--r--.<span class=w> </span><span class=m>3</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w>  </span><span class=m>19</span><span class=w> </span>Nov<span class=w>  </span><span class=m>1</span><span class=w> </span><span class=m>10</span>:42<span class=w> </span>hardlinkfile2
lrwxrwxrwx.<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w>   </span><span class=m>4</span><span class=w> </span>Nov<span class=w>  </span><span class=m>1</span><span class=w> </span><span class=m>10</span>:43<span class=w> </span>symlinkfile1<span class=w> </span>-&gt;<span class=w> </span>file
lrwxrwxrwx.<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w>   </span><span class=m>4</span><span class=w> </span>Nov<span class=w>  </span><span class=m>1</span><span class=w> </span><span class=m>10</span>:43<span class=w> </span>symlinkfile2<span class=w> </span>-&gt;<span class=w> </span>file
</code></pre></div> <p>修改<code>file</code>文件的内容。</p> <div class=highlight><pre><span></span><code><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;add oneline&quot;</span><span class=w> </span>&gt;&gt;<span class=w> </span>file
</code></pre></div> <p>通过命令<code>cat file</code>查看当前<code>file</code>的内容。</p> <div class=highlight><pre><span></span><code>it<span class=err>&#39;</span>s<span class=w> </span>original<span class=w> </span>file
add<span class=w> </span>oneline
</code></pre></div> <p>通过下面的命令，可以看到所以软/硬链接文件内容都更新了，和<code>file</code>文件更新后的内容保持一致。</p> <div class=highlight><pre><span></span><code>cat<span class=w> </span>hardlinkfile1
cat<span class=w> </span>hardlinkfile2
cat<span class=w> </span>symlinkfile1
cat<span class=w> </span>symlinkfile2
</code></pre></div> <p>对文件<code>symlinkfile1</code>再创建新的软连接。</p> <div class=highlight><pre><span></span><code>ln<span class=w> </span>-s<span class=w> </span>symlinkfile1<span class=w> </span>symlinkfile1-1
</code></pre></div> <p>通过命令<code>ls -il</code>查看现在的目录信息。</p> <div class=highlight><pre><span></span><code><span class=m>67274680</span><span class=w> </span>-rw-r--r--.<span class=w> </span><span class=m>3</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w> </span><span class=m>31</span><span class=w> </span>Nov<span class=w>  </span><span class=m>1</span><span class=w> </span><span class=m>11</span>:14<span class=w> </span>file
<span class=m>67274680</span><span class=w> </span>-rw-r--r--.<span class=w> </span><span class=m>3</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w> </span><span class=m>31</span><span class=w> </span>Nov<span class=w>  </span><span class=m>1</span><span class=w> </span><span class=m>11</span>:14<span class=w> </span>hardlinkfile1
<span class=m>67274680</span><span class=w> </span>-rw-r--r--.<span class=w> </span><span class=m>3</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w> </span><span class=m>31</span><span class=w> </span>Nov<span class=w>  </span><span class=m>1</span><span class=w> </span><span class=m>11</span>:14<span class=w> </span>hardlinkfile2
<span class=m>67274681</span><span class=w> </span>lrwxrwxrwx.<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w>  </span><span class=m>4</span><span class=w> </span>Nov<span class=w>  </span><span class=m>1</span><span class=w> </span><span class=m>10</span>:43<span class=w> </span>symlinkfile1<span class=w> </span>-&gt;<span class=w> </span>file
<span class=m>67274683</span><span class=w> </span>lrwxrwxrwx.<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w> </span><span class=m>12</span><span class=w> </span>Nov<span class=w>  </span><span class=m>1</span><span class=w> </span><span class=m>11</span>:20<span class=w> </span>symlinkfile1-1<span class=w> </span>-&gt;<span class=w> </span>symlinkfile1
<span class=m>67274682</span><span class=w> </span>lrwxrwxrwx.<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w>  </span><span class=m>4</span><span class=w> </span>Nov<span class=w>  </span><span class=m>1</span><span class=w> </span><span class=m>10</span>:43<span class=w> </span>symlinkfile2<span class=w> </span>-&gt;<span class=w> </span>file
</code></pre></div> <p>读取软链接文件的源文件信息</p> <div class=highlight><pre><span></span><code>readlink<span class=w> </span>symlinkfile1
readlink<span class=w> </span>symlinkfile2
</code></pre></div> <p>注意，对于<code>symlinkfile1-1</code>的情况有些不同。</p> <div class=highlight><pre><span></span><code>readlink<span class=w> </span>symlinkfile1-1
</code></pre></div> <p>上面命令返回结果<code>symlinkfile1</code>仍然是一个符号链接文件。通过<code>readlink -f</code>可以直接定位真正的源文件。</p> <div class=highlight><pre><span></span><code>readlink<span class=w> </span>-f<span class=w> </span>symlinkfile1-1
</code></pre></div> <p>上面的返回结果<code>/data/linktype/file</code>是<code>symlinkfile1-1</code>真正的源文件。</p> <p>显示<code>data</code>目录下的文件和子目录：</p> <div class=highlight><pre><span></span><code><span class=nb>cd</span><span class=w> </span>~
tree<span class=w> </span>./data
</code></pre></div> <p>运行结果：</p> <div class=highlight><pre><span></span><code>./data
├──<span class=w> </span>file
├──<span class=w> </span>hardlinkfile1
├──<span class=w> </span>hardlinkfile2
├──<span class=w> </span>symlinkfile1<span class=w> </span>-&gt;<span class=w> </span>file
├──<span class=w> </span>symlinkfile1-1<span class=w> </span>-&gt;<span class=w> </span>symlinkfile1
├──<span class=w> </span>symlinkfile2<span class=w> </span>-&gt;<span class=w> </span>file
└──<span class=w> </span>typelink
</code></pre></div> <p>只显示<code>data</code>目录下的子目录：</p> <div class=highlight><pre><span></span><code>tree<span class=w> </span>-d<span class=w> </span>./data
</code></pre></div> <p>运行结果：</p> <div class=highlight><pre><span></span><code>./data
└──<span class=w> </span>typelink
</code></pre></div> <p>显示<code>data</code>目录下的文件和子目录，包含全目录：</p> <div class=highlight><pre><span></span><code>tree<span class=w> </span>-f<span class=w> </span>./data
</code></pre></div> <p>运行结果：</p> <div class=highlight><pre><span></span><code>./data
├──<span class=w> </span>./data/file
├──<span class=w> </span>./data/hardlinkfile1
├──<span class=w> </span>./data/hardlinkfile2
├──<span class=w> </span>./data/symlinkfile1<span class=w> </span>-&gt;<span class=w> </span>file
├──<span class=w> </span>./data/symlinkfile1-1<span class=w> </span>-&gt;<span class=w> </span>symlinkfile1
├──<span class=w> </span>./data/symlinkfile2<span class=w> </span>-&gt;<span class=w> </span>file
└──<span class=w> </span>./data/typelink
</code></pre></div> <h2 id=4>4.文件属性说明<a class=headerlink href=#4 title="Permanent link"> ¶</a></h2> <p>执行命令<code>ls -ihl</code>，可以得到下面的输出结果（Rocky 9）。</p> <div class=highlight><pre><span></span><code><span class=m>67274680</span><span class=w> </span>-rw-r--r--.<span class=w> </span><span class=m>3</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w> </span><span class=m>31</span><span class=w> </span>Nov<span class=w>  </span><span class=m>1</span><span class=w> </span><span class=m>11</span>:14<span class=w> </span>file
<span class=m>67274680</span><span class=w> </span>-rw-r--r--.<span class=w> </span><span class=m>3</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w> </span><span class=m>31</span><span class=w> </span>Nov<span class=w>  </span><span class=m>1</span><span class=w> </span><span class=m>11</span>:14<span class=w> </span>hardlinkfile1
<span class=m>67274680</span><span class=w> </span>-rw-r--r--.<span class=w> </span><span class=m>3</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w> </span><span class=m>31</span><span class=w> </span>Nov<span class=w>  </span><span class=m>1</span><span class=w> </span><span class=m>11</span>:14<span class=w> </span>hardlinkfile2
<span class=m>67274681</span><span class=w> </span>lrwxrwxrwx.<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w>  </span><span class=m>4</span><span class=w> </span>Nov<span class=w>  </span><span class=m>1</span><span class=w> </span><span class=m>10</span>:43<span class=w> </span>symlinkfile1<span class=w> </span>-&gt;<span class=w> </span>file
<span class=m>67274683</span><span class=w> </span>lrwxrwxrwx.<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w> </span><span class=m>12</span><span class=w> </span>Nov<span class=w>  </span><span class=m>1</span><span class=w> </span><span class=m>11</span>:20<span class=w> </span>symlinkfile1-1<span class=w> </span>-&gt;<span class=w> </span>symlinkfile1
<span class=m>67274682</span><span class=w> </span>lrwxrwxrwx.<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w>  </span><span class=m>4</span><span class=w> </span>Nov<span class=w>  </span><span class=m>1</span><span class=w> </span><span class=m>10</span>:43<span class=w> </span>symlinkfile2<span class=w> </span>-&gt;<span class=w> </span>file
<span class=m>33555262</span><span class=w> </span>drwxr-xr-x.<span class=w> </span><span class=m>2</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w>  </span><span class=m>6</span><span class=w> </span>Nov<span class=w>  </span><span class=m>1</span><span class=w> </span><span class=m>11</span>:30<span class=w> </span>typelink
</code></pre></div> <p>以<code>67274680 -rw-r--r--. 3 vagrant wheel 31 Nov 1 11:14 file</code>为例：</p> <ul> <li><code>67274680</code>: inode 索引节点编号。</li> <li><code>-rw-r--r--</code>：文件类型及权限</li> <li><code>-</code>：文件类型，例子中出现了三种，<code>-</code>，<code>l</code>和<code>d</code>。<ul> <li><code>-</code>：普通文件</li> <li><code>d</code>：目录</li> <li><code>l</code>：符号链接文件（link）</li> <li><code>b</code>：块设备（block）</li> <li><code>c</code>：字符设备（character）</li> <li><code>p</code>：管道文件（pipe）</li> <li><code>s</code>：套接字文件（socket）</li> </ul> </li> <li><code>rw-r--r--</code>：文件权限，从左到右依次为：<ul> <li><code>rw-</code>：文件属主权限，例子中是<code>vagrant</code>。</li> <li><code>r--</code>：文件属组的权限，例子中是<code>wheel</code>。</li> <li><code>r--</code>：其他组的权限。</li> </ul> </li> <li><code>.</code>：这个点表示文件带有SELinux的安全上下文（SELinux Contexts）。关闭SELinux，新创建的文件就不会再有这个点了。但是，以前创建的文件本来有这个点的还会显示这个点（虽然SELinux不起作用了）。</li> <li><code>3</code>：硬链接数，例子中<code>file</code>和<code>hardlinkfile1</code>和<code>hardlinkfile2</code>之间是硬链接，所以这三个文件的硬链接数都是<code>3</code>。</li> <li><code>vagrant</code>：文件属主</li> <li><code>wheel</code>：文件属组</li> <li><code>31</code>：文件或目录的大小</li> <li><code>Nov 1 11:14</code>：文件或目录的创建日期和时间</li> <li><code>file</code>：文件或目录名称</li> </ul> <p>下面是命令<code>ls -ihl</code>在openSUSE和Ubuntu上的显示结果。</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>ls<span class=w> </span>-ihl
<span class=m>233647</span><span class=w> </span>-rw-r--r--<span class=w> </span><span class=m>3</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w> </span><span class=m>31</span><span class=w> </span>Nov<span class=w>  </span><span class=m>1</span><span class=w> </span><span class=m>15</span>:52<span class=w> </span>file
<span class=m>233647</span><span class=w> </span>-rw-r--r--<span class=w> </span><span class=m>3</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w> </span><span class=m>31</span><span class=w> </span>Nov<span class=w>  </span><span class=m>1</span><span class=w> </span><span class=m>15</span>:52<span class=w> </span>hardlinkfile1
<span class=m>233647</span><span class=w> </span>-rw-r--r--<span class=w> </span><span class=m>3</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w> </span><span class=m>31</span><span class=w> </span>Nov<span class=w>  </span><span class=m>1</span><span class=w> </span><span class=m>15</span>:52<span class=w> </span>hardlinkfile2
<span class=m>233648</span><span class=w> </span>lrwxrwxrwx<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w>  </span><span class=m>4</span><span class=w> </span>Nov<span class=w>  </span><span class=m>1</span><span class=w> </span><span class=m>15</span>:52<span class=w> </span>symlinkfile1<span class=w> </span>-&gt;<span class=w> </span>file
<span class=m>233650</span><span class=w> </span>lrwxrwxrwx<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w> </span><span class=m>12</span><span class=w> </span>Nov<span class=w>  </span><span class=m>1</span><span class=w> </span><span class=m>15</span>:52<span class=w> </span>symlinkfile1-1<span class=w> </span>-&gt;<span class=w> </span>symlinkfile1
<span class=m>233649</span><span class=w> </span>lrwxrwxrwx<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w>  </span><span class=m>4</span><span class=w> </span>Nov<span class=w>  </span><span class=m>1</span><span class=w> </span><span class=m>15</span>:52<span class=w> </span>symlinkfile2<span class=w> </span>-&gt;<span class=w> </span>file
<span class=m>233646</span><span class=w> </span>drwxr-xr-x<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w>  </span><span class=m>0</span><span class=w> </span>Nov<span class=w>  </span><span class=m>1</span><span class=w> </span><span class=m>15</span>:51<span class=w> </span>typelink
</code></pre></div> <h2 id=5>5.标准输入输出<a class=headerlink href=#5 title="Permanent link"> ¶</a></h2> <p>标准输入输出，即I/O，I/O的I是Input，O是output。</p> <ul> <li>I：从外部设备输入到内存</li> <li>O：从内存输出到外部设备</li> </ul> <p>标准输入和标准输出是用于IO的，它们属于外部设备（逻辑上的外部设备），不是内存。</p> <p>linux中一切设备皆是文件！因此标准输入和输出本质就是文件，外部设备以文件形式表现。</p> <p>在Linux系统中，标准输入和标准输出对应的文件是<code>/dev/stdin</code>和<code>/dev/stdout</code>这两个文件。</p> <p>从标准输入读，从逻辑上讲，就是打开<code>/dev/stdin</code>这个文件，并读入文件内容。 输出到标准输出，从逻辑上讲，就是打开<code>/dev/stdout</code>这个文件，并把内容输出到这个文件里去。</p> <p>这里强调的是“逻辑上”，因为<code>/dev/stdin</code>和<code>/dev/stdout</code>这2个文件本身不是设备文件。Linux中设备是文件，但是文件不一定是设备。 因此，操作<code>/dev/stdin</code>和/dev/stdout`这2个文件，实际上是操作两个文件存放地址对应的设备文件。</p> <p>通过下面命令可以看到标准输入输出文件的特点，他们虽然在<code>/dev</code>目录下，都是以<code>l</code>开头的链接文件，指向的是另一个文件的地址。</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>ls<span class=w> </span>-l<span class=w> </span>/dev/std*
lrwxrwxrwx<span class=w> </span><span class=m>1</span><span class=w> </span>root<span class=w> </span>root<span class=w> </span><span class=m>15</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>10</span>:39<span class=w> </span>/dev/stderr<span class=w> </span>-&gt;<span class=w> </span>/proc/self/fd/2
lrwxrwxrwx<span class=w> </span><span class=m>1</span><span class=w> </span>root<span class=w> </span>root<span class=w> </span><span class=m>15</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>10</span>:39<span class=w> </span>/dev/stdin<span class=w> </span>-&gt;<span class=w> </span>/proc/self/fd/0
lrwxrwxrwx<span class=w> </span><span class=m>1</span><span class=w> </span>root<span class=w> </span>root<span class=w> </span><span class=m>15</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>10</span>:39<span class=w> </span>/dev/stdout<span class=w> </span>-&gt;<span class=w> </span>/proc/self/fd/1

<span class=c1># Rocky</span>
$<span class=w> </span>ll<span class=w> </span>/proc/self/fd/
lrwx------.<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>22</span>:38<span class=w> </span><span class=m>0</span><span class=w> </span>-&gt;<span class=w> </span>/dev/pts/0
lrwx------.<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>22</span>:38<span class=w> </span><span class=m>1</span><span class=w> </span>-&gt;<span class=w> </span>/dev/pts/0
lrwx------.<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>22</span>:38<span class=w> </span><span class=m>2</span><span class=w> </span>-&gt;<span class=w> </span>/dev/pts/0
lr-x------.<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>22</span>:38<span class=w> </span><span class=m>3</span><span class=w> </span>-&gt;<span class=w> </span>/proc/1702/fd

<span class=c1># Ubuntu</span>
$<span class=w> </span>ll<span class=w> </span>/proc/self/fd/
lrwx------<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>sudo<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>14</span>:38<span class=w> </span><span class=m>0</span><span class=w> </span>-&gt;<span class=w> </span>/dev/pts/0
lrwx------<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>sudo<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>14</span>:38<span class=w> </span><span class=m>1</span><span class=w> </span>-&gt;<span class=w> </span>/dev/pts/0
lrwx------<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>sudo<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>14</span>:38<span class=w> </span><span class=m>2</span><span class=w> </span>-&gt;<span class=w> </span>/dev/pts/0
lr-x------<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>sudo<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>14</span>:38<span class=w> </span><span class=m>3</span><span class=w> </span>-&gt;<span class=w> </span>/proc/2062/fd/

<span class=c1># openSUSE</span>
$<span class=w> </span>ll<span class=w> </span>/proc/self/fd/*
ls:<span class=w> </span>cannot<span class=w> </span>access<span class=w> </span><span class=s1>&#39;/proc/self/fd/255&#39;</span>:<span class=w> </span>No<span class=w> </span>such<span class=w> </span>file<span class=w> </span>or<span class=w> </span>directory
ls:<span class=w> </span>cannot<span class=w> </span>access<span class=w> </span><span class=s1>&#39;/proc/self/fd/3&#39;</span>:<span class=w> </span>No<span class=w> </span>such<span class=w> </span>file<span class=w> </span>or<span class=w> </span>directory
lrwx------<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>22</span>:37<span class=w> </span>/proc/self/fd/0<span class=w> </span>-&gt;<span class=w> </span>/dev/pts/0
lrwx------<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>22</span>:37<span class=w> </span>/proc/self/fd/1<span class=w> </span>-&gt;<span class=w> </span>/dev/pts/0
lrwx------<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>22</span>:37<span class=w> </span>/proc/self/fd/2<span class=w> </span>-&gt;<span class=w> </span>/dev/pts/0
</code></pre></div> <p>Linux进程默认会打开的三个文件：</p> <ul> <li>标准输入<code>/dev/stdin</code>，描述符为 0，默认是键盘输入。</li> <li>标准输出<code>/dev/stdout</code>，描述符为 1，默认是输出到屏幕。</li> <li>标准输出<code>/dev/stderr</code>，描述符为 2，默认是输出到屏幕。</li> </ul> <p>以Rocky为例，创建<code>file.py</code>文件。</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>cat<span class=w> </span>&gt;<span class=w> </span>file.py<span class=w> </span><span class=s>&lt;&lt;EOF</span>
<span class=s>import time</span>
<span class=s>f = open(&#39;test.txt&#39;, &#39;r&#39;)</span>
<span class=s>time.sleep(1000)</span>
<span class=s>EOF</span>
</code></pre></div> <p>创建<code>test.txt</code>文件。</p> <div class=highlight><pre><span></span><code><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;hello&quot;</span><span class=w> </span>&gt;<span class=w> </span>test.txt
</code></pre></div> <p>运行<code>file.py</code>程序。</p> <div class=highlight><pre><span></span><code>python3<span class=w> </span>file.py
</code></pre></div> <p>打开新的终端窗口，执行下面命令，得到python3这个程序运行的process ID。其中可以看到有一个来自文件test.txt被程序file.py打开（输入）。</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>pidof<span class=w> </span>python3
<span class=m>1739</span><span class=w> </span><span class=m>788</span>

$<span class=w> </span>sudo<span class=w> </span>ls<span class=w> </span>-l<span class=w> </span>/proc/788/fd/
lr-x------.<span class=w> </span><span class=m>1</span><span class=w> </span>root<span class=w> </span>root<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>23</span>:00<span class=w> </span><span class=m>0</span><span class=w> </span>-&gt;<span class=w> </span>/dev/null
l-wx------.<span class=w> </span><span class=m>1</span><span class=w> </span>root<span class=w> </span>root<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>23</span>:00<span class=w> </span><span class=m>1</span><span class=w> </span>-&gt;<span class=w> </span>/dev/null
lrwx------.<span class=w> </span><span class=m>1</span><span class=w> </span>root<span class=w> </span>root<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>23</span>:00<span class=w> </span><span class=m>10</span><span class=w> </span>-&gt;<span class=w> </span><span class=s1>&#39;socket:[24677]&#39;</span>
lrwx------.<span class=w> </span><span class=m>1</span><span class=w> </span>root<span class=w> </span>root<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>23</span>:00<span class=w> </span><span class=m>11</span><span class=w> </span>-&gt;<span class=w> </span><span class=s1>&#39;socket:[24678]&#39;</span>
l-wx------.<span class=w> </span><span class=m>1</span><span class=w> </span>root<span class=w> </span>root<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>23</span>:00<span class=w> </span><span class=m>2</span><span class=w> </span>-&gt;<span class=w> </span>/dev/null
l-wx------.<span class=w> </span><span class=m>1</span><span class=w> </span>root<span class=w> </span>root<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>10</span>:41<span class=w> </span><span class=m>3</span><span class=w> </span>-&gt;<span class=w> </span>/var/log/firewalld
lrwx------.<span class=w> </span><span class=m>1</span><span class=w> </span>root<span class=w> </span>root<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>23</span>:00<span class=w> </span><span class=m>4</span><span class=w> </span>-&gt;<span class=w> </span><span class=s1>&#39;socket:[23421]&#39;</span>
lrwx------.<span class=w> </span><span class=m>1</span><span class=w> </span>root<span class=w> </span>root<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>23</span>:00<span class=w> </span><span class=m>5</span><span class=w> </span>-&gt;<span class=w> </span><span class=s1>&#39;anon_inode:[eventfd]&#39;</span>
lrwx------.<span class=w> </span><span class=m>1</span><span class=w> </span>root<span class=w> </span>root<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>23</span>:00<span class=w> </span><span class=m>6</span><span class=w> </span>-&gt;<span class=w> </span><span class=s1>&#39;socket:[24586]&#39;</span>
lr-x------.<span class=w> </span><span class=m>1</span><span class=w> </span>root<span class=w> </span>root<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>23</span>:00<span class=w> </span><span class=m>7</span><span class=w> </span>-&gt;<span class=w> </span>anon_inode:inotify
lrwx------.<span class=w> </span><span class=m>1</span><span class=w> </span>root<span class=w> </span>root<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>23</span>:00<span class=w> </span><span class=m>8</span><span class=w> </span>-&gt;<span class=w> </span><span class=s1>&#39;anon_inode:[eventfd]&#39;</span>
lrwx------.<span class=w> </span><span class=m>1</span><span class=w> </span>root<span class=w> </span>root<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>23</span>:00<span class=w> </span><span class=m>9</span><span class=w> </span>-&gt;<span class=w> </span><span class=s1>&#39;/memfd:libffi (deleted)&#39;</span>

$<span class=w> </span>sudo<span class=w> </span>ls<span class=w> </span>-l<span class=w> </span>/proc/1739/fd/
lrwx------.<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>23</span>:00<span class=w> </span><span class=m>0</span><span class=w> </span>-&gt;<span class=w> </span>/dev/pts/0
lrwx------.<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>23</span>:00<span class=w> </span><span class=m>1</span><span class=w> </span>-&gt;<span class=w> </span>/dev/pts/0
lrwx------.<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>23</span>:00<span class=w> </span><span class=m>2</span><span class=w> </span>-&gt;<span class=w> </span>/dev/pts/0
lr-x------.<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>23</span>:00<span class=w> </span><span class=m>3</span><span class=w> </span>-&gt;<span class=w> </span>/home/vagrant/test.txt
</code></pre></div> <p>在Ubuntu中运行<code>file.py</code>程序，pidof会取得3个process IDs。</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>pidof<span class=w> </span>python3
<span class=m>2128</span><span class=w> </span><span class=m>924</span><span class=w> </span><span class=m>873</span>

$<span class=w> </span>sudo<span class=w> </span>ls<span class=w> </span>-l<span class=w> </span>/proc/2128/fd/
lrwx------<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>sudo<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>15</span>:10<span class=w> </span><span class=m>0</span><span class=w> </span>-&gt;<span class=w> </span>/dev/pts/0
lrwx------<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>sudo<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>15</span>:10<span class=w> </span><span class=m>1</span><span class=w> </span>-&gt;<span class=w> </span>/dev/pts/0
lrwx------<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>sudo<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>15</span>:10<span class=w> </span><span class=m>2</span><span class=w> </span>-&gt;<span class=w> </span>/dev/pts/0
lr-x------<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>sudo<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>15</span>:10<span class=w> </span><span class=m>3</span><span class=w> </span>-&gt;<span class=w> </span>/home/vagrant/test.txt

$<span class=w> </span>sudo<span class=w> </span>ls<span class=w> </span>-l<span class=w> </span>/proc/924/fd/
lr-x------<span class=w> </span><span class=m>1</span><span class=w> </span>root<span class=w> </span>root<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>15</span>:11<span class=w> </span><span class=m>0</span><span class=w> </span>-&gt;<span class=w> </span>/dev/null
lrwx------<span class=w> </span><span class=m>1</span><span class=w> </span>root<span class=w> </span>root<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>15</span>:11<span class=w> </span><span class=m>1</span><span class=w> </span>-&gt;<span class=w> </span><span class=s1>&#39;socket:[31593]&#39;</span>
lrwx------<span class=w> </span><span class=m>1</span><span class=w> </span>root<span class=w> </span>root<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>15</span>:11<span class=w> </span><span class=m>2</span><span class=w> </span>-&gt;<span class=w> </span><span class=s1>&#39;socket:[31593]&#39;</span>
l-wx------<span class=w> </span><span class=m>1</span><span class=w> </span>root<span class=w> </span>root<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>02</span>:40<span class=w> </span><span class=m>3</span><span class=w> </span>-&gt;<span class=w> </span>/var/log/unattended-upgrades/unattended-upgrades-shutdown.log
lrwx------<span class=w> </span><span class=m>1</span><span class=w> </span>root<span class=w> </span>root<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>15</span>:11<span class=w> </span><span class=m>4</span><span class=w> </span>-&gt;<span class=w> </span><span class=s1>&#39;socket:[31652]&#39;</span>
lrwx------<span class=w> </span><span class=m>1</span><span class=w> </span>root<span class=w> </span>root<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>15</span>:11<span class=w> </span><span class=m>5</span><span class=w> </span>-&gt;<span class=w> </span><span class=s1>&#39;anon_inode:[eventfd]&#39;</span>
lrwx------<span class=w> </span><span class=m>1</span><span class=w> </span>root<span class=w> </span>root<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>15</span>:11<span class=w> </span><span class=m>6</span><span class=w> </span>-&gt;<span class=w> </span><span class=s1>&#39;anon_inode:[eventfd]&#39;</span>
lrwx------<span class=w> </span><span class=m>1</span><span class=w> </span>root<span class=w> </span>root<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>15</span>:11<span class=w> </span><span class=m>7</span><span class=w> </span>-&gt;<span class=w> </span><span class=s1>&#39;socket:[31657]&#39;</span>
l-wx------<span class=w> </span><span class=m>1</span><span class=w> </span>root<span class=w> </span>root<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>15</span>:11<span class=w> </span><span class=m>8</span><span class=w> </span>-&gt;<span class=w> </span>/run/systemd/inhibit/1.ref
lrwx------<span class=w> </span><span class=m>1</span><span class=w> </span>root<span class=w> </span>root<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>15</span>:11<span class=w> </span><span class=m>9</span><span class=w> </span>-&gt;<span class=w> </span><span class=s1>&#39;socket:[31658]&#39;</span>

$<span class=w> </span>sudo<span class=w> </span>ls<span class=w> </span>-l<span class=w> </span>/proc/873/fd/
lr-x------<span class=w> </span><span class=m>1</span><span class=w> </span>root<span class=w> </span>root<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>15</span>:11<span class=w> </span><span class=m>0</span><span class=w> </span>-&gt;<span class=w> </span>/dev/null
lrwx------<span class=w> </span><span class=m>1</span><span class=w> </span>root<span class=w> </span>root<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>15</span>:11<span class=w> </span><span class=m>1</span><span class=w> </span>-&gt;<span class=w> </span><span class=s1>&#39;socket:[31412]&#39;</span>
lrwx------<span class=w> </span><span class=m>1</span><span class=w> </span>root<span class=w> </span>root<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>15</span>:11<span class=w> </span><span class=m>2</span><span class=w> </span>-&gt;<span class=w> </span><span class=s1>&#39;socket:[31412]&#39;</span>
lrwx------<span class=w> </span><span class=m>1</span><span class=w> </span>root<span class=w> </span>root<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>02</span>:40<span class=w> </span><span class=m>3</span><span class=w> </span>-&gt;<span class=w> </span><span class=s1>&#39;socket:[31650]&#39;</span>
lrwx------<span class=w> </span><span class=m>1</span><span class=w> </span>root<span class=w> </span>root<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>15</span>:11<span class=w> </span><span class=m>4</span><span class=w> </span>-&gt;<span class=w> </span><span class=s1>&#39;anon_inode:[eventfd]&#39;</span>
lrwx------<span class=w> </span><span class=m>1</span><span class=w> </span>root<span class=w> </span>root<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>15</span>:11<span class=w> </span><span class=m>5</span><span class=w> </span>-&gt;<span class=w> </span><span class=s1>&#39;socket:[31663]&#39;</span>
lrwx------<span class=w> </span><span class=m>1</span><span class=w> </span>root<span class=w> </span>root<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>15</span>:11<span class=w> </span><span class=m>6</span><span class=w> </span>-&gt;<span class=w> </span><span class=s1>&#39;socket:[31664]&#39;</span>
</code></pre></div> <p>openSUSE需要安装包<code>sysvinit-tools</code>才能使用<code>pidof</code>命令。</p> <div class=highlight><pre><span></span><code>sudo<span class=w> </span>zypper<span class=w> </span><span class=k>in</span><span class=w> </span>sysvinit-tools
</code></pre></div> <p>由于openSUSE中pidof python3只返回一个process ID，所以可以简化命令行得到process ID的详细信息。</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>sudo<span class=w> </span>ls<span class=w> </span>-l<span class=w> </span>/proc/<span class=sb>`</span>pidof<span class=w> </span>python3<span class=sb>`</span>/fd/
lrwx------<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>23</span>:21<span class=w> </span><span class=m>0</span><span class=w> </span>-&gt;<span class=w> </span>/dev/pts/0
lrwx------<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>23</span>:21<span class=w> </span><span class=m>1</span><span class=w> </span>-&gt;<span class=w> </span>/dev/pts/0
lrwx------<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>23</span>:21<span class=w> </span><span class=m>2</span><span class=w> </span>-&gt;<span class=w> </span>/dev/pts/0
lr-x------<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>wheel<span class=w> </span><span class=m>64</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>23</span>:21<span class=w> </span><span class=m>3</span><span class=w> </span>-&gt;<span class=w> </span>/home/vagrant/test.txt
</code></pre></div> <p>参考：</p> <blockquote> <p>当键盘和鼠标等设备通过串口直接连接到计算机时，这种连接称为TTY。 伪终端pseudoterminal（缩写为“pty”）是一对提供双向通信通道的虚拟字符设备。 通道的一端称为主端master； 另一端称为从端slave。</p> <p><code>/dev/pts</code>表示与伪终端pseudoterminal的主端master或从端slave相关的master文件，操作系统将其保存为<code>/dev/ptmx</code>文件。 <code>telnet</code>和<code>ssh</code>等程序能够仿 端用户&gt; 与它们的交互，虽然本质上是与文件<code>/dev/ptmx</code>进行交互，但呈现给用户的却是好像运行在真正的终端窗口一样，从端的文件是主端的输入。</p> <p>伪终端进程在Linux中被存储在<code>/dev/pts/</code>目录下。<code>/dev/pts/</code>目录下的内容是一些特殊的目录，由Linux内核所创建。</p> <p>每个唯一的终端窗口都与<code>/dev/pts</code>系统中的一个Linux<code>pts</code>条目相关。</p> <p>下面返回的结果说明有2个远程终端连接到当前的机器。</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>ll<span class=w> </span>/dev/pts/
crw--w----.<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>tty<span class=w>  </span><span class=m>136</span>,<span class=w> </span><span class=m>0</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>23</span>:18<span class=w> </span><span class=m>0</span>
crw--w----.<span class=w> </span><span class=m>1</span><span class=w> </span>vagrant<span class=w> </span>tty<span class=w>  </span><span class=m>136</span>,<span class=w> </span><span class=m>1</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>23</span>:48<span class=w> </span><span class=m>1</span>
c---------.<span class=w> </span><span class=m>1</span><span class=w> </span>root<span class=w>    </span>root<span class=w>   </span><span class=m>5</span>,<span class=w> </span><span class=m>2</span><span class=w> </span>Nov<span class=w> </span><span class=m>13</span><span class=w> </span><span class=m>10</span>:41<span class=w> </span>ptmx
</code></pre></div> <p>也可以通过<code>w</code>命令看到2个终端进程。</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>w
<span class=w> </span><span class=m>23</span>:55:05<span class=w> </span>up<span class=w> </span><span class=m>13</span>:14,<span class=w>  </span><span class=m>2</span><span class=w> </span>users,<span class=w>  </span>load<span class=w> </span>average:<span class=w> </span><span class=m>0</span>.00,<span class=w> </span><span class=m>0</span>.00,<span class=w> </span><span class=m>0</span>.00
USER<span class=w>     </span>TTY<span class=w>        </span>LOGIN@<span class=w>   </span>IDLE<span class=w>   </span>JCPU<span class=w>   </span>PCPU<span class=w> </span>WHAT
vagrant<span class=w>  </span>pts/0<span class=w>     </span><span class=m>10</span>:51<span class=w>   </span><span class=m>37</span>:03<span class=w>   </span><span class=m>0</span>.05s<span class=w>  </span><span class=m>0</span>.05s<span class=w> </span>-bash
vagrant<span class=w>  </span>pts/1<span class=w>     </span><span class=m>23</span>:48<span class=w>    </span><span class=m>0</span>.00s<span class=w>  </span><span class=m>0</span>.03s<span class=w>  </span><span class=m>0</span>.00s<span class=w> </span>w
</code></pre></div> <p>单个伪终端pseudoterminal可以同时接收来自不同的程序的输出。 多个程序同时对一个伪终端pseudoterminal进行读取会引起混淆。</p> <p>存储在<code>/dev/pts</code>目录中的文件是抽象文件而不是真实文件，是伪终端中执行程序时临时存储的数据。 打开<code>/dev/pts</code>下的文件通常没有什么实际意义。</p> </blockquote> <h2 id=6>6.重定向和管道<a class=headerlink href=#6 title="Permanent link"> ¶</a></h2> <h3 id=61>6.1.输入重定向<a class=headerlink href=#61 title="Permanent link"> ¶</a></h3> <p>常用命令格式：</p> <ul> <li><code>command &lt; file</code>：将指定文件<code>file</code>作为命令的输入设备。</li> <li><code>command &lt;&lt; delimiter</code>：表示从标准输入设备（键盘）中读入，直到遇到分界符<code>delimiter</code>停止（读入的数据不包括分界符），这里的分界符可以理解为自定义的字符串。</li> <li><code>command &lt; file1 &gt; file2</code>：将<code>file1</code>作为命令的输入设备，该命令的执行结果输出到<code>file2</code>中。</li> </ul> <div class=highlight><pre><span></span><code><span class=c1># 输出文件file.py内容（输入设备是键盘）</span>
$<span class=w> </span>cat<span class=w> </span>file.py

<span class=c1># 输出文件file.py内容（输入设备是文件file.py）</span>
$<span class=w> </span>cat<span class=w> </span>&lt;<span class=w> </span>file.py

<span class=c1># 指定分界符（这里是EOF），读取键盘输入内容，直到遇到指定分界符为止，将所读取的内容输出到文件file.py。</span>
$<span class=w> </span>cat<span class=w> </span>&gt;<span class=w> </span>file.py<span class=w> </span><span class=s>&lt;&lt;EOF</span>
<span class=s>import time</span>
<span class=s>f = open(&#39;test.txt&#39;, &#39;r&#39;)</span>
<span class=s>time.sleep(1000)</span>
<span class=s>EOF</span>

<span class=c1># 读取文件file.py内容，输出到新文件new.py。</span>
$<span class=w> </span>cat<span class=w> </span>&lt;<span class=w> </span>file.py<span class=w> </span>&gt;<span class=w> </span>new.py
</code></pre></div> <h3 id=62>6.2.输出重定向<a class=headerlink href=#62 title="Permanent link"> ¶</a></h3> <p>输出重定向分为标准输出重定向和错误输出重定向两种。</p> <p>常用命令格式：</p> <ul> <li><code>command &gt; file</code>：将命令<code>command</code>执行的标准输出结果重定向输出到指定的文件<code>file</code>中，如果该文件已包含数据，会清空原有数据，再写入新数据。</li> <li><code>command 2&gt; file</code>：将命令<code>command</code>执行的错误输出结果重定向到指定的文件<code>file</code>中，如果该文件中已包含数据，会清空原有数据，再写入新数据。</li> <li><code>command &gt;&gt; file</code>：将命令<code>command</code>执行的标准输出结果重定向输出到指定的文件<code>file</code>中，如果该文件已包含数据，新数据将追加写入到原有内容的后面。</li> <li><code>command 2&gt;&gt; file</code>：将命令<code>command</code>执行的错误输出结果重定向到指定的文件<code>file</code>中，如果该文件中已包含数据，新数据将追加写入到原有内容的后面。</li> <li><code>command &gt;&gt; file 2&gt;&amp;1</code> 或者 <code>command &amp;&gt;&gt; file</code>：将标准输出或者错误输出写入到指定文件<code>file</code>中，如果该文件中已包含数据，新数据将追加写入到原有内容的后面。</li> </ul> <p>注意：上面的<code>file</code>可以是一个普通文件，也可以使用一个特殊的文件<code>/dev/null</code>。<code>/dev/null</code>并不保存数据，被写入<code>/dev/null</code>的数据最终都会丢失。</p> <p>举例：2个python文件存在，其他2个无扩展名的文件不存在。</p> <div class=highlight><pre><span></span><code>ls<span class=w> </span>file.py<span class=w> </span>&gt;<span class=w> </span>out
ls<span class=w> </span>file<span class=w> </span><span class=m>2</span>&gt;<span class=w> </span>out.err

ls<span class=w> </span>new.py<span class=w> </span>&gt;&gt;<span class=w> </span>out
ls<span class=w> </span>new<span class=w> </span><span class=m>2</span>&gt;&gt;<span class=w> </span>out.err
</code></pre></div> <p>可以得到预期的结果。两个错误记录都被追加到<code>out.err</code>文件中。两个成功执行的命令的返回结果也输出到<code>out</code>文件中。</p> <div class=highlight><pre><span></span><code><span class=nv>$ccat</span><span class=w> </span>out
file.py
new.py

$<span class=w> </span>cat<span class=w> </span>out.err
ls:<span class=w> </span>cannot<span class=w> </span>access<span class=w> </span><span class=s1>&#39;file&#39;</span>:<span class=w> </span>No<span class=w> </span>such<span class=w> </span>file<span class=w> </span>or<span class=w> </span>directory
ls:<span class=w> </span>cannot<span class=w> </span>access<span class=w> </span><span class=s1>&#39;new&#39;</span>:<span class=w> </span>No<span class=w> </span>such<span class=w> </span>file<span class=w> </span>or<span class=w> </span>directory
</code></pre></div> <p>上例命令也可以合并。</p> <div class=highlight><pre><span></span><code>ls<span class=w> </span>file.py<span class=w> </span>&gt;<span class=w> </span>out<span class=w> </span><span class=m>2</span>&gt;<span class=w> </span>out.err
ls<span class=w> </span>file<span class=w> </span>&gt;&gt;<span class=w> </span>out<span class=w> </span><span class=m>2</span>&gt;&gt;<span class=w> </span>out.err
</code></pre></div> <p><code>2&gt;&amp;1</code>格式举例：</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>ls<span class=w> </span>file<span class=w> </span>&gt;&gt;<span class=w> </span>out.txt<span class=w> </span><span class=m>2</span>&gt;<span class=p>&amp;</span><span class=m>1</span>
$<span class=w> </span>cat<span class=w> </span>out.txt
ls:<span class=w> </span>cannot<span class=w> </span>access<span class=w> </span><span class=s1>&#39;file&#39;</span>:<span class=w> </span>No<span class=w> </span>such<span class=w> </span>file<span class=w> </span>or<span class=w> </span>directory

$<span class=w> </span>ls<span class=w> </span>file.py<span class=w> </span><span class=p>&amp;</span>&gt;&gt;<span class=w> </span>out.txt
$<span class=w> </span>cat<span class=w> </span>out.txt
ls:<span class=w> </span>cannot<span class=w> </span>access<span class=w> </span><span class=s1>&#39;file&#39;</span>:<span class=w> </span>No<span class=w> </span>such<span class=w> </span>file<span class=w> </span>or<span class=w> </span>directory
file.py
</code></pre></div> <h3 id=63>6.3.特殊重定向<a class=headerlink href=#63 title="Permanent link"> ¶</a></h3> <p>格式：<code>command1 &lt; &lt;(command2)</code></p> <div class=highlight><pre><span></span><code>tr<span class=w> </span><span class=s1>&#39;a-z&#39;</span><span class=w> </span><span class=s1>&#39;A-Z&#39;</span><span class=w> </span>&lt;<span class=w> </span>&lt;<span class=o>(</span><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;Hello World&quot;</span><span class=o>)</span>
</code></pre></div> <p>应用：修改密码</p> <p>密码保存在<code>passwd.txt</code>文件中，并严格限制改文件的权限。 通过参数<code>--stdin</code>实现模拟键盘输入操作输入用户名。</p> <p>在Rocky中可以使用<code>--stdin</code>参数。</p> <div class=highlight><pre><span></span><code>passwd<span class=w> </span>--stdin<span class=w> </span>vagrant<span class=w> </span>&lt;<span class=w> </span>passwd.txt
</code></pre></div> <p>在openSUSE和Ubuntu中，<code>--stdin</code>参数无法识别。可以改用下面的方法。</p> <div class=highlight><pre><span></span><code><span class=nb>echo</span><span class=w> </span>passwd.txt<span class=w> </span><span class=p>|</span><span class=w> </span>chpasswd
</code></pre></div> <p>其中passwd.txt的格式为<code>username:password</code>。</p> <p>参考：</p> <blockquote> <p>Here-document(Here-doc)：输入的文本块重定向至标准输入流，直至遇到特殊的文件结束标记符为止（文件结束标记符可以是任意的唯一的字符串，但大部分人都默认使用 <code>EOF</code>）。</p> <div class=highlight><pre><span></span><code>cat<span class=w> </span><span class=s>&lt;&lt;EOF</span>
<span class=s>This is line1</span>
<span class=s>Another line</span>
<span class=s>Finally 3rd line</span>
<span class=s>EOF</span>
</code></pre></div> <p>文本块中含有tab键。</p> <div class=highlight><pre><span></span><code>cat<span class=w> </span><span class=s>&lt;&lt;-EOF</span>
<span class=s>    This message is indented</span>
<span class=s>        This message is double indented</span>
<span class=s>EOF</span>
</code></pre></div> <p>文本块中含有参数。</p> <div class=highlight><pre><span></span><code>cat<span class=w> </span><span class=s>&lt;&lt;EOF</span>
<span class=s>Hello ${USER}</span>
<span class=s>EOF</span>
</code></pre></div> <p>文本块中含有命令。</p> <div class=highlight><pre><span></span><code>cat<span class=w> </span><span class=s>&lt;&lt;EOF</span>
<span class=s>Hello! It is currently: $(date)</span>
<span class=s>EOF</span>
</code></pre></div> <p>Here-string：与<code>Here-doc</code>相似，但是它只有一个字符串，或者几个被引号括起来的字符串。</p> <p>基本用法。</p> <div class=highlight><pre><span></span><code>cat<span class=w> </span><span class=o>&lt;&lt;&lt;</span><span class=w> </span><span class=s2>&quot;This is a string&quot;</span>
</code></pre></div> <p>使用变量。</p> <div class=highlight><pre><span></span><code><span class=nv>WELCOME_MESSAGE</span><span class=o>=</span><span class=s2>&quot;Welcome!&quot;</span>
cat<span class=w> </span><span class=o>&lt;&lt;&lt;</span><span class=w> </span><span class=nv>$WELCOME_MESSAGE</span>
</code></pre></div> <p>使用参数。</p> <div class=highlight><pre><span></span><code>cat<span class=w> </span><span class=o>&lt;&lt;&lt;</span><span class=w> </span><span class=s2>&quot;Welcome! </span><span class=si>${</span><span class=nv>USER</span><span class=si>}</span><span class=s2>&quot;</span>
</code></pre></div> </blockquote> <h2 id=7>7.管道<a class=headerlink href=#7 title="Permanent link"> ¶</a></h2> <p>Linux中使用竖线<code>|</code>连接多个命令，这被称为管道符。</p> <p>当在两个命令之间设置管道时，管道符<code>|</code>左边命令的输出就变成了右边命令的输入。管道符<code>|</code>左边正确的输出才能被右边处理，管道符<code>|</code>右边不能处理左边错误的输出。</p> <p>重定向和管道的区别：重定向操作符<code>&gt;</code>将命令与文件连接起来，用文件来接收命令的输出；而管道符<code>|</code>将命令与命令连接起来，用右边命令来接收左边命令的输出。</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>ls<span class=w> </span><span class=p>|</span><span class=w> </span>tr<span class=w> </span><span class=s1>&#39;a-z&#39;</span><span class=w> </span><span class=s1>&#39;A-Z&#39;</span>
BIN
F1.TXT
F2.TXT
FILE.PY
NEW.PY
OUT
OUT.ERR
TEST.TXT
</code></pre></div> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top data-md-state=hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg> Back to top </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../01-fundamentals/ class="md-footer__link md-footer__link--prev" aria-label="Previous: 第一章 Linux基础" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> 第一章 Linux基础 </div> </div> </a> <a href=../03-identity-security/ class="md-footer__link md-footer__link--next" aria-label="Next: 第三章 身份与安全" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> 第三章 身份与安全 </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.instant", "navigation.top"], "search": "../../../assets/javascripts/workers/search.fcfe8b6d.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": null}</script> <script src=../../../assets/javascripts/bundle.b1047164.min.js></script> </body> </html>