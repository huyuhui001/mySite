<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://huyuhui001.github.io/mySite/linux/SRE/01-fundamentals/ rel=canonical><link rel=icon href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.3.0, mkdocs-material-7.3.6"><title>Linux Fundamentals - UPSkilling</title><link rel=stylesheet href=../../../assets/stylesheets/main.a57b2b03.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.3f5d1f46.min.css><meta name=theme-color content=#009485><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style><link rel=stylesheet href=../../../extra.css></head> <body dir=ltr data-md-color-scheme data-md-color-primary=teal data-md-color-accent=green> <script>function __prefix(e){return new URL("../../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#linux class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title=UPSkilling class="md-header__button md-logo" aria-label=UPSkilling data-md-component=logo> <img src=../../../assets/logo.jpg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> UPSkilling </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Linux Fundamentals </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/huyuhui001/mySite title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> huyuhui001/mySite </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> UPSkilling </a> </li> <li class=md-tabs__item> <a href=../../Administration/01/ class="md-tabs__link md-tabs__link--active"> Linux </a> </li> <li class=md-tabs__item> <a href=../../../k8s/installation/single-local/ class=md-tabs__link> Kubernetes </a> </li> <li class=md-tabs__item> <a href=../../../python/Foundation/ch00/ class=md-tabs__link> Python </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title=UPSkilling class="md-nav__button md-logo" aria-label=UPSkilling data-md-component=logo> <img src=../../../assets/logo.jpg alt=logo> </a> UPSkilling </label> <div class=md-nav__source> <a href=https://github.com/huyuhui001/mySite title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> huyuhui001/mySite </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_1 type=checkbox id=__nav_1> <label class=md-nav__link for=__nav_1> UPSkilling <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=UPSkilling data-md-level=1> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> UPSkilling </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> Welcome </a> </li> <li class=md-nav__item> <a href=../../../about/ class=md-nav__link> About </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2> Linux <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Linux data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Linux </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_1 type=checkbox id=__nav_2_1> <label class=md-nav__link for=__nav_2_1> SUSE Linux Administration <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="SUSE Linux Administration" data-md-level=2> <label class=md-nav__title for=__nav_2_1> <span class="md-nav__icon md-icon"></span> SUSE Linux Administration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Administration/01/ class=md-nav__link> Linux File System Overview </a> </li> <li class=md-nav__item> <a href=../../Administration/02/ class=md-nav__link> Useful Commands </a> </li> <li class=md-nav__item> <a href=../../Administration/03/ class=md-nav__link> Shell </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_2 type=checkbox id=__nav_2_2> <label class=md-nav__link for=__nav_2_2> SUSE Enterprise Storage Foundation <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="SUSE Enterprise Storage Foundation" data-md-level=2> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> SUSE Enterprise Storage Foundation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../SES/linux_ses_memo/ class=md-nav__link> SUSE Enterprise Storage Foundation </a> </li> <li class=md-nav__item> <a href=../../SES/linux_ses_demo/ class=md-nav__link> SUSE Enterprise Storage Basic Operation </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_3 type=checkbox id=__nav_2_3 checked> <label class=md-nav__link for=__nav_2_3> Linux SRE <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Linux SRE" data-md-level=2> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> Linux SRE </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Linux Fundamentals <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Linux Fundamentals </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#_1 class=md-nav__link> 系统环境 </a> <nav class=md-nav aria-label=系统环境> <ul class=md-nav__list> <li class=md-nav__item> <a href=#rocky class=md-nav__link> Rocky </a> </li> <li class=md-nav__item> <a href=#ubuntu class=md-nav__link> Ubuntu </a> </li> <li class=md-nav__item> <a href=#opensuse class=md-nav__link> openSUSE </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_2 class=md-nav__link> 常用命令 </a> <nav class=md-nav aria-label=常用命令> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_3 class=md-nav__link> 修改提示符风格 </a> </li> <li class=md-nav__item> <a href=#linux_1 class=md-nav__link> Linux的内外部命令 </a> </li> <li class=md-nav__item> <a href=#cpu class=md-nav__link> CPU信息 </a> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> 内存使用状态 </a> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> 硬盘和分区情况 </a> </li> <li class=md-nav__item> <a href=#_6 class=md-nav__link> 系统架构信息 </a> </li> <li class=md-nav__item> <a href=#_7 class=md-nav__link> 内核版本 </a> </li> <li class=md-nav__item> <a href=#_8 class=md-nav__link> 操作系统版本 </a> </li> <li class=md-nav__item> <a href=#_9 class=md-nav__link> 日期和时间 </a> </li> <li class=md-nav__item> <a href=#_10 class=md-nav__link> 用户登录信息 </a> </li> <li class=md-nav__item> <a href=#_11 class=md-nav__link> 会话管理工具 </a> </li> <li class=md-nav__item> <a href=#echo class=md-nav__link> echo命令 </a> </li> <li class=md-nav__item> <a href=#man class=md-nav__link> man命令 </a> </li> <li class=md-nav__item> <a href=#lang class=md-nav__link> 语言环境LANG </a> </li> <li class=md-nav__item> <a href=#_12 class=md-nav__link> 符号$用法 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_13 class=md-nav__link> 文件系统 </a> <nav class=md-nav aria-label=文件系统> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_14 class=md-nav__link> 主要目录 </a> </li> <li class=md-nav__item> <a href=#_15 class=md-nav__link> 七种不同类型的文件 </a> <nav class=md-nav aria-label=七种不同类型的文件> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_16 class=md-nav__link> 链接类型 </a> </li> <li class=md-nav__item> <a href=#_17 class=md-nav__link> 设备文件 </a> </li> <li class=md-nav__item> <a href=#_18 class=md-nav__link> 练习 </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3> Kubernetes <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Kubernetes data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Kubernetes </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_1 type=checkbox id=__nav_3_1> <label class=md-nav__link for=__nav_3_1> Installation <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Installation data-md-level=2> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> Installation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/installation/single-local/ class=md-nav__link> Single Node Installation </a> </li> <li class=md-nav__item> <a href=../../../k8s/installation/multiple-local/ class=md-nav__link> Multiple Nodes Installation </a> </li> <li class=md-nav__item> <a href=../../../k8s/installation/aliyun-ubuntu/ class=md-nav__link> Installation on Aliyun ECS </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_2 type=checkbox id=__nav_3_2> <label class=md-nav__link for=__nav_3_2> Docker <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Docker data-md-level=2> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> Docker </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/foundamentals/docker/ class=md-nav__link> Fundamentals </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3 type=checkbox id=__nav_3_3> <label class=md-nav__link for=__nav_3_3> Foundamentals <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Foundamentals data-md-level=2> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> Foundamentals </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/foundamentals/memo/ class=md-nav__link> Memo </a> </li> <li class=md-nav__item> <a href=../../../k8s/foundamentals/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../k8s/foundamentals/basics/ class=md-nav__link> kubectl basics </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_4 type=checkbox id=__nav_3_4> <label class=md-nav__link for=__nav_3_4> Core Kubernetes <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Core Kubernetes" data-md-level=2> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> Core Kubernetes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/foundamentals/pod/ class=md-nav__link> Pod </a> </li> <li class=md-nav__item> <a href=../../../k8s/foundamentals/deployment/ class=md-nav__link> Deployment </a> </li> <li class=md-nav__item> <a href=../../../k8s/foundamentals/service/ class=md-nav__link> Service </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_5 type=checkbox id=__nav_3_5> <label class=md-nav__link for=__nav_3_5> Application Modelling <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Application Modelling" data-md-level=2> <label class=md-nav__title for=__nav_3_5> <span class="md-nav__icon md-icon"></span> Application Modelling </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/foundamentals/namespace/ class=md-nav__link> Namespace </a> </li> <li class=md-nav__item> <a href=../../../k8s/foundamentals/statefulset/ class=md-nav__link> StatefulSet </a> </li> <li class=md-nav__item> <a href=../../../k8s/foundamentals/daemonset/ class=md-nav__link> DaemonSet </a> </li> <li class=md-nav__item> <a href=../../../k8s/foundamentals/job/ class=md-nav__link> Job and Cronjob </a> </li> <li class=md-nav__item> <a href=../../../k8s/foundamentals/configuration/ class=md-nav__link> Configuration </a> </li> <li class=md-nav__item> <a href=../../../k8s/foundamentals/secrets/ class=md-nav__link> Secrets </a> </li> <li class=md-nav__item> <a href=../../../k8s/foundamentals/persistence/ class=md-nav__link> Persistence </a> </li> <li class=md-nav__item> <a href=../../../k8s/foundamentals/rbac/ class=md-nav__link> Role Based Access Control (RBAC) </a> </li> <li class=md-nav__item> <a href=../../../k8s/foundamentals/ingress/ class=md-nav__link> Ingress </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_6 type=checkbox id=__nav_3_6> <label class=md-nav__link for=__nav_3_6> Advanced Kubernetes <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Advanced Kubernetes" data-md-level=2> <label class=md-nav__title for=__nav_3_6> <span class="md-nav__icon md-icon"></span> Advanced Kubernetes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/foundamentals/scheduling/ class=md-nav__link> Scheduling </a> </li> <li class=md-nav__item> <a href=../../../k8s/foundamentals/hpa/ class=md-nav__link> Horizontal Pod Autoscaling </a> </li> <li class=md-nav__item> <a href=../../../k8s/foundamentals/policy/ class=md-nav__link> Policy </a> </li> <li class=md-nav__item> <a href=../../../k8s/foundamentals/networkpolicy/ class=md-nav__link> Network Policy </a> </li> <li class=md-nav__item> <a href=../../../k8s/foundamentals/clustermgt/ class=md-nav__link> Cluster Management </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_7 type=checkbox id=__nav_3_7> <label class=md-nav__link for=__nav_3_7> Operating Kubernetes <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Operating Kubernetes" data-md-level=2> <label class=md-nav__title for=__nav_3_7> <span class="md-nav__icon md-icon"></span> Operating Kubernetes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/foundamentals/troubleshooting/ class=md-nav__link> Troubleshooting </a> </li> <li class=md-nav__item> <a href=../../../k8s/foundamentals/healthcheck/ class=md-nav__link> Health Check </a> </li> <li class=md-nav__item> <a href=../../../k8s/foundamentals/helming/ class=md-nav__link> Helming </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_8 type=checkbox id=__nav_3_8> <label class=md-nav__link for=__nav_3_8> Case Study <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Case Study" data-md-level=2> <label class=md-nav__title for=__nav_3_8> <span class="md-nav__icon md-icon"></span> Case Study </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/foundamentals/casestudy-operation-resources/ class=md-nav__link> Operations on Resources </a> </li> <li class=md-nav__item> <a href=../../../k8s/foundamentals/casestudy-health-check/ class=md-nav__link> Health Check </a> </li> <li class=md-nav__item> <a href=../../../k8s/foundamentals/casestudy-calico/ class=md-nav__link> Calico Installation </a> </li> <li class=md-nav__item> <a href=../../../k8s/foundamentals/kyma/ class=md-nav__link> Kyma </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_9 type=checkbox id=__nav_3_9> <label class=md-nav__link for=__nav_3_9> Demos <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Demos data-md-level=2> <label class=md-nav__title for=__nav_3_9> <span class="md-nav__icon md-icon"></span> Demos </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/demo/cap_on_kyma/ class=md-nav__link> Build CAP application on Kyma </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4> Python <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Python data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Python </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_1 type=checkbox id=__nav_4_1> <label class=md-nav__link for=__nav_4_1> Python基础 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Python基础 data-md-level=2> <label class=md-nav__title for=__nav_4_1> <span class="md-nav__icon md-icon"></span> Python基础 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../python/Foundation/ch00/ class=md-nav__link> 安装 </a> </li> <li class=md-nav__item> <a href=../../../python/Foundation/ch01/ class=md-nav__link> 语言基础 </a> </li> <li class=md-nav__item> <a href=../../../python/Foundation/ch02/ class=md-nav__link> 打包Packing和拆包Unpacking </a> </li> <li class=md-nav__item> <a href=../../../python/Foundation/ch03/ class=md-nav__link> 函数及文件 </a> </li> <li class=md-nav__item> <a href=../../../python/Foundation/ch04/ class=md-nav__link> 面向对象概念 </a> </li> <li class=md-nav__item> <a href=../../../python/Foundation/ch05/ class=md-nav__link> 面向对象特性 </a> </li> <li class=md-nav__item> <a href=../../../python/Foundation/Algorithms/ class=md-nav__link> 数据结构和算法 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_2 type=checkbox id=__nav_4_2> <label class=md-nav__link for=__nav_4_2> Python数据分析基础 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Python数据分析基础 data-md-level=2> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Python数据分析基础 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../python/DataAnalysis/ch01/ class=md-nav__link> NumPy基础 </a> </li> <li class=md-nav__item> <a href=../../../python/DataAnalysis/ch10/ class=md-nav__link> NumPy进阶 </a> </li> <li class=md-nav__item> <a href=../../../python/DataAnalysis/ch02/ class=md-nav__link> Pandas入门 </a> </li> <li class=md-nav__item> <a href=../../../python/DataAnalysis/ch03/ class=md-nav__link> 数据载入、存储及文件格式 </a> </li> <li class=md-nav__item> <a href=../../../python/DataAnalysis/ch04/ class=md-nav__link> 数据清洗与准备 </a> </li> <li class=md-nav__item> <a href=../../../python/DataAnalysis/ch05/ class=md-nav__link> 数据规整：连接、联合与重塑 </a> </li> <li class=md-nav__item> <a href=../../../python/DataAnalysis/ch06/ class=md-nav__link> 绘图与可视化 </a> </li> <li class=md-nav__item> <a href=../../../python/DataAnalysis/ch07/ class=md-nav__link> 数据聚合与分组操作 </a> </li> <li class=md-nav__item> <a href=../../../python/DataAnalysis/ch08/ class=md-nav__link> 时间序列 </a> </li> <li class=md-nav__item> <a href=../../../python/DataAnalysis/ch09/ class=md-nav__link> 高阶pandas </a> </li> <li class=md-nav__item> <a href=../../../python/DataAnalysis/ch11/ class=md-nav__link> Python建模库介绍 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3 type=checkbox id=__nav_4_3> <label class=md-nav__link for=__nav_4_3> Demos <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Demos data-md-level=2> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> Demos </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../python/Demo/CourseSystem/ class=md-nav__link> 选课系统 </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#_1 class=md-nav__link> 系统环境 </a> <nav class=md-nav aria-label=系统环境> <ul class=md-nav__list> <li class=md-nav__item> <a href=#rocky class=md-nav__link> Rocky </a> </li> <li class=md-nav__item> <a href=#ubuntu class=md-nav__link> Ubuntu </a> </li> <li class=md-nav__item> <a href=#opensuse class=md-nav__link> openSUSE </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_2 class=md-nav__link> 常用命令 </a> <nav class=md-nav aria-label=常用命令> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_3 class=md-nav__link> 修改提示符风格 </a> </li> <li class=md-nav__item> <a href=#linux_1 class=md-nav__link> Linux的内外部命令 </a> </li> <li class=md-nav__item> <a href=#cpu class=md-nav__link> CPU信息 </a> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> 内存使用状态 </a> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> 硬盘和分区情况 </a> </li> <li class=md-nav__item> <a href=#_6 class=md-nav__link> 系统架构信息 </a> </li> <li class=md-nav__item> <a href=#_7 class=md-nav__link> 内核版本 </a> </li> <li class=md-nav__item> <a href=#_8 class=md-nav__link> 操作系统版本 </a> </li> <li class=md-nav__item> <a href=#_9 class=md-nav__link> 日期和时间 </a> </li> <li class=md-nav__item> <a href=#_10 class=md-nav__link> 用户登录信息 </a> </li> <li class=md-nav__item> <a href=#_11 class=md-nav__link> 会话管理工具 </a> </li> <li class=md-nav__item> <a href=#echo class=md-nav__link> echo命令 </a> </li> <li class=md-nav__item> <a href=#man class=md-nav__link> man命令 </a> </li> <li class=md-nav__item> <a href=#lang class=md-nav__link> 语言环境LANG </a> </li> <li class=md-nav__item> <a href=#_12 class=md-nav__link> 符号$用法 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_13 class=md-nav__link> 文件系统 </a> <nav class=md-nav aria-label=文件系统> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_14 class=md-nav__link> 主要目录 </a> </li> <li class=md-nav__item> <a href=#_15 class=md-nav__link> 七种不同类型的文件 </a> <nav class=md-nav aria-label=七种不同类型的文件> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_16 class=md-nav__link> 链接类型 </a> </li> <li class=md-nav__item> <a href=#_17 class=md-nav__link> 设备文件 </a> </li> <li class=md-nav__item> <a href=#_18 class=md-nav__link> 练习 </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/huyuhui001/mySite/edit/main/docs/linux/SRE/01-fundamentals.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <h1 id=linux>Linux 基础<a class=headerlink href=#linux title="Permanent link"> ¶</a></h1> <h2 id=_1>系统环境<a class=headerlink href=#_1 title="Permanent link"> ¶</a></h2> <h3 id=rocky>Rocky<a class=headerlink href=#rocky title="Permanent link"> ¶</a></h3> <p>使用版本：<code>Rocky 9.0</code>。</p> <p>从网站下载Rocky系统ISO镜像： <div class=highlight><pre><span></span><code>https://www.rockylinux.org/download/
</code></pre></div></p> <p>通过<code>wget</code>命令下载Rocky系统ISO镜像。 <div class=highlight><pre><span></span><code>wget https://download.rockylinux.org/pub/rocky/9.0/isos/x86_64/Rocky-9.0-x86_64-dvd.iso
</code></pre></div></p> <p>安装时我选择了激活<code>root</code>用户，选择了Server模式安装（没有GUI）。</p> <p>以<code>root</code>登录，执行下面命令修改<code>sudo</code>权限。 <div class=highlight><pre><span></span><code>visudo
</code></pre></div> 并激活下面一行（不设密码，方便练习）： <div class=highlight><pre><span></span><code>%wheel  ALL=(ALL)       NOPASSWD: ALL
</code></pre></div></p> <p>创建用户<code>vagrant</code>，并设置<code>wheel</code>为主要组和修改密码。 <div class=highlight><pre><span></span><code>adduser vagrant
usermod -g wheel vagrant
passwd vagrant
</code></pre></div></p> <p>设定hostname（包括别名），并查看结果。 <div class=highlight><pre><span></span><code>hostnamectl set-hostname --static &quot;rocky9&quot;
hostnamectl set-hostname --pretty &quot;rocky9&quot;

hostnamectl
cat /etc/hostname
</code></pre></div></p> <div class="admonition info"> <p class=admonition-title>Info</p> <p>由systemd控制的主机名的服务配置信息：<code>/usr/lib/systemd/system/systemd-hostnamed.service</code></p> </div> <p>Rocky的软件源的配置信息保存在目录<code>/etc/yum.repos.d/</code>下。如果访问默认源比较慢，可以更新阿里源或者科大源。</p> <p>更换阿里源。 <div class=highlight><pre><span></span><code>sed -e &#39;s|^mirrorlist=|#mirrorlist=|g&#39; \
    -e &#39;s|^#baseurl=http://dl.rockylinux.org/$contentdir|baseurl=https://mirrors.aliyun.com/rockylinux|g&#39; \
    -i.bak \
    /etc/yum.repos.d/Rocky-*.repo
</code></pre></div> 更换科大源。 <div class=highlight><pre><span></span><code>sed -e &#39;s|^mirrorlist=|#mirrorlist=|g&#39; \
    -e &#39;s|^#baseurl=http://dl.rockylinux.org/$contentdir|baseurl=https://mirrors.ustc.edu.cn/rocky|g&#39; \
    -i.bak \
    /etc/yum.repos.d/rocky-extras.repo \
    /etc/yum.repos.d/rocky.repo
</code></pre></div></p> <p>刷新缓存。 <div class=highlight><pre><span></span><code>dnf makecache
</code></pre></div></p> <h3 id=ubuntu>Ubuntu<a class=headerlink href=#ubuntu title="Permanent link"> ¶</a></h3> <p>使用版本：<code>Ubuntu 2204</code>。</p> <p>设定root用户的密码。 <div class=highlight><pre><span></span><code>sudo passwd root
</code></pre></div></p> <p>通过安装时已创建的用户<code>vagrant</code>登录。执行下面命令修改<code>sudo</code>权限。 <div class=highlight><pre><span></span><code>sudo visudo
</code></pre></div> 添加<code>vagrant</code>到特权用户（Rocky和openSUSE不需要添加），并激活sudo一行（不设密码，方便练习）： <div class=highlight><pre><span></span><code># User privilege specification
root    ALL=(ALL:ALL) ALL
vagrant ALL=(ALL:ALL) ALL

# Allow members of group sudo to execute any command
sudo    ALL=(ALL:ALL) NOPASSWD: ALL
</code></pre></div></p> <p>修改用户<code>vagrant</code>的主要组为<code>sudo</code>。 <div class=highlight><pre><span></span><code>sudo usermod -g sudo vagrant
</code></pre></div></p> <p>修改主机名和别名。 <div class=highlight><pre><span></span><code>sudo hostnamectl set-hostname ubuntu2204
sudo hostnamectl set-hostname ubuntu2204 --pretty
</code></pre></div></p> <div class="admonition tips"> <p class=admonition-title>Tips</p> <p>如何处理<code>Username is not in the sudoers file. This incident will be reported</code>问题。</p> <p>如果没有初始化<code>root</code>用户的密码，且当前用户也无法执行<code>sudo</code>命令，可以通过下面步骤通过recovery救援模式进行恢复。</p> <ul> <li>按<code>shift</code>键开机，进入grub启动菜单。（VMWare也适用）</li> <li>向下移动高亮条，选择菜单<code>Advanced options for Ubuntu</code>，并确认回车。</li> <li>选择带有<code>recovery mode</code>的内核，确认回车。</li> <li>向下移动高亮条，选择菜单<code>root Drop to root shell prompt</code>，并确认回车。</li> <li>回车确认<code>press Enter for maintenance</code>。</li> <li>出现<code>root</code>的命令提示符后，执行命令<code>mount -o rw,remount /</code>。</li> <li>执行命令<code>passwd</code>给<code>root</code>设定密码。</li> <li>执行命令<code>adduser username sudo</code>把指定用户加入<code>sudo</code>组。</li> <li>执行命令<code>visudo</code>进行必要的修正或修改。</li> </ul> </div> <h3 id=opensuse>openSUSE<a class=headerlink href=#opensuse title="Permanent link"> ¶</a></h3> <p>使用版本：<code>Leap 15.4</code>。</p> <p>选择服务器模式安装，无图形界面。安装中不创建用户。</p> <p>创建用户<code>vagrant</code>，并设置<code>wheel</code>为主要组。 <div class=highlight><pre><span></span><code>useradd -m -g wheel -G root -c &quot;vagrant&quot; vagrant
passwd vagrant
</code></pre></div></p> <p>执行<code>visudo</code>命令，激活下面一行，添加<code>sudo</code>权限。 <div class=highlight><pre><span></span><code>%wheel ALL=(ALL) NOPASSWD: ALL
</code></pre></div></p> <p>修改主机名和别名。 <div class=highlight><pre><span></span><code>sudo hostnamectl set-hostname lizard
sudo hostnamectl set-hostname lizard --pretty
</code></pre></div></p> <h2 id=_2>常用命令<a class=headerlink href=#_2 title="Permanent link"> ¶</a></h2> <div class="admonition info"> <p class=admonition-title>Info</p> <p>默认当前操作用户为<code>vagrant</code>。</p> </div> <h3 id=_3>修改提示符风格<a class=headerlink href=#_3 title="Permanent link"> ¶</a></h3> <p>执行下面命令可以看到当前系统的命令提示符格式。 <div class=highlight><pre><span></span><code>echo $PS1
</code></pre></div> 各系统设置是有差异的。 <div class=highlight><pre><span></span><code># Rocky
[\u@\h \W]\$

# Ubuntu
\[\e]0;\u@\h: \w\a\]${debian_chroot:+($debian_chroot)}\[\033[01;32m\]\u@\h\[\033[00m\]:\[\033[01;34m\]\w\[\033[00m\]\$

# openSUSE
\u@\h:\w&gt;
</code></pre></div></p> <div class="admonition reference"> <p class=admonition-title>Reference</p> <p>bash可识别的转义序列有下面这些：</p> <ul> <li><code>\u</code> : 当前用户的账号名称</li> <li><code>\h</code> : 主机名第一部分</li> <li><code>\H</code> : 完整的主机名称</li> <li><code>\w</code> : 完整的工作目录名称（如 "/home/username/mywork"）</li> <li><code>\W</code> : 当前工作目录的"基名 (basename)"（如 "mywork")</li> <li><code>\t</code> : 显示时间为24小时格式，如：HH:MM:SS</li> <li><code>\T</code> : 显示时间为12小时格式</li> <li><code>\A</code> : 显示时间为24小时格式：HH:MM</li> <li><code>\@</code> : 带有 am/pm 的 12 小时制时间</li> <li><code>\d</code> : 代表日期，格式为weekday month date，例如："Mon Aug 1"</li> <li><code>\s</code> : shell 的名称（如 "bash")</li> <li><code>\v</code> : bash的版本（如 2.04）</li> <li><code>\V</code> : bash的版本（包括补丁级别）</li> <li><code>\n</code> : 换行符</li> <li><code>\r</code> : 回车符</li> <li><code>\\</code> : 反斜杠</li> <li><code>\a</code> : ASCII 响铃字符（也可以键入<code>07</code>）</li> <li><code>\e</code> : ASCII 转义字符（也可以键入<code>33</code>)</li> <li><code>\[</code> : 这个序列应该出现在不移动光标的字符序列（如颜色转义序列）之前。它使bash能够正确计算自动换行</li> <li><code>\]</code> : 这个序列应该出现在非打印字符序列之后</li> <li><code>\#</code> : 下达的第几个命令</li> <li><code>\$</code> : 提示字符，如果是root用户，提示符为<code>#</code> ，普通用户则为<code>$</code></li> </ul> </div> <p>在PS1中设置字符颜色的格式为：<code>[\e[F;Bm]........[\e[0m]</code>，其中<code>[\e[0m]</code>作为颜色设定的结束。 其中"F"为字体颜色，编号为30-37，"B"为背景颜色，编号为40-47。</p> <div class="admonition info"> <p class=admonition-title>Info</p> <p>颜色对照表:</p> <ul> <li>F:30 , B:40 : 黑色</li> <li>F:31 , B:41 : 红色</li> <li>F:32 , B:42 : 绿色</li> <li>F:33 , B:43 : 黄色</li> <li>F:34 , B:44 : 蓝色</li> <li>F:35 , B:45 : 紫红色</li> <li>F:36 , B:46 : 青蓝色</li> <li>F:37 , B:47 : 白色</li> </ul> </div> <p>以下面的PS1设定为例说明颜色设定。 <div class=highlight><pre><span></span><code>PS1=&quot;\[\e[37;40m\][\[\e[32;40m\]\u\[\e[37;40m\]@\h:\[\e[36;40m\]\w\[\e[0m\]]\$ &quot;
</code></pre></div> 拆解分析： <div class=highlight><pre><span></span><code>PS1=&quot;
  \[\e[37;40m\]  # 整个提示符区域前景白色，背景黑色
  [              # 显示字符[
  \[\e[32;40m\]  # 修饰后面的\u，前景绿色，背景黑色
  \u             # 显示当前用户的账号名称
  \[\e[37;40m\]  # 修饰后面的字符@和主机名
  @              # 显示字符@
  \h             # 显示主机名
  :              # 显示字符:
  \[\e[36;40m\]  # 修饰后面的\w，前景青蓝色，背景黑色
  \w             # 显示完整工作目录
  \[\e[0m\]      # 结束颜色设定
  ]              # 显示字符]
  \$&quot;            # 如果是root用户，提示符为# ，普通用户则为$
</code></pre></div></p> <p>对不同主机做不同设置： <div class=highlight><pre><span></span><code># Rocky
PS1=&quot;\[\e[37;40m\][\[\e[32;40m\]\u\[\e[37;40m\]@\h:\[\e[36;40m\]\w\[\e[0m\]]\$ &quot;

# Ubuntu
PS1=&quot;\[\e[37;40m\][\[\e[32;40m\]\u\[\e[33;40m\]@\h:\[\e[36;40m\]\w\[\e[0m\]]\$ &quot;

# openSUSE
PS1=&quot;\[\e[37;40m\][\[\e[32;40m\]\u\[\e[35;40m\]@\h:\[\e[36;40m\]\w\[\e[0m\]]\$ &quot;
</code></pre></div></p> <p>将上述PS1的设定，追加到当前用户的<code>~/.bashrc</code>文件末尾，以实现对当前用户的提示符风格做持久保存。</p> <h3 id=linux_1>Linux的内外部命令<a class=headerlink href=#linux_1 title="Permanent link"> ¶</a></h3> <p><em>内部命令</em> (internal command)实际上是shell程序的一部分，包含的是一些比较简单的linux系统命令，这些命令由shell程序识别并在shell程序内部完成运行，通常在linux系统加载运行时shell就被加载并驻留在系统内存中。</p> <p><em>外部命令</em> (external command)是linux系统中的实用程序部分，系统加载时并不随系统一起被加载到内存中，而是在需要时才将其调用内存。通常外部命令的实体并不包含在shell中，但是其命令执行过程是由shell程序控制的。</p> <p>比如：</p> <p>执行命令<code>type -t cp</code>，系统返回结果是<code>file</code>，外部命令。</p> <p>执行命令<code>type -t cd</code>，系统返回结果<code>builtin</code>，内部命令。</p> <p>执行命令<code>enable -a cp</code>，系统返回<code>-bash: enable: cp: not a shell builtin</code>，也可以判断是否为内部命令。</p> <p>对于内部命令，可以通过enable命令来启用或者禁用。 <div class=highlight><pre><span></span><code># 禁用cd命令
enable -n cd

# 查看所有被禁用的命令
enable -n

# 启用cd命令
enable cd
</code></pre></div></p> <p>对于命令，可以通过<code>whereis</code>命令来查看路径。 <div class=highlight><pre><span></span><code>whereis cp
whereis cd
</code></pre></div></p> <h3 id=cpu>CPU信息<a class=headerlink href=#cpu title="Permanent link"> ¶</a></h3> <div class=highlight><pre><span></span><code>lscpu
cat /proc/cpuinfo
</code></pre></div> <h3 id=_4>内存使用状态<a class=headerlink href=#_4 title="Permanent link"> ¶</a></h3> <div class=highlight><pre><span></span><code>free
cat /proc/meminfo
</code></pre></div> <h3 id=_5>硬盘和分区情况<a class=headerlink href=#_5 title="Permanent link"> ¶</a></h3> <div class=highlight><pre><span></span><code>lsblk
</code></pre></div> <p>openSUSE在VMWare默认安装的状态： <div class=highlight><pre><span></span><code>NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
sda      8:0    0  200G  0 disk 
├─sda1   8:1    0    8M  0 part 
├─sda2   8:2    0  198G  0 part /home
│                               /var
│                               /opt
│                               /usr/local
│                               /root
│                               /tmp
│                               /srv
│                               /boot/grub2/x86_64-efi
│                               /boot/grub2/i386-pc
│                               /.snapshots
│                               /
└─sda3   8:3    0    2G  0 part [SWAP]
sr0     11:0    1  3.8G  0 rom 
</code></pre></div></p> <p>Ubuntu在VMWare默认安装的状态： <div class=highlight><pre><span></span><code>NAME                      MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
loop0                       7:0    0 61.9M  1 loop /snap/core20/1405
loop1                       7:1    0 63.2M  1 loop /snap/core20/1623
loop2                       7:2    0 79.9M  1 loop /snap/lxd/22923
loop3                       7:3    0   48M  1 loop /snap/snapd/17029
loop4                       7:4    0  103M  1 loop /snap/lxd/23541
loop5                       7:5    0   48M  1 loop /snap/snapd/17336
sda                         8:0    0   50G  0 disk 
├─sda1                      8:1    0    1M  0 part 
├─sda2                      8:2    0    2G  0 part /boot
└─sda3                      8:3    0   48G  0 part 
  └─ubuntu--vg-ubuntu--lv 253:0    0   24G  0 lvm  /
sr0                        11:0    1  1.4G  0 rom 
</code></pre></div></p> <p>Rocky在VMWare默认安装的状态： <div class=highlight><pre><span></span><code>NAME        MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
sda           8:0    0   50G  0 disk 
├─sda1        8:1    0    1G  0 part /boot
└─sda2        8:2    0   49G  0 part 
  ├─rl-root 253:0    0 45.1G  0 lvm  /
  └─rl-swap 253:1    0  3.9G  0 lvm  [SWAP]
sr0          11:0    1  7.9G  0 rom
</code></pre></div></p> <h3 id=_6>系统架构信息<a class=headerlink href=#_6 title="Permanent link"> ¶</a></h3> <p><div class=highlight><pre><span></span><code>arch
</code></pre></div> openSUSE，Ubuntu和Rocky的返回结果都是<code>x86_64</code>。</p> <h3 id=_7>内核版本<a class=headerlink href=#_7 title="Permanent link"> ¶</a></h3> <p><div class=highlight><pre><span></span><code>uname -r
</code></pre></div> 三个发行版返回的结果不尽相同： <div class=highlight><pre><span></span><code># openSUSE
5.14.21-150400.24.21-default

# Ubuntu
5.15.0-52-generic

# Rocky
5.14.0-70.17.1.el9_0.x86_64
</code></pre></div></p> <h3 id=_8>操作系统版本<a class=headerlink href=#_8 title="Permanent link"> ¶</a></h3> <p><div class=highlight><pre><span></span><code>cat /etc/os-release
cat /etc/issue

# Rocky 9
sudo cat /etc/redhat-release
</code></pre></div> <div class=highlight><pre><span></span><code>lsb-release -a
lsb_release -cs
lsb_release -is
lsb_release -rs
</code></pre></div></p> <p>在openSUSE中，需要安装<code>lsb-release</code>包。执行<code>lsb-release -a</code>和<code>lsb_release -a</code>返回的结果是一样的。 <div class=highlight><pre><span></span><code>sudo zypper in lsb-release
</code></pre></div></p> <p>在Ubuntu中，需要安装<code>lsb-release</code>包。只能执行<code>lsb_release -a</code>。 <div class=highlight><pre><span></span><code>sudo apt install lsb-release
</code></pre></div></p> <p>在Rocky 9中，找不到<code>lsb-release</code>相关的包。</p> <h3 id=_9>日期和时间<a class=headerlink href=#_9 title="Permanent link"> ¶</a></h3> <p>显示默认格式的当前日期。 <div class=highlight><pre><span></span><code>date
</code></pre></div> 三个系统的默认日期格式略有不同。 <div class=highlight><pre><span></span><code># openSUSE
Mon 24 Oct 2022 09:28:06 AM CST

# Ubuntu
Mon Oct 24 01:28:09 AM UTC 2022

# Rocky
Mon Oct 24 09:24:01 AM CST 2022
</code></pre></div></p> <p>显示自1970-01-01 00:00:00 UTC到当前的秒数。 <div class=highlight><pre><span></span><code>date +%s
</code></pre></div></p> <p>将上一命令中的描述转换为系统默认日期格式。 <div class=highlight><pre><span></span><code>date -d @`date +%s`
date --date=@&#39;1666575347&#39;
</code></pre></div></p> <p>显示硬件时钟。</p> <p><code>hwclock</code> 也被称为 Real Time Clock (RTC)。</p> <p>在Rocky9中，<code>clock</code>有一个软连接指向<code>hwclock</code>：<code>/usr/sbin/clock -&gt; hwclock</code>。在openSUSE和Ubuntu中只有<code>hwclock</code>。 <div class=highlight><pre><span></span><code>ll /usr/sbin/clock
ll /usr/sbin/hwclock
</code></pre></div></p> <p>读取RTC时间。 <div class=highlight><pre><span></span><code>sudo hwclock --get
sudo hwclock -r
</code></pre></div></p> <p>校准时间：</p> <ul> <li><code>-s, –hctosys</code> : 以RTC硬件时间来校准系统时间。</li> <li><code>-w, –systohoc</code> : 以系统时间来校准RTC硬件时间。</li> </ul> <p>显示当前系统时区。 <div class=highlight><pre><span></span><code>ll /etc/localtime
</code></pre></div> 系统可能会返回不同结果，例如： <div class=highlight><pre><span></span><code>/etc/localtime -&gt; /usr/share/zoneinfo/Asia/Shanghai
/etc/localtime -&gt; /usr/share/zoneinfo/Etc/UTC
</code></pre></div></p> <p>显示当前可以时区列表。 <div class=highlight><pre><span></span><code>timedatectl list-timezones
timedatectl list-timezones | grep -i Asia
</code></pre></div></p> <p>修改当前系统时区。 <div class=highlight><pre><span></span><code>sudo timedatectl set-timezone Asia/Shanghai
</code></pre></div></p> <p>显示日历。 <div class=highlight><pre><span></span><code>cal -y
</code></pre></div> openSUSE和Rocky中，使用<code>cal</code>命令需要安装<code>util-linux</code>包。 Ubuntu中，使用<code>cal</code>命令需要安装<code>ncal</code>包。</p> <div class=highlight><pre><span></span><code>sudo apt install ncal

sudo zypper se util-linux
sudo yum install util-linux
</code></pre></div> <h3 id=_10>用户登录信息<a class=headerlink href=#_10 title="Permanent link"> ¶</a></h3> <ul> <li><code>whoami</code>：当前登录用户</li> <li><code>who</code>：系统当前所有的登录会话</li> <li><code>w</code>：系统当前所有的登录会话及所作的操作</li> </ul> <p>MOTD is the abbreviation of "Message Of The Day", and it is used to display a message when a remote user login to the Linux Operating system using SSH. Linux administrators often need to display different messages on the login of the user, like displaying custom information about the server or any necessary information. </p> <p>编辑文件<code>/etc/motd</code>可以自定义"Message Of The Day"的信息。</p> <p>Ubuntu 2204新安装后没有这个文件，需要自己创建。 openSUSE新安装后有预定义的信息。 Rocky9 新安装后有该文件，空白文件无内容。</p> <h3 id=_11>会话管理工具<a class=headerlink href=#_11 title="Permanent link"> ¶</a></h3> <p><code>screen</code>工具</p> <ul> <li><code>screen -S &lt;your_name&gt;</code> (Create new screen session)</li> <li><code>screen -ls</code> (list current screen sessions)</li> <li><code>screen -x &lt;your_name&gt;</code> (Attach to existing screeen session, sync between both)</li> <li><code>screen -r &lt;your_name&gt;</code> (Reattach existing screen session)</li> </ul> <p><code>tmux</code>工具</p> <p><code>tmux</code> 是指 <em>Terminal Multiplexer</em>.</p> <p>安装<code>tmux</code>工具。 <div class=highlight><pre><span></span><code># Rocky
sudo yum install tmux

# Ubuntu
sudo apt install tmux

# openSUSE
sudo zypper in tmux
</code></pre></div></p> <p>常用方法：</p> <ul> <li><code>tmux new -s &lt;your_name&gt;</code> (Create new session)</li> <li><code>tmux detach</code> (Detach current session)</li> <li><code>tmux ls</code> (list current sessions)</li> <li><code>tmux attach -t &lt;your_name&gt;</code> (Reattach existing session)</li> <li><code>tmux switch -t &lt;your_name&gt;</code> (Switch to another session)</li> <li><code>tmux kill-session -t &lt;your_name&gt;</code> (Kill existing session)</li> <li><code>tmux list-keys</code> (List all short keys)</li> <li><code>tmux list-commands</code> (List commands and parameters)</li> <li><code>tmux info</code> (List all sessions info)</li> <li><code>tmux split-window</code> (Split window)</li> </ul> <h3 id=echo><code>echo</code>命令<a class=headerlink href=#echo title="Permanent link"> ¶</a></h3> <p><code>echo</code>命令中可以输出变量，如果变量是用是单引号引起来，表示这个变量不用IFS替换！！</p> <ul> <li><code>echo "Home=$HOME"</code>的输出结果是<code>Home=/home/vagrant</code></li> <li><code>echo 'Home=$HOME'</code>的输出结果是<code>Home=$HOME</code></li> </ul> <p><code>echo -e</code>启用<code>\</code>字符的解释功能，比如： * <code>echo -e "a\x0Ab"</code>，输出字符<code>a</code>和<code>b</code>，中间<code>\x0A</code>代表十六进制<code>OA</code>（即回车） * <code>echo -e "\x4A \x41 \x4D \x45 \x53"</code>，输出结果是<code>J A M E S</code></p> <div class="admonition tips"> <p class=admonition-title>Tips</p> <p>可以通过man 7 ascii来查看各进制的含义。</p> </div> <p><code>echo -e</code>输出带颜色字符。</p> <p>示例：</p> <div class=highlight><pre><span></span><code>echo -e &quot;\e[35m 紫色 \e[0m&quot;
echo -e &quot;\e[43m 黄底 \e[0m&quot;
echo -e &quot;\e[93m 黑底黄字 \e[0m&quot;
</code></pre></div> <div class="admonition reference"> <p class=admonition-title>Reference</p> <p>字体颜色：</p> <ul> <li><code>\e[30m</code>： 黑色</li> <li><code>\e[31m</code>： 红色</li> <li><code>\e[32m</code>： 绿色</li> <li><code>\e[33m</code>： 黄色</li> <li><code>\e[34m</code>： 蓝色</li> <li><code>\e[35m</code>： 紫色</li> <li><code>\e[36m</code>： 青色</li> <li><code>\e[37m</code>： 白色</li> <li><code>\e[40m</code>： 黑底</li> <li><code>\e[41m</code>： 红底</li> <li><code>\e[42m</code>： 绿底</li> <li><code>\e[43m</code>： 黄底</li> <li><code>\e[44m</code>： 蓝底</li> <li><code>\e[45m</code>： 紫底</li> <li><code>\e[46m</code>： 青底</li> <li><code>\e[47m</code>： 白底</li> </ul> <p>背景颜色：</p> <ul> <li><code>\e[90m</code>： 黑底黑字</li> <li><code>\e[91m</code>： 黑底红字</li> <li><code>\e[92m</code>： 黑底绿字</li> <li><code>\e[93m</code>： 黑底黄字</li> <li><code>\e[94m</code>： 黑底蓝字</li> <li><code>\e[95m</code>： 黑底紫字</li> <li><code>\e[96m</code>： 黑底青字</li> <li><code>\e[97m</code>： 黑底白字</li> </ul> <p>控制属性：</p> <ul> <li><code>\e[0m</code> 关闭所有属性</li> <li><code>\e[1m</code> 设置高亮度</li> <li><code>\e[4m</code> 下划线</li> <li><code>\e[5m</code> 闪烁</li> <li><code>\e[7m</code> 反显，撞色显示，显示为白字黑底，或者显示为黑底白字</li> <li><code>\e[8m</code> 消影，字符颜色将会与背景颜色相同</li> <li><code>\e[nA</code> 光标上移 n 行</li> <li><code>\e[nB</code> 光标下移 n 行</li> <li><code>\e[nC</code> 光标右移 n 行</li> <li><code>\e[nD</code> 光标左移 n 行</li> <li><code>\e[y;xH</code> 设置光标位置</li> <li><code>\e[2J</code> 清屏</li> <li><code>\e[K</code> 清除从光标到行尾的内容</li> <li><code>\e[s</code> 保存光标位置</li> <li><code>\e[u</code> 恢复光标位置</li> <li><code>\e[?25</code> 隐藏光标</li> <li><code>\e[?25h</code> 显示光标</li> </ul> </div> <h3 id=man><code>man</code>命令<a class=headerlink href=#man title="Permanent link"> ¶</a></h3> <p>安装包： <div class=highlight><pre><span></span><code># openSUSE
sudo zypper install man-pages man-pages-zh_CN man-pages-posix

# Rocky
sudo yum install man-pages

# Ubuntu
sudo apt install man-db manpages-posix manpages manpages-zh
sudo apt install manpages-dev manpages-posix-dev
</code></pre></div></p> <p>更新mandb <div class=highlight><pre><span></span><code>mandb
</code></pre></div></p> <p>查找某个命令的man信息，例如查找<code>crontab</code>命令的信息。 <div class=highlight><pre><span></span><code># 精确查找
man -f crontab
whatis crontab

# 模糊查询
man -k crontab
apropos crontab
</code></pre></div> 输出结果如下： <div class=highlight><pre><span></span><code>crontab (5)          - files used to schedule the execution of programs
crontab (1)          - maintains crontab files for individual users
crontab (1p)         - schedule periodic background work
</code></pre></div> 查找crontab第5章的内容，则可以执行： <div class=highlight><pre><span></span><code>man 5 crontab
</code></pre></div></p> <p>常用快捷键示例s：</p> <ul> <li><code>1G</code> : go to the 1<sup>st</sup> line</li> <li><code>10G</code> : go to the 10<sup>th</sup> line</li> <li><code>G</code> : go to the end of the page</li> <li><code>/^SELinux</code> : search the word SELinux</li> <li><code>/section OPTIONS</code> : go to the section OPTIONS</li> </ul> <h3 id=lang>语言环境LANG<a class=headerlink href=#lang title="Permanent link"> ¶</a></h3> <p>安装语言包。 <div class=highlight><pre><span></span><code># Ubuntu
sudo apt install locales-all

# Rocky
sudo yum install glibc-langpack-zh.x86_64

# openSUSE
sudo zypper install glibc-locale glibc-locale-32bit glibc-locale-base
</code></pre></div></p> <p>查看当前语言设置： <div class=highlight><pre><span></span><code>echo $LANG

locale -a
locale -k LC_TIME

localectl status
localectl list-locales
</code></pre></div></p> <p>全局locale配置(Global locale settings)。 <div class=highlight><pre><span></span><code># openSUSE &amp; Rocky
sudo cat /etc/locale.conf

# Ubuntu
sudo cat /etc/default/locale
</code></pre></div></p> <p>临时修改当前session的locale。 <div class=highlight><pre><span></span><code>LANG=&quot;zh_CN.utf8&quot; 
</code></pre></div></p> <p>永久修改locale设置。 <div class=highlight><pre><span></span><code>sudo localectl set-locale LANG=zh_CN.utf8
</code></pre></div></p> <p>修改回原设置。 <div class=highlight><pre><span></span><code>sudo localectl set-locale LANG=en_US.utf8
</code></pre></div></p> <h3 id=_12>符号<code>$</code>用法<a class=headerlink href=#_12 title="Permanent link"> ¶</a></h3> <p>符号<code>$</code>的用法：</p> <ul> <li><code>$</code>，获取变零值。 <div class=highlight><pre><span></span><code>x=1
echo $x
echo &quot;$x&quot;
</code></pre></div></li> </ul> <p>建议使用"$x"，以避免shell编程中产生歧义。如下例： <div class=highlight><pre><span></span><code>s=&quot;this is a string&quot;
echo $s
echo &quot;this is a string&quot;
</code></pre></div> 执行<code>[ $s == "this is a string" ]</code>会报错，这是实际生成的比较式<code>this is a string == "this is a string"</code>。 我们预期的是<code>"this is a string" == "this is a string"</code>，所以需要改成<code>[ "$s" == "this is a string" ]</code>。</p> <ul> <li><code>$0</code>, <code>$1</code>, <code>$n</code>, <code>$#</code>：</li> </ul> <p>生成一个测试脚本。 <div class=highlight><pre><span></span><code>echo &#39;echo $0 $1 $2 $#&#39; &gt; test.sh
chmod 755 test.sh
</code></pre></div></p> <p>验证各个参数位置。 <div class=highlight><pre><span></span><code>./test.sh a b c d e
</code></pre></div> 输出结果： <div class=highlight><pre><span></span><code>./test.sh a b 5
</code></pre></div></p> <p>结论：</p> <ul> <li><code>$0</code>输出脚本文件名；</li> <li><code>$1</code>输出第一个参数；</li> <li><code>$2</code>输出第二个参数；</li> <li> <p><code>$#</code>输出参数个数。</p> </li> <li> <p><code>${}</code></p> </li> </ul> <p><code>${}</code>用于区分变量的边界。</p> <p>下面例子中，<code>$abc</code>无结果输出，<code>${a}bc</code>输出结果<code>stringbc</code>，通过{}指定了某个字符属于变量。 <div class=highlight><pre><span></span><code>a=&quot;string&quot;
echo ${a}bc
echo $abc
</code></pre></div></p> <ul> <li><code>${#}</code></li> </ul> <p><code>${#}</code>是返回变量值的长度。 <div class=highlight><pre><span></span><code>s=&#39;this is a string&#39;
echo &quot;$s&quot;
echo &quot;${#s}&quot;
</code></pre></div> 命令<code>echo "${#s}"</code>输出结果是字串<code>this is a string</code>的长度<code>16</code>。</p> <ul> <li><code>$?</code></li> </ul> <p><code>$?</code>是返回上一命令是否成功的状态，<code>0</code>代表成功，非零代表失败。</p> <p><code>ls</code>是一个命令，所以返回值是<code>0</code>。<code>tom</code>是一个不存在的命令，则返回<code>127</code>。 <div class=highlight><pre><span></span><code>ls
echo $?

tom
echo $?
</code></pre></div></p> <ul> <li><code>$()</code></li> </ul> <p><code>$()</code>等同于反引号。<code>echo $(ls)</code>等同于执行<code>ls</code>命令。</p> <p><code>$()</code>的弊端是，不是所有的类unix系统都支持，反引号是肯定支持的。</p> <p><code>$()</code>的优势是直观，在转移处理时，比反引号直观容易些。 <div class=highlight><pre><span></span><code>echo $(ls)
# test.sh

echo $(cat $(ls))
# echo $0 $1 $2 $#
</code></pre></div> 上述嵌套格式中，ls命令的输出，是cat命令的输入，可以进行多层嵌套，内层命令的输出是外层命令的输入。</p> <ul> <li><code>$[]</code></li> </ul> <p><code>$[]</code>是表达式计算。 <div class=highlight><pre><span></span><code>echo $[3 + 2]
</code></pre></div></p> <ul> <li><code>$-</code></li> </ul> <p><code>$-</code>显示shell当前所使用的选项。</p> <p>执行<code>echo $-</code>，输出结果<code>himBHs</code>。himBH每一个字符是一个shell的选项。</p> <ul> <li><code>$!</code></li> </ul> <p><code>$!</code>获取最后一个运行的后台进程的pid。</p> <p>比如执行<code>cat test.sh &amp;</code>，结果中会包含一个pid号，马上着执行<code>echo $!</code>，如果2个命令间隔之间没有其他后台进程执行，则可以得到和前面一致的pid号。</p> <ul> <li><code>!$</code></li> </ul> <p><code>!$</code>返回上一条命令的最后一个参数。</p> <p>执行<code>./test.sh a b c iamhere</code>，得到结果<code>./test.sh a b 4</code>。 执行<code>echo !$</code>，得到2个结果，<code>echo iamhere</code>和<code>iamhere</code>。</p> <ul> <li><code>!!</code></li> </ul> <p><code>!!</code>输出上一条命令，并执行。</p> <p><code>!!</code>会先输出上一条命令<code>cat test.sh</code>，然后再执行这条命令，第二行即执行结果。 <div class=highlight><pre><span></span><code>[vagrant@lizard:~]$ cat test.sh 
echo $0 $1 $2 $#
[vagrant@lizard:~]$ !!
cat test.sh 
echo $0 $1 $2 $#
</code></pre></div></p> <ul> <li><code>$$</code></li> </ul> <p><code>$$</code> 输出当前进程的pid。 <div class=highlight><pre><span></span><code>echo $$
</code></pre></div></p> <ul> <li><code>$@</code> &amp; <code>$*</code></li> </ul> <p><code>$@</code>和<code>$*</code>是对传入参数的不同体现，<code>$@</code>是以变量形式引用传入参数，<code>$*</code>是以数组的形式引用传入参数。</p> <p>创建一个文件<code>script.sh</code>包含下面的脚本。并添加执行权限<code>chmod 755 script.sh</code>。 <div class=highlight><pre><span></span><code>echo &#39;$@以变量方式引用传入参数：&#39;

for x in &quot;$@&quot;
do
  echo $x
done

echo &#39;$*以数组的形式引用传入参数：&#39;

for x in &quot;$*&quot;
do
  echo $x
done
</code></pre></div> 输出结果： <div class=highlight><pre><span></span><code>$@以变量方式引用传入参数：
a
b
3
5
d
$*以数组的形式引用传入参数：
a b 3 5 d
</code></pre></div></p> <h2 id=_13>文件系统<a class=headerlink href=#_13 title="Permanent link"> ¶</a></h2> <p>文件系统层次标准（Filesystem Hierarchy Standard, FHS），它是Linux 标准库（Linux Standards Base, LSB）规范的一部分。</p> <p>根目录<code>/</code>指文件系统树的最高层。 根分区在系统启动时首先挂载。 系统启动时运行的所有程序都必须在此分区中。</p> <h3 id=_14>主要目录<a class=headerlink href=#_14 title="Permanent link"> ¶</a></h3> <p>以下目录必须在根分区中：</p> <ul> <li><code>/bin</code> - 用户基本程序。<ul> <li>包含未挂载其他文件系统时所需的可执行文件。 例如，系统启动、处理文件和配置所需的程序。</li> <li><code>/bin/bash</code> - <code>bash</code>脚本处理</li> <li><code>/bin/cat</code> - 显示文件内容</li> <li><code>/bin/cp</code> - 拷贝文件</li> <li><code>/bin/dd</code> - 拷贝文件（基于字节byte）</li> <li><code>/bin/gzip</code> - 压缩文件</li> <li><code>/bin/mount</code> - 挂载文件系统</li> <li><code>/bin/rm</code> - 删除文件</li> <li><code>/bin/vi</code> - 文件编辑</li> </ul> </li> <li><code>/sbin</code> - 系统基本程序。<ul> <li>包含基本系统管理的程序。</li> <li>默认是root用户有权限执行，因此它不在常规用户路径中。 </li> <li>一些重要管理程序：<ul> <li><code>/sbin/fdisk*</code> - 管理硬盘分区</li> <li><code>/sbin/fsck*</code> - 文件系统检查。不能在运行的系统上面直接执行<code>fsck</code>，损坏根文件系统，执行前需要<code>umount</code>。</li> <li><code>/sbin/mkfs</code> - 创建文件系统</li> <li><code>/sbin/shutdown</code> - 关闭系统</li> </ul> </li> </ul> </li> <li><code>/dev</code> - 设备文件<ul> <li>以太网卡是内核模块，其他硬件都以设备dev的方式展现。</li> <li>应用程序读取和写入这些文件以操作使用硬件组件。</li> <li>两种类型设备文件：<ul> <li>字符设备（Character-oriented）– 序列设备（打印机，磁带机，鼠标等） </li> <li>块设备（Block-oriented）– 硬盘，DVD等 </li> </ul> </li> <li>与设备驱动程序的连接通过内核中称为主设备号的通道实现。</li> <li>过去，这些文件是使用<code>mknod</code>命令手动创建的。 现在当内核发现设备时，它们会由<code>udev</code>自动创建。</li> <li>一些重要的设备文件：<ul> <li>Null设备: - <code>/dev/null</code></li> <li>Zero设备: - <code>/dev/zero</code></li> <li>系统终端: - <code>/dev/console</code></li> <li>虚拟终端: - <code>/dev/tty1</code></li> <li>串行端口 - <code>/dev/ttyS0</code></li> <li>并行端口: - <code>/dev/lp0</code></li> <li>软盘驱动器: - <code>/dev/fd0</code></li> <li>硬盘驱动器: - <code>/dev/sda</code></li> <li>硬盘分区: - <code>/dev/sda1</code></li> <li>CD-ROM驱动器: - <code>/dev/scd0</code></li> </ul> </li> </ul> </li> <li><code>/etc</code> - 配置文件<ul> <li>存放系统和服务的配置文件。</li> <li>大部分都是ASCII文件</li> <li>普通用户可以默认读取其中的大部分内容。 这会带来一个潜在的全问题，因为其中一些文件包含密码，因此重要的是要确保这些文件只能由root用户读取。</li> <li>根据FHS标准，此处不能放置任何可执行文件，但子目录可能包含shell脚本。</li> <li>几乎每个已安装的服务在<code>/etc</code>或其子目录中至少有一个配置文件。</li> <li>一些重要的配置文件:<ul> <li><code>/etc/os-release</code> - 系统版本信息</li> <li><code>/etc/DIR_COLORS</code> - <code>ls</code>命令中的颜色配置信息（openSUSE和Rocky）</li> <li><code>/etc/fstab</code> - 配置要挂载的文件系统</li> <li><code>/etc/profile</code> - Shell登录脚本</li> <li><code>/etc/passwd</code> - 用户信息集合（不含密码）</li> <li><code>/etc/shadow</code> - 密码和相关信息</li> <li><code>/etc/group</code> - 用户组信息集合</li> <li><code>/etc/cups/*</code> - 用于CUPS打印系统（CUPS=Common UNIX Printing System）</li> <li><code>/etc/hosts</code> - 主机名机器IP地址</li> <li><code>/etc/motd</code> - 登录后显示的欢迎信息</li> <li><code>/etc/issue</code> - 登录前显示的欢迎信息</li> <li><code>/etc/sysconfig/*</code> - 系统配置文件</li> </ul> </li> </ul> </li> <li><code>/lib</code> - 库（Libraries）<ul> <li>许多程序都具有一些通用功能。 这些通用功能可以保存在共享库中。</li> <li>共享库中文件的扩展名是<code>.so</code>。 </li> <li>目录<code>/lib</code>包含的共享库文件主要是被<code>/bin</code>和<code>/sbin</code>目录包含的程序所调用。 </li> <li>目录<code>/lib</code>的子目录包含一些额外需要的共享库。 </li> <li>内核模块存储在目录<code>/lib/modules</code>。</li> </ul> </li> <li><code>/lib64</code> - 64位共享库（64-Bit Libraries），类似目录<code>/lib</code>。 <ul> <li>这个目录因系统架构不同而不同。 </li> <li>一些系统支持不同的二进制格式并保留同一个共享库的不同版本。</li> </ul> </li> <li><code>/usr</code> - 包含应用程序、图形界面文件、库、本地程序、文档等。<ul> <li><code>/usr</code> 即 Unix System Resources. 例如：</li> <li><code>/usr/X11R6/</code> - X Window 系统文件</li> <li><code>/usr/bin/</code> - 几乎包含所有可执行文件</li> <li><code>/usr/lib/</code> - 包含库和应用程序</li> <li><code>/usr/local/</code> - 包含本地安装程序。这个目录下的内容不会被系统升级所覆盖。下面3个目录在初始安装后是空的。<ul> <li><code>/usr/local/bin</code>- </li> <li><code>/usr/local/sbin</code>- </li> <li><code>/usr/local/lib</code>- </li> </ul> </li> <li><code>/usr/sbin/</code> - 系统管理程序</li> <li><code>/usr/share/doc/</code> - 文档</li> <li><code>/usr/src/</code> - 内核和应用程序的源代码<ul> <li><code>/usr/src/linux</code>- </li> </ul> </li> <li><code>/usr/share/man/</code> - <code>man</code>命令使用的内容</li> </ul> </li> <li><code>/opt</code> - 可选应用程序目录<ul> <li>各发行版包含的应用程序一般存储在目录<code>/usr/lib/</code>，各发行版可选程序，或第三方应用程序则存储在目录<code>/opt</code>. </li> <li>在安装时，会为每个应用程序的文件创建一个目录，其中包含应用程序的名称。比如：<ul> <li><code>/opt/novell</code>- </li> </ul> </li> </ul> </li> <li><code>/boot</code> - 引导目录<ul> <li><code>/boot/grub2</code> - 包含 GRUB2 的静态引导加载程序文件。（GRUB = Grand Unified Boot Loader）</li> <li>包含以链接 vmlinuz 和 initrd 标识的内核和 initrd 文件。</li> </ul> </li> <li><code>/root</code> - 管理员的主目录（home directory）。<ul> <li><code>root</code>用户的主目录。其他用户的主目录是在目录<code>/home</code>下。</li> <li><code>root</code>用户的登录环境配置保存至<code>/root</code>分区中。</li> </ul> </li> <li><code>/home</code> - 用户主目录<ul> <li>每个系统用户都有一个分配的文件区域，该文件区域在登录后成为当前工作目录。 默认情况下，它们存在于<code>/home</code>中。</li> <li><code>/home</code>中的文件和目录可以位于单独的分区中，也可以位于网络上的另一台计算机上。</li> <li>用户配置信息和配置文件（user profile and configuration files）主要有：<ul> <li>.profile - 用户私有登录脚本</li> <li>.bashrc - <code>bash</code>的配置文件</li> <li>.bash_history - <code>bash</code>环境下保持命令历史记录</li> </ul> </li> </ul> </li> <li><code>/run/media/&lt;user&gt;/*</code> - 可移动设备的挂载点，例如：<ul> <li><code>/run/media/media_name/</code></li> <li><code>/run/media/cdrom/</code>- </li> <li><code>/run/media/dvd/</code>- </li> <li><code>/run/media/usbdisk/</code>- </li> </ul> </li> <li><code>/mnt</code> - 文件系统临时挂载点<ul> <li>用于挂载临时使用的文件系统的目录。</li> <li>文件系统使用 mount 命令挂载，使用 umount 命令删除。</li> <li>子目录默认不存在，也不会自动创建。</li> </ul> </li> <li><code>/srv</code> - 服务数据目录<ul> <li>存放各种服务的数据，比如：<ul> <li><code>/srv/www</code> - 用于存放 Apache Web Server 的数据</li> <li><code>/srv/ftp</code> - 用于存放 FTP server 的数据</li> </ul> </li> </ul> </li> <li><code>/var</code> - 可变文件（Variable Files）<ul> <li>在系统运行过程中会被修改的文件</li> <li>Important subdirectories:<ul> <li><code>/var/lib/</code> - 可变库文件</li> <li><code>/var/log/</code> - 日志文件</li> <li><code>/var/run/</code> - 运行中的线程的信息</li> <li><code>/var/spool/</code> - 对列（打印机，邮件）<ul> <li><code>/var/spool/mail</code>- </li> <li><code>/var/spool/cron</code>- </li> </ul> </li> <li><code>/var/lock/</code> - 多用户访问锁文件</li> <li><code>/var/cache</code>- </li> <li><code>/var/mail</code>- </li> </ul> </li> </ul> </li> <li><code>/tmp</code> - 临时文件<ul> <li>程序在运行时创建临时文件的位置</li> </ul> </li> <li><code>/proc</code> - 进程文件<ul> <li>虚拟文件系统，不占空间，大小始终为零，保持当前进程的状态信息</li> <li>包含有关各个进程的信息的目录，根据进程的 PID 号命名。</li> <li>有些值可以临时在线更改生效，但重启后丢失<ul> <li><code>/proc/cpuinfo/</code> - Processor information</li> <li><code>/proc/dma/</code> - Use of DMA ports</li> <li><code>/proc/interrupts/</code> - Use of interrupts</li> <li><code>/proc/ioports/</code> - Use of I/O ports</li> <li><code>/proc/filesystems/</code> - File system formats the kernel knows</li> <li><code>/proc/modules/</code> - Active modules</li> <li><code>/proc/mounts/</code> - Mounted file systems</li> <li><code>/proc/net/*</code> - Network information and statistics</li> <li><code>/proc/partitions/</code> - Existing partitions</li> <li><code>/proc/bus/pci/</code> - Connected PCI devices</li> <li><code>/proc/bus/scsi/</code> - Connected SCSI devices</li> <li><code>/proc/sys/*</code> - System and kernel information</li> <li><code>/proc/version</code> - Kernel version</li> </ul> </li> </ul> </li> <li><code>/sys</code> - 系统信息目录<ul> <li>虚拟文件系统，仅存在于内存中，文件大小为零。主要提供如下信息：</li> <li>硬件总线（hardware buses）</li> <li>硬件设备（hardware devices）</li> <li>有源设备（active devices）</li> <li>驱动程序（drivers）</li> </ul> </li> </ul> <h3 id=_15>七种不同类型的文件<a class=headerlink href=#_15 title="Permanent link"> ¶</a></h3> <ul> <li>普通文件（Normal Files）</li> <li>ASCII 文本文件</li> <li>可执行文件</li> <li>图形文件</li> <li>目录（Directories）</li> <li>组织规划磁盘上的文件</li> <li>包含文件和子目录</li> <li>实现分层文件系统</li> <li>链接（Links）</li> <li>硬链接（Hard links）<ul> <li>磁盘上文件的辅助文件名</li> <li>多个文件名引用单个<code>inode</code></li> <li>引用的文件必须存在于同一个文件系统中</li> </ul> </li> <li>符号链接（Symbolic links）<ul> <li>对磁盘上其他文件的引用</li> <li><code>inode</code>包含对另一个文件名的引用</li> <li>被引用的文件可以存在于同一个文件系统中，也可以存在于其他文件系统中</li> <li>符号链接可以引用不存在的文件（断开的链接）</li> </ul> </li> <li>套接字Sockets - 用于进程之间的双向通信。</li> <li>管道（Pipes）(FIFOs) - 用于从一个进程到另一个进程的单向通信。</li> <li>块设备（Block Devices）</li> <li>字符设备（Character Devices）</li> </ul> <h4 id=_16>链接类型<a class=headerlink href=#_16 title="Permanent link"> ¶</a></h4> <p><strong>硬链接</strong>（Hard links）硬链接是存储卷上文件的目录引用或指针。 文件名是存储在目录结构中的标签，目录结构指向文件数据。 因此，可以将多个文件名与同一文件关联。 通过不同的文件名访问时，所做的任何更改都是针对源文件数据。</p> <p><strong>符合链接</strong>（Symbolic links）: 符号链接包含一个文本字符串，操作系统将其解释并作为另一个文件或目录的路径。 它本身就是一个文件，可以独立于目标而存在。 如果删除了符号链接，则其目标文件或目录不受影响。 如果移动，重命名或删除目标文件或目录，则用于指向它的任何符号链接将继续存在，但指向的是现在不存在的文件。</p> <p>仅当文件和链接文件位于同一文件系统（在同一分区上）时，才能使用硬链接，因为inode编号在同一文件系统中仅是唯一的。 可以使用<code>ln</code>命令创建硬链接，<code>ln</code>命令指向已存在文件的inode。 以后可以在文件的名称和链接的名称下访问文件，并且无法再识别首先存在的名称或原始文件和链接的不同之处。 </p> <p>可以使用<code>ln</code>命令和<code>-s</code>选项创建符号链接。 一个符号链接被分配了它自己的inode，一个链接指向一个文件，所以总是可以区分链接和实际文件。 </p> <p>文件系统本质上是一个用于跟踪分区卷中的文件的数据库。 对于普通文件，分配数据块以存储文件的数据，分配inode以指向数据块以及存储关于文件的元数据，然后将文件名分配给inode。 硬链接是与现有inode关联的辅助文件名。 对于符号链接，将为新的inode分配一个与之关联的新文件名，但inode引用另一个文件名而不是引用数据块。</p> <p>查看文件名和inode之间关系的一个方法是使用<code>ls -il</code>命令。inode的典型大小为128位，数据块的大小范围可以是1k，2k，4k或更大，具体取决于文件系统类型。</p> <p>软连接可以针对目录，硬连接只能针对文件。</p> <p>硬链接相当于增加了一个登记项，使得原来的文件多了一个名字，至于inode都没变。所谓的登记项其实是目录文件中的一个条目(目录项)，使用hard link 是让多个不同的目录项指向同一个文件的inode，没有多余的内容需要存储在磁盘扇区中，所以hardlink不占用额外的空间。</p> <p>符号链接有单独的inode，在inode中存放另一个文件的路径而不是文件数据，所以符号链接会占用额外的空间。</p> <h4 id=_17>设备文件<a class=headerlink href=#_17 title="Permanent link"> ¶</a></h4> <p><strong>设备文件</strong>（Device File）表示硬件（网卡除外）。 每个硬件都由一个设备文件表示。 网卡是接口。</p> <p>设备文件把内核驱动和物理硬件设备连接起来。 内核驱动程序通过对设备文件进行读写（正确的格式）来实现对硬件的读写。</p> <p>类型：</p> <ul> <li>块设备（Block Devices）：块设备（通常）在512字节的大块中读取/写入信息。</li> <li>字符设备（Character Devices）：字符设备以字符方式读取/写入信息。 字符设备直接提供对硬件设备的无缓冲访问。</li> <li>有时称为裸设备（raw devices）。（注意：裸设备被视为字符设备，不是块设备）</li> <li>通过辅以不同选项，可以广泛而多样地应用和使用字符设备。</li> <li>当内核发现设备时由操作系统<code>udev</code>自动创建。</li> </ul> <h4 id=_18>练习<a class=headerlink href=#_18 title="Permanent link"> ¶</a></h4> <p>以Rocky 9为例。</p> <p>创建练习目录。 <div class=highlight><pre><span></span><code>mkdir data
mkdir -p data/typelink
cd data
</code></pre></div></p> <p>创建硬链接。注意：<code>file</code>、<code>hardlinkfile1</code>、<code>hardlinkfile2</code> 文件的链接位置的数值的变化) <div class=highlight><pre><span></span><code>echo &quot;it&#39;s original file&quot; &gt; file
ln file hardlinkfile1
ln -s file symlinkfile1
ln -s file symlinkfile2
</code></pre></div> 执行<code>ls -l</code>命令可以得到下面的结果： <div class=highlight><pre><span></span><code>-rw-r--r--. 2 vagrant wheel 19 Nov  1 10:42 file
-rw-r--r--. 2 vagrant wheel 19 Nov  1 10:42 hardlinkfile1
lrwxrwxrwx. 1 vagrant wheel  4 Nov  1 10:43 symlinkfile1 -&gt; file
lrwxrwxrwx. 1 vagrant wheel  4 Nov  1 10:43 symlinkfile2 -&gt; file
</code></pre></div></p> <p>创建硬链接。 <div class=highlight><pre><span></span><code>ln file hardlinkfile1
ln file hardlinkfile2
</code></pre></div> 执行<code>ls -l</code>命令可以得到下面的结果： <div class=highlight><pre><span></span><code>-rw-r--r--. 3 vagrant wheel  19 Nov  1 10:42 file
-rw-r--r--. 3 vagrant wheel  19 Nov  1 10:42 hardlinkfile1
-rw-r--r--. 3 vagrant wheel  19 Nov  1 10:42 hardlinkfile2
lrwxrwxrwx. 1 vagrant wheel   4 Nov  1 10:43 symlinkfile1 -&gt; file
lrwxrwxrwx. 1 vagrant wheel   4 Nov  1 10:43 symlinkfile2 -&gt; file
</code></pre></div></p> <p>修改<code>file</code>文件的内容。 <div class=highlight><pre><span></span><code>echo &quot;add oneline&quot; &gt;&gt; file
</code></pre></div> 通过命令<code>cat file</code>查看当前<code>file</code>的内容。 <div class=highlight><pre><span></span><code>it&#39;s original file
add oneline
</code></pre></div> 通过下面的命令，可以看到所以软/硬链接文件内容都更新了，和<code>file</code>文件更新后的内容保持一致。 <div class=highlight><pre><span></span><code>cat hardlinkfile1
cat hardlinkfile2
cat symlinkfile1
cat symlinkfile2
</code></pre></div></p> <p>对文件<code>symlinkfile1</code>再创建新的软连接。 <div class=highlight><pre><span></span><code>ln -s symlinkfile1 symlinkfile1-1
</code></pre></div></p> <p>通过命令<code>ls -il</code>查看现在的目录信息。 <div class=highlight><pre><span></span><code>67274680 -rw-r--r--. 3 vagrant wheel 31 Nov  1 11:14 file
67274680 -rw-r--r--. 3 vagrant wheel 31 Nov  1 11:14 hardlinkfile1
67274680 -rw-r--r--. 3 vagrant wheel 31 Nov  1 11:14 hardlinkfile2
67274681 lrwxrwxrwx. 1 vagrant wheel  4 Nov  1 10:43 symlinkfile1 -&gt; file
67274683 lrwxrwxrwx. 1 vagrant wheel 12 Nov  1 11:20 symlinkfile1-1 -&gt; symlinkfile1
67274682 lrwxrwxrwx. 1 vagrant wheel  4 Nov  1 10:43 symlinkfile2 -&gt; file
</code></pre></div></p> <p>读取软链接文件的源文件信息 <div class=highlight><pre><span></span><code>readlink symlinkfile1
readlink symlinkfile2
</code></pre></div></p> <p>注意，对于<code>symlinkfile1-1</code>的情况有些不同。 <div class=highlight><pre><span></span><code>readlink symlinkfile1-1
</code></pre></div> 上面命令返回结果<code>symlinkfile1</code>仍然是一个符号链接文件。通过<code>readlink -f</code>可以直接定位真正的源文件。 <div class=highlight><pre><span></span><code>readlink -f symlinkfile1-1
</code></pre></div> 上面的返回结果<code>/data/linktype/file</code>是<code>symlinkfile1-1</code>真正的源文件。</p> <p>显示<code>data</code>目录下的文件和子目录： <div class=highlight><pre><span></span><code>cd ~
tree ./data
</code></pre></div> 运行结果： <div class=highlight><pre><span></span><code>./data
├── file
├── hardlinkfile1
├── hardlinkfile2
├── symlinkfile1 -&gt; file
├── symlinkfile1-1 -&gt; symlinkfile1
├── symlinkfile2 -&gt; file
└── typelink
</code></pre></div></p> <p>只显示<code>data</code>目录下的子目录： <div class=highlight><pre><span></span><code>tree -d ./data
</code></pre></div> 运行结果： <div class=highlight><pre><span></span><code>./data
└── typelink
</code></pre></div></p> <p>显示<code>data</code>目录下的文件和子目录，包含全目录： <div class=highlight><pre><span></span><code>tree -f ./data
</code></pre></div> 运行结果： <div class=highlight><pre><span></span><code>./data
├── ./data/file
├── ./data/hardlinkfile1
├── ./data/hardlinkfile2
├── ./data/symlinkfile1 -&gt; file
├── ./data/symlinkfile1-1 -&gt; symlinkfile1
├── ./data/symlinkfile2 -&gt; file
└── ./data/typelink
</code></pre></div></p> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top data-md-state=hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg> Back to top </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../../SES/linux_ses_demo/ class="md-footer__link md-footer__link--prev" aria-label="Previous: SUSE Enterprise Storage Basic Operation" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> SUSE Enterprise Storage Basic Operation </div> </div> </a> <a href=../../../k8s/installation/single-local/ class="md-footer__link md-footer__link--next" aria-label="Next: Single Node Installation" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Single Node Installation </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.instant", "navigation.top"], "search": "../../../assets/javascripts/workers/search.fcfe8b6d.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": null}</script> <script src=../../../assets/javascripts/bundle.b1047164.min.js></script> </body> </html>