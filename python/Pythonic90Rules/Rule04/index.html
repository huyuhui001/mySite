
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://example.com/python/Pythonic90Rules/Rule04/">
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.1.9">
    
    
      
        <title>第4条 用支持插值的f-string取代C风格的格式字符串与str.format方法 - My Docs</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.2b4465f4.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.e6a45f82.min.css">
        
          
          
          <meta name="theme-color" content="#2094f3">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="blue" data-md-color-accent="deep-blue">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#4-f-stringcstrformat" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="My Docs" class="md-header__button md-logo" aria-label="My Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            My Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              第4条　用支持插值的f-string取代C风格的格式字符串与str.format方法
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="My Docs" class="md-nav__button md-logo" aria-label="My Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    My Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../about/" class="md-nav__link">
        About
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#formatstrformat" class="md-nav__link">
    内置的format函数与str类的format方法
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#f-string" class="md-nav__link">
    插值格式字符串f-string
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                

<h1 id="4-f-stringcstrformat">第4条　用支持插值的f-string取代C风格的格式字符串与str.format方法</h1>
<p>格式化（formatting）是指把数据填写到预先定义的文本模板里面，形成一条用户可读的消息，并把这条消息保存成字符串的过程。</p>
<p>用Python对字符串做格式化处理有四种办法可以考虑，这些办法都内置在语言和标准库里面。 但其中三种办法有严重的缺陷，现在先解释为什么不要使用这三种办法，最后再给出剩下的那一种。</p>
<p>Python里面最常用的字符串格式化方式是采用%格式化操作符(C风格的格式字符串)。 这个操作符左边的文本模板叫作格式字符串（format
string），我们可以在操作符右边写上某个值或者由多个值所构成的元组（tuple），用来替换格式字符串里的相关符号。</p>
<p>python字符串格式化符号：</p>
<ul>
<li>%c：字符及其ASCII码</li>
<li>%s：字符串</li>
<li>%d：整数</li>
<li>%u：无符号整型</li>
<li>%o：无符号八进制数</li>
<li>%x：无符号十六进制数</li>
<li>%X：无符号十六进制数（大写）</li>
<li>%f：浮点数字，可指定小数点后的精度</li>
<li>%e：用科学计数法格式化浮点数</li>
<li>%E：作用同%e，用科学计数法格式化浮点数</li>
<li>%g：%f和%e的简写</li>
<li>%G：%f 和 %E 的简写</li>
<li>%p：用十六进制数格式化变量的地址</li>
</ul>
<pre><code>a = 128
b = 3.1415926
print('Binary is %d, Hex is %X, Oct is %o, Float is %e' % (a, a, a, b))
&gt;&gt;&gt;
Binary is 128, Hex is 80, Oct is 200, Float is 3.141593e+00
</code></pre>
<p>C风格的格式字符串，在Python里有四个缺点。</p>
<p>第一个缺点是，如果%右侧那个元组里面的值在类型或顺序上有变化，那么程序可能会因为转换类型时发生不兼容问题而出现错误。</p>
<pre><code>&gt;&gt;&gt; key = 'my_var'
&gt;&gt;&gt; value = 1.234
&gt;&gt;&gt; formatted = '%-10s = %.2f' % (key, value)  # %-10s代表=左边字串总长度10,不足部分在尾部添加空格
&gt;&gt;&gt; formatted
'my_var     = 1.23'
&gt;&gt;&gt; 
</code></pre>
<p>如果把key跟value互换位置，或者左侧那个格式字符串里面的两个说明符对调了顺序，那么程序就会在运行时出现异常。</p>
<pre><code>&gt;&gt;&gt; key = 'my_var'
&gt;&gt;&gt; value = 1.234
&gt;&gt;&gt; formatted = '%-10s = %.2f' % (value, key)
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
TypeError: must be real number, not str


&gt;&gt;&gt; key = 'my_var'
&gt;&gt;&gt; value = 1.234
&gt;&gt;&gt; formatted = '%.2f = %-10s' % (key, value)
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
TypeError: must be real number, not str
</code></pre>
<p>第二个缺点是，在填充模板之前，经常要先对准备填写进去的这个值稍微做一些处理，但这样一来，整个表达式可能就会写得很长，影响程序的可读性。</p>
<pre><code>&gt;&gt;&gt; pantry = [
...     ('avocados', 1.25),
...     ('bananas', 2.5),
...     ('cherries', 15)
... ]
&gt;&gt;&gt; for i, (item, count) in enumerate(pantry):
...     print(
...         '#%d: %-10s = %.2f' % (
...         i + 1,
...         item.title(),
...         round(count)
...         )
...     )
... 
#1: Avocados   = 1.00
#2: Bananas    = 2.00
#3: Cherries   = 15.00
</code></pre>
<p>第三个缺点是，如果想用同一个值来填充格式字符串里的多个位置，那么必须在%操作符右侧的元组中相应地多次重复该值。</p>
<pre><code>&gt;&gt;&gt; template = '%s loves food. See %s cook.'
&gt;&gt;&gt; name = 'Max'
&gt;&gt;&gt; formatted = template % (name, name)
&gt;&gt;&gt; formatted
'Max loves food. See Max cook.'

</code></pre>
<p>为了解决上面提到的一些问题，Python的%操作符允许我们用dict取代tuple，解决了%操作符两侧的顺序不匹配问题。</p>
<pre><code>&gt;&gt;&gt; key = 'my_var'
&gt;&gt;&gt; value = 1.234
&gt;&gt;&gt; old_way = '%-10s = %.2f' % (key, value)
&gt;&gt;&gt; new_way = '%(key)-10s = %(value).2f' % {'key': key, 'value': value}  # 对应
&gt;&gt;&gt; reordered = '%(key)-10s = %(value).2f' % {'value': value, 'key': key}  # 互换
&gt;&gt;&gt; assert old_way == new_way == reordered
&gt;&gt;&gt; old_way
'my_var     = 1.23'
&gt;&gt;&gt; new_way
'my_var     = 1.23'
&gt;&gt;&gt; reordered
'my_var     = 1.23'
</code></pre>
<p>用dict取代tuple，也解决用同一个值替换多个格式说明符的问题，我们就不用在%操作符右侧重复这个值了。</p>
<pre><code>&gt;&gt;&gt; name = 'Max'
&gt;&gt;&gt; template = '%s loves food. See %s cook.'
&gt;&gt;&gt; before = template % (name, name)
&gt;&gt;&gt; template = '%(name)s loves food. See %(name)s cook.'
&gt;&gt;&gt; after = template % {'name':  name}
&gt;&gt;&gt; assert before == after
&gt;&gt;&gt; before
'Max loves food. See Max cook.'
&gt;&gt;&gt; after
'Max loves food. See Max cook.'
</code></pre>
<p>但是，这种写法会让第二个缺点变得更加严重，格式化表达式变得更加冗长，看起来也更加混乱。如下例：</p>
<pre><code>&gt;&gt;&gt; pantry = [
...     ('avocados', 1.25),
...     ('bananas', 2.5),
...     ('cherries', 15)
... ]
&gt;&gt;&gt; for i, (item, count) in enumerate(pantry):
...     before = '#%d: %-10s = %.2f' % (
...         i + 1,
...         item.title(),
...         round(count)
...         )
...     after = '#%(loop)d: %(item)-10s = %(count).2f' % {
...         'loop': i + 1,
...         'item': item.title(),
...         'count': round(count)
...     }
...     assert before == after
...     print(before)
...     print(after)
... 
#1: Avocados   = 1.00
#1: Avocados   = 1.00
#2: Bananas    = 2.00
#2: Bananas    = 2.00
#3: Cherries   = 15.00
#3: Cherries   = 15.00
</code></pre>
<p>所以，第四个缺点是，把dict写到格式化表达式里面会让代码变多，每个键都至少要写两次。为了查看格式字符串中的说明符究竟对应于字典里的哪个键，必须在这两段代码之间来回跳跃。如果要对键名稍做修改，那么必须同步修改格式字符串里的说明符，这更让代码变得相当烦琐，可读性更差。</p>
<h2 id="formatstrformat">内置的format函数与str类的format方法</h2>
<p>Python 3添加了高级字符串格式化（advanced stringformatting）机制，它的表达能力比老式C风格的格式字符串要强，且不再使用%操作符。</p>
<p>下面这段代码，演示了这种新的格式化方式。在传给format函数的格式里面，逗号表示显示千位分隔符，^表示居中对齐。</p>
<pre><code>&gt;&gt;&gt; a = 1234.5678
&gt;&gt;&gt; formatted = format(a, ',.2f')
&gt;&gt;&gt; formatted
'1,234.57'

&gt;&gt;&gt; b = 'my string'
&gt;&gt;&gt; formatted = format(b, '^20s')
&gt;&gt;&gt; formatted
'     my string      '
</code></pre>
<p>如果str类型的字符串里面有许多值都需要调整格式，则可以把格式有待调整的那些位置在字符串里面先用{}代替，然后按从左到右的顺序，把需要填写到那些位置的值传给format方法，使这些值依次出现在字符串中的相应位置。</p>
<pre><code>&gt;&gt;&gt; key = 'my_var'
&gt;&gt;&gt; value = 1.234
&gt;&gt;&gt; formatted = '{} = {}'.format(key, value)
&gt;&gt;&gt; formatted
'my_var = 1.234'
&gt;&gt;&gt; formatted = '{} = {}'.format(value, key)
&gt;&gt;&gt; formatted
'1.234 = my_var'
</code></pre>
<p>通过在{}里写个冒号，然后把格式说明符写在冒号的右边，来添加格式。（添加格式后，互换会报错）</p>
<pre><code>&gt;&gt;&gt; formatted = '{:&lt;10} = {:.2f}'.format(key, value)
&gt;&gt;&gt; formatted
'my_var     = 1.23'

&gt;&gt;&gt; formatted = '{:&lt;10} = {:.2f}'.format(value, key)
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
ValueError: Unknown format code 'f' for object of type 'str'
</code></pre>
<p>也可以给str的{}里面写上数字，用来指代format方法在这个位置所接收到的参数值位置索引。 以后即使这些{}在格式字符串中的次序有所变动，也不用调换传给format方法的那些参数。于是，这就避免了前面讲的第一个缺点所提到的那个顺序问题。</p>
<pre><code>&gt;&gt;&gt; key = 'my_var'
&gt;&gt;&gt; value = 1.234
&gt;&gt;&gt; formatted = '{} = {}'.format(key, value)
&gt;&gt;&gt; formatted
'my_var = 1.234'

&gt;&gt;&gt; formatted = '{1} = {0}'.format(key, value)
&gt;&gt;&gt; formatted
'1.234 = my_var'

&gt;&gt;&gt; formatted = '{2} = {1}'.format(key, value)
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
IndexError: Replacement index 2 out of range for positional args tuple
</code></pre>
<p>同一个位置索引可以出现在str的多个{}里面，这就不需要把这个值重复地传给format方法，于是就解决了前面提到的第三个缺点。</p>
<pre><code>&gt;&gt;&gt; name = 'Max'

&gt;&gt;&gt; formatted = '%s loves food. See %s cook.' % (name, name)
&gt;&gt;&gt; formatted
'Max loves food. See Max cook.'

&gt;&gt;&gt; formatted = '%(name)s loves food. See %(name)s cook.' % {'name': name}
&gt;&gt;&gt; formatted
'Max loves food. See Max cook.'

&gt;&gt;&gt; formatted = '{0} loves food. See {0} cook.'.format(name)
&gt;&gt;&gt; formatted
'Max loves food. See Max cook.'
</code></pre>
<p>上述功能分析：</p>
<ul>
<li>系统先把str.format方法接收到的每个值传给内置的format函数，并找到这个值在字符串里对应的{}，同时将{}里面写的格式也传给format函数，例如系统在处理value的时候，传的就是format(value,'.2f')。</li>
<li>然后，系统会把format函数所返回的结果写在整个格式化字符串{}所在的位置。</li>
<li>另外，每个类都可以通过__format__这个特殊的方法定制相应的逻辑，这样的话，format函数在把该类实例转换成字符串时，就会按照这种逻辑来转换。</li>
</ul>
<p>转义处理：</p>
<pre><code>&gt;&gt;&gt; formatted = '%.2f%%' % 12.5
&gt;&gt;&gt; formatted
'12.50%'

&gt;&gt;&gt; formatted = '{} replace {{}}'.format(1.23)
&gt;&gt;&gt; formatted
'1.23 replace {}'
</code></pre>
<p>然而，str.format方法并没有解决上面讲的第二个缺点。如果在对值做填充之前要先对这个值做出调整，那么用这种方法写出来的代码还是跟原来一样乱，阅读性差。对比一下：</p>
<pre><code>&gt;&gt;&gt; pantry = [
...     ('avocados', 1.25),
...     ('bananas', 2.5),
...     ('cherries', 15)
... ]
&gt;&gt;&gt; for i, (item, count) in enumerate(pantry):
...     before = '#%d: %-10s = %.2f' % (
...         i + 1,
...         item.title(),
...         round(count)
...         )
...     after = '#%(loop)d: %(item)-10s = %(count).2f' % {
...         'loop': i + 1,
...         'item': item.title(),
...         'count': round(count)
...     }
...     new_style = '#{}: {:&lt;10s} = {:.2f}'.format(
...         i + 1,
...         item.title(),
...         round(count)
...     )
...     assert before == after == new_style
...     print(before)
...     print(after)
...     print(new_style)
... 
#1: Avocados   = 1.00
#1: Avocados   = 1.00
#1: Avocados   = 1.00
#2: Bananas    = 2.00
#2: Bananas    = 2.00
#2: Bananas    = 2.00
#3: Cherries   = 15.00
#3: Cherries   = 15.00
#3: Cherries   = 15.00
</code></pre>
<h2 id="f-string">插值格式字符串f-string</h2>
<p>Python 3.6添加了一种新的特性，叫作插值格式字符串（interpolated format string，简称f-string），可以解决上面提到的所有问题。</p>
<p>下面按照从短到长的顺序把这几种写法所占的篇幅对比一下，这样很容易看出符号右边的代码到底有多少。C风格的写法与采用str.format方法的写法可能会让表达式变得很长，但如果改用f-string，或许一行就能写完。</p>
<pre><code>&gt;&gt;&gt; key = 'my_var'
&gt;&gt;&gt; value = 1.234
&gt;&gt;&gt; f_string = f'{key:&lt;10} = {value:.2f}'
&gt;&gt;&gt; c_tuple = '%-10s = %.2f' % (key, value)
&gt;&gt;&gt; str_args = '{:&lt;10} = {:.2f}'.format(key, value)
&gt;&gt;&gt; str_kw = '{key:&lt;10} = {value:.2f}'.format(key=key, value=value)
&gt;&gt;&gt; c_dict = '%(key)-10s = %(value).2f' % {'key': key, 'value': value}

&gt;&gt;&gt; assert c_tuple == c_dict == f_string
&gt;&gt;&gt; assert str_args == str_kw == f_string

&gt;&gt;&gt; f_string
'my_var     = 1.23'
&gt;&gt;&gt; c_tuple
'my_var     = 1.23'
&gt;&gt;&gt; str_args
'my_var     = 1.23'
&gt;&gt;&gt; str_kw
'my_var     = 1.23'
&gt;&gt;&gt; c_dict
'my_var     = 1.23'
</code></pre>
<p>对比下面，把str.format方法的写法改用f-string，一行就能写完。</p>
<pre><code>&gt;&gt;&gt; pantry = [
...     ('avocados', 1.25),
...     ('bananas', 2.5),
...     ('cherries', 15)
... ]
&gt;&gt;&gt; for i, (item, count) in enumerate(pantry):
...     before = '#%d: %-10s = %.2f' % (
...         i + 1,
...         item.title(),
...         round(count)
...         )
...     after = '#%(loop)d: %(item)-10s = %(count).2f' % {
...         'loop': i + 1,
...         'item': item.title(),
...         'count': round(count)
...     }
...     new_style = '#{}: {:&lt;10s} = {:.2f}'.format(
...         i + 1,
...         item.title(),
...         round(count)
...     )
...     f_string = f'#{i+1}: {item.title():&lt;10s} = {round(count):.2f}'
...     assert before == after == new_style == f_string
...     print(before)
...     print(after)
...     print(new_style)
...     print(f_string)
... 
#1: Avocados   = 1.00
#1: Avocados   = 1.00
#1: Avocados   = 1.00
#1: Avocados   = 1.00
#2: Bananas    = 2.00
#2: Bananas    = 2.00
#2: Bananas    = 2.00
#2: Bananas    = 2.00
#3: Cherries   = 15.00
#3: Cherries   = 15.00
#3: Cherries   = 15.00
#3: Cherries   = 15.00
</code></pre>
<p>要点总结：</p>
<ul>
<li>采用%操作符把值填充到C风格的格式字符串时会遇到许多问题，而且这种写法比较烦琐。</li>
<li>str.format方法专门用一套迷你语言来定义它的格式说明符，这套语言给我们提供了一些有用的概念，但是在其他方面，这个方法还是存在与C风格的格式字符串一样的多种缺点，所以我们也应该避免使用它。</li>
<li>f-string采用新的写法，将值填充到字符串之中，解决了C风格的格式字符串所带来的最大问题。</li>
<li>f-string是个简洁而强大的机制，可以直接在格式说明符里嵌入任意Python表达式。</li>
</ul>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../../assets/javascripts/workers/search.22074ed6.min.js"}</script>
    
    
      <script src="../../../assets/javascripts/bundle.960e086b.min.js"></script>
      
    
  </body>
</html>