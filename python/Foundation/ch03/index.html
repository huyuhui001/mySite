<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://huyuhui001.github.io/mySite/python/Foundation/ch03/ rel=canonical><link rel=icon href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.3.1, mkdocs-material-8.4.3"><title>Python内置函数及文件 - Knowledge and Action</title><link rel=stylesheet href=../../../assets/stylesheets/main.6b80c2a2.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.cbb835fc.min.css><meta name=theme-color content=#009485><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../extra.css><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme data-md-color-primary=teal data-md-color-accent=green> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#python class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title="Knowledge and Action" class="md-header__button md-logo" aria-label="Knowledge and Action" data-md-component=logo> <img src=../../../assets/logo.jpg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Knowledge and Action </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Python内置函数及文件 </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/huyuhui001/mySite title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> huyuhui001/mySite </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> Knowledge and Action </a> </li> <li class=md-tabs__item> <a href=../../../linux/ class=md-tabs__link> Linux </a> </li> <li class=md-tabs__item> <a href=../../../k8s/ class=md-tabs__link> Kubernetes </a> </li> <li class=md-tabs__item> <a href=../../ class="md-tabs__link md-tabs__link--active"> Python </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title="Knowledge and Action" class="md-nav__button md-logo" aria-label="Knowledge and Action" data-md-component=logo> <img src=../../../assets/logo.jpg alt=logo> </a> Knowledge and Action </label> <div class=md-nav__source> <a href=https://github.com/huyuhui001/mySite title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> huyuhui001/mySite </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_1 type=checkbox id=__nav_1> <label class=md-nav__link for=__nav_1> Knowledge and Action <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Knowledge and Action" data-md-level=1> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Knowledge and Action </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> Index </a> </li> <li class=md-nav__item> <a href=../../../about/ class=md-nav__link> About </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2> Linux <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Linux data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Linux </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../linux/ class=md-nav__link> Index </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_2 type=checkbox id=__nav_2_2> <label class=md-nav__link for=__nav_2_2> Linux SRE <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Linux SRE" data-md-level=2> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> Linux SRE </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../linux/SRE/01-fundamentals/ class=md-nav__link> 第一章 Linux基础 </a> </li> <li class=md-nav__item> <a href=../../../linux/SRE/02-filesystem/ class=md-nav__link> 第二章 文件系统 </a> </li> <li class=md-nav__item> <a href=../../../linux/SRE/03-identity-security/ class=md-nav__link> 第三章 身份与安全 </a> </li> <li class=md-nav__item> <a href=../../../linux/SRE/04-TextTools/ class=md-nav__link> 第四章 文本编辑 </a> </li> <li class=md-nav__item> <a href=../../../linux/SRE/05-RegExpress/ class=md-nav__link> 第五章 正则表达式 </a> </li> <li class=md-nav__item> <a href=../../../linux/SRE/06-FileLookup/ class=md-nav__link> 第六章 文件查找 </a> </li> <li class=md-nav__item> <a href=../../../linux/SRE/07-FilePacking/ class=md-nav__link> 第七章 文件打包和解包 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_3 type=checkbox id=__nav_2_3> <label class=md-nav__link for=__nav_2_3> SUSE Linux Administration <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="SUSE Linux Administration" data-md-level=2> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> SUSE Linux Administration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../linux/Administration/01/ class=md-nav__link> Linux File System Overview </a> </li> <li class=md-nav__item> <a href=../../../linux/Administration/02/ class=md-nav__link> Useful Commands </a> </li> <li class=md-nav__item> <a href=../../../linux/Administration/03/ class=md-nav__link> Shell </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_4 type=checkbox id=__nav_2_4> <label class=md-nav__link for=__nav_2_4> SUSE Enterprise Storage Foundation <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="SUSE Enterprise Storage Foundation" data-md-level=2> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> SUSE Enterprise Storage Foundation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../linux/SES/linux_ses_memo/ class=md-nav__link> SUSE Enterprise Storage Foundation </a> </li> <li class=md-nav__item> <a href=../../../linux/SES/linux_ses_demo/ class=md-nav__link> SUSE Enterprise Storage Basic Operation </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3> Kubernetes <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Kubernetes data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Kubernetes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/ class=md-nav__link> Index </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_2 type=checkbox id=__nav_3_2> <label class=md-nav__link for=__nav_3_2> CKA Learning Memo <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="CKA Learning Memo" data-md-level=2> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> CKA Learning Memo </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_2_1 type=checkbox id=__nav_3_2_1> <label class=md-nav__link for=__nav_3_2_1> Installation <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Installation data-md-level=3> <label class=md-nav__title for=__nav_3_2_1> <span class="md-nav__icon md-icon"></span> Installation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_en/installation/single-local/ class=md-nav__link> Single Node Installation </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/installation/multiple-local/ class=md-nav__link> Multiple Nodes Installation </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/installation/aliyun-ubuntu/ class=md-nav__link> Installation on Aliyun ECS </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_2_2 type=checkbox id=__nav_3_2_2> <label class=md-nav__link for=__nav_3_2_2> Docker <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Docker data-md-level=3> <label class=md-nav__title for=__nav_3_2_2> <span class="md-nav__icon md-icon"></span> Docker </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/docker/ class=md-nav__link> Fundamentals </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_2_3 type=checkbox id=__nav_3_2_3> <label class=md-nav__link for=__nav_3_2_3> Foundamentals <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Foundamentals data-md-level=3> <label class=md-nav__title for=__nav_3_2_3> <span class="md-nav__icon md-icon"></span> Foundamentals </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/memo/ class=md-nav__link> Memo </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/basics/ class=md-nav__link> kubectl basics </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_2_4 type=checkbox id=__nav_3_2_4> <label class=md-nav__link for=__nav_3_2_4> Core Kubernetes <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Core Kubernetes" data-md-level=3> <label class=md-nav__title for=__nav_3_2_4> <span class="md-nav__icon md-icon"></span> Core Kubernetes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/pod/ class=md-nav__link> Pod </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/deployment/ class=md-nav__link> Deployment </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/service/ class=md-nav__link> Service </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_2_5 type=checkbox id=__nav_3_2_5> <label class=md-nav__link for=__nav_3_2_5> Application Modeling <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Application Modeling" data-md-level=3> <label class=md-nav__title for=__nav_3_2_5> <span class="md-nav__icon md-icon"></span> Application Modeling </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/namespace/ class=md-nav__link> Namespace </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/statefulset/ class=md-nav__link> StatefulSet </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/daemonset/ class=md-nav__link> DaemonSet </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/job/ class=md-nav__link> Job and Cronjob </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/configuration/ class=md-nav__link> Configuration </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/secrets/ class=md-nav__link> Secrets </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/persistence/ class=md-nav__link> Persistence </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/rbac/ class=md-nav__link> Role Based Access Control (RBAC) </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/ingress/ class=md-nav__link> Ingress </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_2_6 type=checkbox id=__nav_3_2_6> <label class=md-nav__link for=__nav_3_2_6> Advanced Kubernetes <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Advanced Kubernetes" data-md-level=3> <label class=md-nav__title for=__nav_3_2_6> <span class="md-nav__icon md-icon"></span> Advanced Kubernetes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/scheduling/ class=md-nav__link> Scheduling </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/hpa/ class=md-nav__link> Horizontal Pod Autoscaling </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/policy/ class=md-nav__link> Policy </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/networkpolicy/ class=md-nav__link> Network Policy </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/clustermgt/ class=md-nav__link> Cluster Management </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_2_7 type=checkbox id=__nav_3_2_7> <label class=md-nav__link for=__nav_3_2_7> Operating Kubernetes <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Operating Kubernetes" data-md-level=3> <label class=md-nav__title for=__nav_3_2_7> <span class="md-nav__icon md-icon"></span> Operating Kubernetes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/troubleshooting/ class=md-nav__link> Troubleshooting </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/healthcheck/ class=md-nav__link> Health Check </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/helming/ class=md-nav__link> Helming </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_2_8 type=checkbox id=__nav_3_2_8> <label class=md-nav__link for=__nav_3_2_8> Topics <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Topics data-md-level=3> <label class=md-nav__title for=__nav_3_2_8> <span class="md-nav__icon md-icon"></span> Topics </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/casestudy-operation-resources/ class=md-nav__link> Operations on Resources </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/casestudy-health-check/ class=md-nav__link> Health Check </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/casestudy-calico/ class=md-nav__link> Calico Installation </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/kyma/ class=md-nav__link> Kyma </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3 type=checkbox id=__nav_3_3> <label class=md-nav__link for=__nav_3_3> CKA学习笔记 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=CKA学习笔记 data-md-level=2> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> CKA学习笔记 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3_1 type=checkbox id=__nav_3_3_1> <label class=md-nav__link for=__nav_3_3_1> 安装 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=安装 data-md-level=3> <label class=md-nav__title for=__nav_3_3_1> <span class="md-nav__icon md-icon"></span> 安装 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_cn/installation/single-local/ class=md-nav__link> 单节点虚拟机安装Kubernetes </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/installation/multiple-local/ class=md-nav__link> 多节点虚拟机安装Kubernetes </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/installation/aliyun-ubuntu/ class=md-nav__link> 阿里云ECS安装Kubernetes </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3_2 type=checkbox id=__nav_3_3_2> <label class=md-nav__link for=__nav_3_3_2> Docker <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Docker data-md-level=3> <label class=md-nav__title for=__nav_3_3_2> <span class="md-nav__icon md-icon"></span> Docker </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/docker/ class=md-nav__link> Docker基础 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3_3 type=checkbox id=__nav_3_3_3> <label class=md-nav__link for=__nav_3_3_3> 基础知识 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=基础知识 data-md-level=3> <label class=md-nav__title for=__nav_3_3_3> <span class="md-nav__icon md-icon"></span> 基础知识 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/memo/ class=md-nav__link> Kubernetes随笔 </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/overview/ class=md-nav__link> Kubernetes集群概览 </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/basics/ class=md-nav__link> kubectl基础 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3_4 type=checkbox id=__nav_3_3_4> <label class=md-nav__link for=__nav_3_3_4> 核心概念 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=核心概念 data-md-level=3> <label class=md-nav__title for=__nav_3_3_4> <span class="md-nav__icon md-icon"></span> 核心概念 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/pod/ class=md-nav__link> Pod </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/deployment/ class=md-nav__link> Deployment </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/service/ class=md-nav__link> Service </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3_5 type=checkbox id=__nav_3_3_5> <label class=md-nav__link for=__nav_3_3_5> 应用体系 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=应用体系 data-md-level=3> <label class=md-nav__title for=__nav_3_3_5> <span class="md-nav__icon md-icon"></span> 应用体系 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/namespace/ class=md-nav__link> Namespace </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/statefulset/ class=md-nav__link> StatefulSet </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/daemonset/ class=md-nav__link> DaemonSet </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/job/ class=md-nav__link> Job and Cronjob </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/configuration/ class=md-nav__link> Configuration </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/secrets/ class=md-nav__link> secrets </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/persistence/ class=md-nav__link> Persistence </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/rbac/ class=md-nav__link> RBAC鉴权 </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/ingress/ class=md-nav__link> Ingress-nginx </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3_6 type=checkbox id=__nav_3_3_6> <label class=md-nav__link for=__nav_3_3_6> 进阶概念 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=进阶概念 data-md-level=3> <label class=md-nav__title for=__nav_3_3_6> <span class="md-nav__icon md-icon"></span> 进阶概念 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/scheduling/ class=md-nav__link> Scheduling </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/hpa/ class=md-nav__link> Horizontal Pod Autoscaling (HPA) </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/policy/ class=md-nav__link> Policy </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/networkpolicy/ class=md-nav__link> Network Policy </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/clustermgt/ class=md-nav__link> Cluster Management </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3_7 type=checkbox id=__nav_3_3_7> <label class=md-nav__link for=__nav_3_3_7> 日常维护 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=日常维护 data-md-level=3> <label class=md-nav__title for=__nav_3_3_7> <span class="md-nav__icon md-icon"></span> 日常维护 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/troubleshooting/ class=md-nav__link> Troubleshooting </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/healthcheck/ class=md-nav__link> 健康检查 </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/helming/ class=md-nav__link> Helm Chart </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3_8 type=checkbox id=__nav_3_3_8> <label class=md-nav__link for=__nav_3_3_8> 主题讨论 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=主题讨论 data-md-level=3> <label class=md-nav__title for=__nav_3_3_8> <span class="md-nav__icon md-icon"></span> 主题讨论 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/casestudy-operation-resources/ class=md-nav__link> Kubernetes资源常见操作 </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/casestudy-health-check/ class=md-nav__link> 健康检查 </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/casestudy-calico/ class=md-nav__link> 安装Calico </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_4 type=checkbox id=__nav_3_4> <label class=md-nav__link for=__nav_3_4> Demos <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Demos data-md-level=2> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> Demos </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/demo/cap_on_kyma/ class=md-nav__link> Build CAP Application on Kyma </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4> Python <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Python data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Python </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ class=md-nav__link> Index </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_2 type=checkbox id=__nav_4_2 checked> <label class=md-nav__link for=__nav_4_2> Python基础 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Python基础 data-md-level=2> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Python基础 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ch00/ class=md-nav__link> Python安装 </a> </li> <li class=md-nav__item> <a href=../ch01/ class=md-nav__link> Python语言基础 </a> </li> <li class=md-nav__item> <a href=../ch02/ class=md-nav__link> Python打包和解包 </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Python内置函数及文件 <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Python内置函数及文件 </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#1-lambda class=md-nav__link> 1. 匿名（Lambda）函数 </a> </li> <li class=md-nav__item> <a href=#2-enumerate class=md-nav__link> 2. 内置序列函数enumerate </a> </li> <li class=md-nav__item> <a href=#3 class=md-nav__link> 3. 列表、集合和字典的推导式 </a> <nav class=md-nav aria-label="3. 列表、集合和字典的推导式"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#list-comprehension class=md-nav__link> 列表推导式(list comprehension) </a> <nav class=md-nav aria-label="列表推导式(list comprehension)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_1 class=md-nav__link> 套列表推导式 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_2 class=md-nav__link> 元组推导式 </a> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> 集合推导式 </a> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> 字典推导式 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#4 class=md-nav__link> 4. 函数声明 </a> </li> <li class=md-nav__item> <a href=#5 class=md-nav__link> 5. 命名空间、作用域和本地函数 </a> </li> <li class=md-nav__item> <a href=#6 class=md-nav__link> 6. 柯里化：部分参数应用 </a> </li> <li class=md-nav__item> <a href=#7 class=md-nav__link> 7. 迭代器与生成器 </a> <nav class=md-nav aria-label="7. 迭代器与生成器"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_5 class=md-nav__link> 迭代器 </a> </li> <li class=md-nav__item> <a href=#_6 class=md-nav__link> 生成器 </a> </li> <li class=md-nav__item> <a href=#itertools class=md-nav__link> 生成器：itertools模块 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#8 class=md-nav__link> 8. 错误和异常处理 </a> </li> <li class=md-nav__item> <a href=#9 class=md-nav__link> 9. 文件与操作系统 </a> </li> <li class=md-nav__item> <a href=#10 class=md-nav__link> 10. 装饰器 </a> <nav class=md-nav aria-label="10. 装饰器"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_7 class=md-nav__link> 闭包 </a> </li> <li class=md-nav__item> <a href=#_8 class=md-nav__link> 装饰器 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../ch04/ class=md-nav__link> Python面向对象概念 </a> </li> <li class=md-nav__item> <a href=../ch05/ class=md-nav__link> Python面向对象三大特性 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3 type=checkbox id=__nav_4_3> <label class=md-nav__link for=__nav_4_3> Python数据分析基础 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Python数据分析基础 data-md-level=2> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> Python数据分析基础 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../DataAnalysis/ch01/ class=md-nav__link> NumPy基础 </a> </li> <li class=md-nav__item> <a href=../../DataAnalysis/ch10/ class=md-nav__link> NumPy进阶 </a> </li> <li class=md-nav__item> <a href=../../DataAnalysis/ch02/ class=md-nav__link> Pandas入门 </a> </li> <li class=md-nav__item> <a href=../../DataAnalysis/ch03/ class=md-nav__link> 数据载入、存储及文件格式 </a> </li> <li class=md-nav__item> <a href=../../DataAnalysis/ch04/ class=md-nav__link> 数据清洗与准备 </a> </li> <li class=md-nav__item> <a href=../../DataAnalysis/ch05/ class=md-nav__link> 数据规整：连接、联合与重塑 </a> </li> <li class=md-nav__item> <a href=../../DataAnalysis/ch06/ class=md-nav__link> 绘图与可视化 </a> </li> <li class=md-nav__item> <a href=../../DataAnalysis/ch07/ class=md-nav__link> 数据聚合与分组操作 </a> </li> <li class=md-nav__item> <a href=../../DataAnalysis/ch08/ class=md-nav__link> 时间序列 </a> </li> <li class=md-nav__item> <a href=../../DataAnalysis/ch09/ class=md-nav__link> 高阶pandas </a> </li> <li class=md-nav__item> <a href=../../DataAnalysis/ch11/ class=md-nav__link> Python建模库介绍 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_4 type=checkbox id=__nav_4_4> <label class=md-nav__link for=__nav_4_4> 数据结构和算法 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=数据结构和算法 data-md-level=2> <label class=md-nav__title for=__nav_4_4> <span class="md-nav__icon md-icon"></span> 数据结构和算法 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../DataStructure/01_PythonFundmantal/ class=md-nav__link> 基础知识回顾 </a> </li> <li class=md-nav__item> <a href=../../DataStructure/02_CollectionsOverview/ class=md-nav__link> 多项集的概述 </a> </li> <li class=md-nav__item> <a href=../../DataStructure/03_TimeComplexity/ class=md-nav__link> 搜索、排序以及复杂度分析 </a> </li> <li class=md-nav__item> <a href=../../DataStructure/04_ArrayChain/ class=md-nav__link> 数组和链接结构 </a> </li> <li class=md-nav__item> <a href=../../DataStructure/05_InterfacePolymorphism/ class=md-nav__link> 接口、实现和多态 </a> </li> <li class=md-nav__item> <a href=../../DataStructure/06_InheritanceAbstractClass/ class=md-nav__link> 继承与抽象类 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5 type=checkbox id=__nav_4_5> <label class=md-nav__link for=__nav_4_5> Effective Python <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Effective Python" data-md-level=2> <label class=md-nav__title for=__nav_4_5> <span class="md-nav__icon md-icon"></span> Effective Python </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule01/ class=md-nav__link> 第01条 查询自己使用的Python版本 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule02/ class=md-nav__link> 第02条 遵循PEP 8风格指南 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule03/ class=md-nav__link> 第03条 了解bytes与str的区别 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule04/ class=md-nav__link> 第04条 用支持插值的f-string取代C风格的格式字符串与str.format方法 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule05/ class=md-nav__link> 第05条 用辅助函数取代复杂的表达式 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule06/ class=md-nav__link> 第06条 把数据结构直接拆分到多个变量里，不要专门通过下标访问 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule07/ class=md-nav__link> 第07条 尽量用enumerate取代range </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule08/ class=md-nav__link> 第08条 用zip函数同时遍历两个迭代器 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule09/ class=md-nav__link> 第09条 不要在for与while循环后面写else块 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule10/ class=md-nav__link> 第10条 用赋值表达式减少重复代码 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule11/ class=md-nav__link> 第11条 学会对序列做切片 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule12/ class=md-nav__link> 第12条 不要在切片里同时指定起止下标与步进 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule13/ class=md-nav__link> 第13条 通过带星号的unpacking操作来捕获多个元素,不要用切片 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule14/ class=md-nav__link> 第14条 用sort方法的key参数来表示复杂的排序逻辑 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule15/ class=md-nav__link> 第15条 不要过分依赖给字典添加条目时所用的顺序 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule16/ class=md-nav__link> 第16条 用get处理键不在字典中的情况,不要使用in与KeyError </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule17/ class=md-nav__link> 第17条 用defaultdict处理内部状态中缺失的元素,而不要用setdefault </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule18/ class=md-nav__link> 第18条 学会利用__missing__构造依赖键的默认值 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule19/ class=md-nav__link> 第19条 不要把函数返回的多个数值拆分到三个以上的变量中 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule20/ class=md-nav__link> 第20条 遇到意外状况时应该抛出异常,不要返回None </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule21/ class=md-nav__link> 第21条 了解如何在闭包里面使用外围作用域中的变量 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule22/ class=md-nav__link> 第22条 用数量可变的位置参数给函数设计清晰的参数列表 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule23/ class=md-nav__link> 第23条 用关键字参数来表示可选的行为 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule24/ class=md-nav__link> 第24条 用None和docstring来描述默认值会变的参数 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule25/ class=md-nav__link> 第25条 用只能以关键字指定和只能按位置传入的参数来设计清晰的参数列表 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule26/ class=md-nav__link> 第26条 用functools.wraps定义函数修饰器 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule27/ class=md-nav__link> 第27条 用列表推导取代map与filter </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule28/ class=md-nav__link> 第28条 控制推导逻辑的子表达式不要超过两个 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule29/ class=md-nav__link> 第29条 用赋值表达式消除推导中的重复代码 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule30/ class=md-nav__link> 第30条 不要让函数直接返回列表，应该让它逐个生成列表里的值 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule31/ class=md-nav__link> 第31条 谨慎地迭代函数所收到的参数 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule32/ class=md-nav__link> 第32条 考虑用生成器表达式改写数据量较大的列表推导 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule33/ class=md-nav__link> 第33条 通过yield from把多个生成器连起来用 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule34/ class=md-nav__link> 第34条 不要用send给生成器注入数据 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule35/ class=md-nav__link> 第35条 不要通过throw变换生成器的状态 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule36/ class=md-nav__link> 第36条 考虑用itertools拼装迭代器与生成器 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule37/ class=md-nav__link> 第37条 用组合起来的类来实现多层结构，不要用嵌套的内置类型 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule38/ class=md-nav__link> 第38条 让简单的接口接受函数，而不是类的实例 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule39/ class=md-nav__link> 第39条 通过@classmethod多态来构造同一体系中的各类对象 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule40/ class=md-nav__link> 第40条 通过super初始化超类 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule41/ class=md-nav__link> 第41条 考虑用mix-in类来表示可组合的功能 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule42/ class=md-nav__link> 第42条 优先考虑用public属性表示应受保护的数据,不要用private属性表示 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule43/ class=md-nav__link> 第43条 自定义的容器类型应该从collections.abc继承 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule44/ class=md-nav__link> 第44条 用纯属性与修饰器取代旧式的setter与getter方法 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule45/ class=md-nav__link> 第45条 考虑用@property实现新的属性访问逻辑,不要急着重构原有的代码 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule46/ class=md-nav__link> 第46条 用描述符来改写需要复用的@property方法 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule47/ class=md-nav__link> 第47条 针对惰性属性使用__getattr__、__getattribute__及__setattr__ </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule48/ class=md-nav__link> 第48条 用__init_subclass__验证子类写得是否正确 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule49/ class=md-nav__link> 第49条 用__init_subclass__记录现有的子类 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule50/ class=md-nav__link> 第50条 用__set_name__给类属性加注解 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule51/ class=md-nav__link> 第51条 优先考虑通过类修饰器来提供可组合的扩充功能，不要使用元类 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule52/ class=md-nav__link> 第52条 用subprocess管理子进程 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule53/ class=md-nav__link> 第53条 可以用线程执行阻塞式I/O,但不要用它做并行计算 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule54/ class=md-nav__link> 第54条 利用Lock防止多个线程争用同一份数据 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule55/ class=md-nav__link> 第55条 用Queue来协调各线程之间的工作进度 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule56/ class=md-nav__link> 第56条 学会判断什么场合必须做并发 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule57/ class=md-nav__link> 第57条 不要在每次fan-out时都新建一批Thread实例 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule58/ class=md-nav__link> 第58条 学会正确地重构代码,以便用Queue做并发 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule59/ class=md-nav__link> 第59条 如果必须用线程做并发,那就考虑通过ThreadPoolExecutor实现 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule60/ class=md-nav__link> 第60条 用协程实现高并发的I/O </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule61/ class=md-nav__link> 第61条 学会用asyncio改写那些通过线程实现的I/O </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule62/ class=md-nav__link> 第62条 结合线程与协程,将代码顺利迁移到asyncio </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule63/ class=md-nav__link> 第63条 让asyncio的事件循环保持畅通,以便进一步提升程序的响应能力 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule64/ class=md-nav__link> 第64条 考虑用concurrent.futures实现真正的并行计算 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule65/ class=md-nav__link> 第65条 合理利用try/except/else/finally结构中的每个代码块 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule66/ class=md-nav__link> 第66条 考虑用contextlib和with语句来改写可复用的try/finally代码 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule67/ class=md-nav__link> 第67条 用datetime模块处理本地时间,不要用time模块 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule68/ class=md-nav__link> 第68条 用copyreg实现可靠的pickle操作 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule69/ class=md-nav__link> 第69条 在需要准确计算的场合,用decimal表示相应的数值 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule70/ class=md-nav__link> 第70条 先分析性能，然后再优化 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule71/ class=md-nav__link> 第71条 优先考虑用deque实现生产者-消费者队列 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule72/ class=md-nav__link> 第72条 考虑用bisect搜索已排序的序列 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule73/ class=md-nav__link> 第73条 学会使用heapq制作优先级队列 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule74/ class=md-nav__link> 第74条 考虑用memoryview与bytearray来实现无须拷贝的bytes操作 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule75/ class=md-nav__link> 第75条 通过repr字符串输出调试信息 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule76/ class=md-nav__link> 第76条 在TestCase子类里验证相关的行为 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule77/ class=md-nav__link> 第77条 把测试前、后的准备与清理逻辑写在setUp、tearDown、setUpModule与tearDownModule中,以防用例之间互相干扰 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule78/ class=md-nav__link> 第78条 用Mock来模拟受测代码所依赖的复杂函数 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule79/ class=md-nav__link> 第79条 把受测代码所依赖的系统封装起来，以便于模拟和测试 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule80/ class=md-nav__link> 第80条 考虑用pdb做交互调试 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule81/ class=md-nav__link> 第81条 用tracemalloc来掌握内存的使用与泄漏情况 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule82/ class=md-nav__link> 第82条 学会寻找由其他Python开发者所构建的模块 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule83/ class=md-nav__link> 第83条 用虚拟环境隔离项目,并重建依赖关系 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule84/ class=md-nav__link> 第84条 每一个函数、类与模块都要写docstring </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule85/ class=md-nav__link> 第85条 用包来安排模块,以提供稳固的API </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule86/ class=md-nav__link> 第86条 考虑用模块级别的代码配置不同的部署环境 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule87/ class=md-nav__link> 第87条 为自编的模块定义根异常,让调用者能够专门处理与此API有关的异常 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule88/ class=md-nav__link> 第88条 用适当的方式打破循环依赖关系 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule89/ class=md-nav__link> 第89条 重构时考虑通过warnings提醒开发者API已经发生变化 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule90/ class=md-nav__link> 第90条 考虑通过typing做静态分析,以消除bug </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_6 type=checkbox id=__nav_4_6> <label class=md-nav__link for=__nav_4_6> Demos <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Demos data-md-level=2> <label class=md-nav__title for=__nav_4_6> <span class="md-nav__icon md-icon"></span> Demos </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Demo/CourseSystem/ class=md-nav__link> 选课系统 </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#1-lambda class=md-nav__link> 1. 匿名（Lambda）函数 </a> </li> <li class=md-nav__item> <a href=#2-enumerate class=md-nav__link> 2. 内置序列函数enumerate </a> </li> <li class=md-nav__item> <a href=#3 class=md-nav__link> 3. 列表、集合和字典的推导式 </a> <nav class=md-nav aria-label="3. 列表、集合和字典的推导式"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#list-comprehension class=md-nav__link> 列表推导式(list comprehension) </a> <nav class=md-nav aria-label="列表推导式(list comprehension)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_1 class=md-nav__link> 套列表推导式 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_2 class=md-nav__link> 元组推导式 </a> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> 集合推导式 </a> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> 字典推导式 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#4 class=md-nav__link> 4. 函数声明 </a> </li> <li class=md-nav__item> <a href=#5 class=md-nav__link> 5. 命名空间、作用域和本地函数 </a> </li> <li class=md-nav__item> <a href=#6 class=md-nav__link> 6. 柯里化：部分参数应用 </a> </li> <li class=md-nav__item> <a href=#7 class=md-nav__link> 7. 迭代器与生成器 </a> <nav class=md-nav aria-label="7. 迭代器与生成器"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_5 class=md-nav__link> 迭代器 </a> </li> <li class=md-nav__item> <a href=#_6 class=md-nav__link> 生成器 </a> </li> <li class=md-nav__item> <a href=#itertools class=md-nav__link> 生成器：itertools模块 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#8 class=md-nav__link> 8. 错误和异常处理 </a> </li> <li class=md-nav__item> <a href=#9 class=md-nav__link> 9. 文件与操作系统 </a> </li> <li class=md-nav__item> <a href=#10 class=md-nav__link> 10. 装饰器 </a> <nav class=md-nav aria-label="10. 装饰器"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_7 class=md-nav__link> 闭包 </a> </li> <li class=md-nav__item> <a href=#_8 class=md-nav__link> 装饰器 </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/huyuhui001/mySite/edit/main/docs/python/Foundation/ch03.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg> </a> <h1 id=python>Python内置函数及文件<a class=headerlink href=#python title="Permanent link"> ¶</a></h1> <h2 id=1-lambda>1. 匿名（Lambda）函数<a class=headerlink href=#1-lambda title="Permanent link"> ¶</a></h2> <p>匿名函数是一种通过单个语句生成函数的方式，其结果是返回值。匿名函数使用lambda关键字定义，该关键字仅表达“我们声明一个匿名函数”的意思。</p> <p>lambda 函数可以接收任意多个参数 (包括可选参数) 并且返回单个表达式的值。</p> <p>语法格式：<code>lambda arg1,arg2,arg3… :&lt;表达式&gt;</code></p> <div class=highlight><pre><span></span><code><span class=n>f</span> <span class=o>=</span> <span class=k>lambda</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>:</span> <span class=n>x</span> <span class=o>*</span> <span class=n>y</span>
<span class=nb>print</span><span class=p>(</span><span class=n>f</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>))</span>  
<span class=c1># 6</span>

<span class=n>f</span> <span class=o>=</span> <span class=p>[</span><span class=k>lambda</span> <span class=n>a</span><span class=p>:</span> <span class=n>a</span> <span class=o>*</span> <span class=mi>2</span><span class=p>,</span> <span class=k>lambda</span> <span class=n>b</span><span class=p>:</span> <span class=n>b</span> <span class=o>*</span> <span class=mi>3</span><span class=p>]</span>
<span class=nb>print</span><span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>](</span><span class=mi>5</span><span class=p>))</span>  <span class=c1># 执行f列表第一个元素</span>
<span class=c1># 10  </span>

<span class=nb>print</span><span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=mi>1</span><span class=p>](</span><span class=mi>5</span><span class=p>))</span>  <span class=c1># 执行f元素第二个元素</span>
<span class=c1># 15  </span>

<span class=nb>print</span><span class=p>(</span><span class=n>f</span><span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>](</span><span class=mi>5</span><span class=p>,</span> <span class=mi>5</span><span class=p>))</span>  
<span class=c1># TypeError: list indices must be integers or slices, not tuple</span>
</code></pre></div> <p>示例1：</p> <div class=highlight><pre><span></span><code><span class=k>def</span> <span class=nf>short_func1</span><span class=p>(</span><span class=n>x</span><span class=p>):</span>
    <span class=k>return</span> <span class=n>x</span> <span class=o>*</span> <span class=mi>2</span>

<span class=n>short_func2</span> <span class=o>=</span> <span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=n>x</span> <span class=o>*</span> <span class=mi>2</span>

<span class=nb>print</span><span class=p>(</span><span class=n>short_func1</span><span class=p>(</span><span class=mi>5</span><span class=p>))</span>  
<span class=c1># 10</span>
<span class=nb>print</span><span class=p>(</span><span class=n>short_func2</span><span class=p>(</span><span class=mi>5</span><span class=p>))</span>  
<span class=c1># 10</span>
</code></pre></div> <p>示例2：</p> <div class=highlight><pre><span></span><code><span class=k>def</span> <span class=nf>apply_to_list</span><span class=p>(</span><span class=n>some_list</span><span class=p>,</span> <span class=n>f</span><span class=p>):</span>
    <span class=k>return</span> <span class=p>[</span><span class=n>f</span><span class=p>(</span><span class=n>x</span><span class=p>)</span> <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=n>some_list</span><span class=p>]</span>

<span class=n>ints</span> <span class=o>=</span> <span class=p>[</span><span class=mi>4</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>]</span>
<span class=n>result5</span> <span class=o>=</span> <span class=n>apply_to_list</span><span class=p>(</span><span class=n>ints</span><span class=p>,</span> <span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=n>x</span> <span class=o>*</span> <span class=mi>2</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=n>result5</span><span class=p>)</span>  
<span class=c1># [8, 0, 2, 10, 12]</span>
</code></pre></div> <p>lambda: None 函数没有输入参数，输出是None。</p> <div class=highlight><pre><span></span><code><span class=nb>print</span><span class=p>(</span><span class=k>lambda</span><span class=p>:</span> <span class=kc>None</span><span class=p>)</span>
<span class=c1># &lt;function &lt;lambda&gt; at 0x7fa5c4097670&gt;</span>
</code></pre></div> <p>lambda **kwargs: 1 输入是任意键值对参数，输出是1。</p> <div class=highlight><pre><span></span><code><span class=nb>print</span><span class=p>(</span><span class=k>lambda</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>:</span> <span class=mi>1</span><span class=p>)</span>
<span class=c1># &lt;function &lt;lambda&gt; at 0x7fa5c4097670&gt;</span>
</code></pre></div> <h2 id=2-enumerate>2. 内置序列函数enumerate<a class=headerlink href=#2-enumerate title="Permanent link"> ¶</a></h2> <p>当需要对数据建立索引时，一种有效的模式就是使用enumerate构造一个字典，将序列值（假设是唯一的）映射到索引位置上。</p> <div class=highlight><pre><span></span><code><span class=n>seasons</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;Spring&#39;</span><span class=p>,</span> <span class=s1>&#39;Summer&#39;</span><span class=p>,</span> <span class=s1>&#39;Fall&#39;</span><span class=p>,</span> <span class=s1>&#39;Winter&#39;</span><span class=p>]</span>

<span class=nb>print</span><span class=p>(</span><span class=nb>list</span><span class=p>(</span><span class=nb>enumerate</span><span class=p>(</span><span class=n>seasons</span><span class=p>)))</span>  
<span class=c1># [(0, &#39;Spring&#39;), (1, &#39;Summer&#39;), (2, &#39;Fall&#39;), (3, &#39;Winter&#39;)]</span>
</code></pre></div> <p>对比下面2个循环</p> <div class=highlight><pre><span></span><code><span class=n>a_list</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;foo&#39;</span><span class=p>,</span> <span class=s1>&#39;bar&#39;</span><span class=p>,</span> <span class=s1>&#39;baz&#39;</span><span class=p>]</span>
<span class=n>mapping</span> <span class=o>=</span> <span class=p>{}</span>
<span class=k>for</span> <span class=n>i</span><span class=p>,</span> <span class=n>v</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=n>a_list</span><span class=p>):</span>  <span class=c1># enumerate生成索引值i和序列值v</span>
    <span class=n>mapping</span><span class=p>[</span><span class=n>v</span><span class=p>]</span> <span class=o>=</span> <span class=n>i</span>

<span class=nb>print</span><span class=p>(</span><span class=n>mapping</span><span class=p>)</span>  
<span class=c1># {&#39;foo&#39;: 0, &#39;bar&#39;: 1, &#39;baz&#39;: 2}</span>

<span class=n>i</span> <span class=o>=</span> <span class=mi>0</span>
<span class=n>mapping</span> <span class=o>=</span> <span class=p>{}</span>
<span class=k>for</span> <span class=n>v</span> <span class=ow>in</span> <span class=n>a_list</span><span class=p>:</span>
    <span class=nb>print</span><span class=p>(</span><span class=n>i</span><span class=p>,</span> <span class=n>a_list</span><span class=p>[</span><span class=n>i</span><span class=p>])</span>
    <span class=n>mapping</span><span class=p>[</span><span class=n>v</span><span class=p>]</span> <span class=o>=</span> <span class=n>i</span>  <span class=c1># 可以把i和v互换</span>
    <span class=n>i</span> <span class=o>+=</span> <span class=mi>1</span>

<span class=nb>print</span><span class=p>(</span><span class=n>mapping</span><span class=p>)</span>  
<span class=c1># {&#39;foo&#39;: 0, &#39;bar&#39;: 1, &#39;baz&#39;: 2}</span>
</code></pre></div> <p>利用 enumerate() 批量修改列表内的元素</p> <div class=highlight><pre><span></span><code><span class=n>a_list</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;01&#39;</span><span class=p>,</span> <span class=s1>&#39;02&#39;</span><span class=p>,</span> <span class=s1>&#39;03&#39;</span><span class=p>]</span>
<span class=n>unit_element</span> <span class=o>=</span> <span class=s1>&#39;1&#39;</span>
<span class=k>for</span> <span class=n>i</span><span class=p>,</span> <span class=n>element</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=n>a_list</span><span class=p>):</span>
    <span class=n>a_list</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=n>unit_element</span> <span class=o>+</span> <span class=n>element</span>

<span class=nb>print</span><span class=p>(</span><span class=n>a_list</span><span class=p>)</span>  
<span class=c1># [&#39;101&#39;, &#39;102&#39;, &#39;103&#39;]</span>
</code></pre></div> <p>sorted函数返回一个根据任意序列中的元素新建的已排序列表。sorted函数接受的参数与列表的sort方法一致。</p> <div class=highlight><pre><span></span><code><span class=n>y</span> <span class=o>=</span> <span class=nb>sorted</span><span class=p>([</span><span class=mi>7</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>2</span><span class=p>])</span>
<span class=nb>print</span><span class=p>(</span><span class=n>y</span><span class=p>)</span>  <span class=c1># [0, 1, 2, 2, 3, 6, 7] 结果已排序</span>

<span class=n>z</span> <span class=o>=</span> <span class=nb>sorted</span><span class=p>(</span><span class=s1>&#39;Hello World&#39;</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=n>z</span><span class=p>)</span>  
<span class=c1># [&#39; &#39;, &#39;H&#39;, &#39;W&#39;, &#39;d&#39;, &#39;e&#39;, &#39;l&#39;, &#39;l&#39;, &#39;l&#39;, &#39;o&#39;, &#39;o&#39;, &#39;r&#39;]</span>
</code></pre></div> <p>zip将列表、元组或其他序列的元素配对，新建一个元组构成的列表。</p> <div class=highlight><pre><span></span><code><span class=n>seq1</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;foo&#39;</span><span class=p>,</span> <span class=s1>&#39;bar&#39;</span><span class=p>,</span> <span class=s1>&#39;baz&#39;</span><span class=p>]</span>
<span class=n>seq2</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;one&#39;</span><span class=p>,</span> <span class=s1>&#39;two&#39;</span><span class=p>,</span> <span class=s1>&#39;three&#39;</span><span class=p>]</span>
<span class=n>seq3</span> <span class=o>=</span> <span class=p>[</span><span class=kc>False</span><span class=p>,</span> <span class=kc>True</span><span class=p>]</span>

<span class=n>zipped</span> <span class=o>=</span> <span class=nb>zip</span><span class=p>(</span><span class=n>seq1</span><span class=p>,</span> <span class=n>seq2</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=nb>list</span><span class=p>(</span><span class=n>zipped</span><span class=p>))</span>  
<span class=c1># [(&#39;foo&#39;, &#39;one&#39;), (&#39;bar&#39;, &#39;two&#39;), (&#39;baz&#39;, &#39;three&#39;)]</span>

<span class=n>zipped</span> <span class=o>=</span> <span class=nb>zip</span><span class=p>(</span><span class=n>seq1</span><span class=p>,</span> <span class=n>seq2</span><span class=p>,</span> <span class=n>seq3</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=nb>list</span><span class=p>(</span><span class=n>zipped</span><span class=p>))</span>  
<span class=c1># [(&#39;foo&#39;, &#39;one&#39;, False), (&#39;bar&#39;, &#39;two&#39;, True)]</span>

<span class=k>for</span> <span class=n>i</span><span class=p>,</span> <span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>)</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=nb>zip</span><span class=p>(</span><span class=n>seq1</span><span class=p>,</span> <span class=n>seq2</span><span class=p>)):</span>
    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;</span><span class=si>{0}</span><span class=s1>: </span><span class=si>{1}</span><span class=s1>, </span><span class=si>{2}</span><span class=s1>&#39;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>i</span><span class=p>,</span> <span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>))</span>  <span class=c1># 方法1 {0}列表元素的索引, {1}元组中第一个值, {2}元组中第二个值</span>
    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;</span><span class=si>{</span><span class=n>i</span><span class=si>}</span><span class=s1>: </span><span class=si>{</span><span class=n>a</span><span class=si>}</span><span class=s1>, </span><span class=si>{</span><span class=n>b</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span> <span class=c1># 方法2</span>
    <span class=c1># 0: foo, one</span>
    <span class=c1># 1: bar, two</span>
    <span class=c1># 2: baz, three</span>
</code></pre></div> <p>给定一个已“配对”的序列时，zip函数可以去“拆分”序列。这种方式的另一种思路就是将行的列表转换为列的列表。参考Python的<a href=../ch02/ >Unpacking</a></p> <div class=highlight><pre><span></span><code><span class=n>pitchers</span> <span class=o>=</span> <span class=p>[(</span><span class=s1>&#39;Jack&#39;</span><span class=p>,</span> <span class=s1>&#39;Ma&#39;</span><span class=p>),</span> <span class=p>(</span><span class=s1>&#39;Tom&#39;</span><span class=p>,</span> <span class=s1>&#39;Li&#39;</span><span class=p>),</span> <span class=p>(</span><span class=s1>&#39;Jimmy&#39;</span><span class=p>,</span> <span class=s1>&#39;Zhang&#39;</span><span class=p>)]</span>
<span class=n>first_names</span><span class=p>,</span> <span class=n>last_names</span> <span class=o>=</span> <span class=nb>zip</span><span class=p>(</span><span class=o>*</span><span class=n>pitchers</span><span class=p>)</span>

<span class=nb>print</span><span class=p>(</span><span class=n>first_names</span><span class=p>)</span>  
<span class=c1># (&#39;Jack&#39;, &#39;Tom&#39;, &#39;Jimmy&#39;)</span>
<span class=nb>print</span><span class=p>(</span><span class=n>last_names</span><span class=p>)</span>  
<span class=c1># (&#39;Ma&#39;, &#39;Li&#39;, &#39;Zhang&#39;)</span>
</code></pre></div> <p>reversed函数将序列的元素倒序排列</p> <div class=highlight><pre><span></span><code><span class=nb>print</span><span class=p>(</span><span class=nb>list</span><span class=p>(</span><span class=nb>reversed</span><span class=p>(</span><span class=nb>range</span><span class=p>(</span><span class=mi>10</span><span class=p>))))</span>  
<span class=c1># [9, 8, 7, 6, 5, 4, 3, 2, 1, 0]</span>
</code></pre></div> <h2 id=3>3. 列表、集合和字典的推导式<a class=headerlink href=#3 title="Permanent link"> ¶</a></h2> <p>推导式comprehensions（又称解析式），是Python的一种特性。使用推导式可以快速生成列表、元组、集合、字典类型的数据。推导式又分为列表推导式、元组推导式、集合推导式、字典推导式。</p> <h3 id=list-comprehension>列表推导式(list comprehension)<a class=headerlink href=#list-comprehension title="Permanent link"> ¶</a></h3> <p>列表推导式(list comprehension)允许你过滤一个容器的元素，用一种简明的表达式转换传递给过滤器的元素，从而生成一个新的列表。</p> <p>列表推导式的基本形式为：[expr for val in collection if condition]，条件if-condition不是必须的，可以只保留表达式。列表推导式与下面的for循环是等价的：</p> <div class=highlight><pre><span></span><code><span class=n>result</span> <span class=o>=</span> <span class=p>[]</span>
<span class=k>for</span> <span class=n>val</span> <span class=ow>in</span> <span class=n>collection</span><span class=p>:</span>
    <span class=k>if</span> <span class=n>condition</span><span class=p>:</span>
        <span class=n>result</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div> <p>看下面的例子：</p> <div class=highlight><pre><span></span><code><span class=n>data</span> <span class=o>=</span> <span class=p>[]</span>

<span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=o>-</span><span class=mi>5</span><span class=p>,</span> <span class=mi>5</span><span class=p>):</span>
    <span class=k>if</span> <span class=n>i</span> <span class=o>&gt;=</span> <span class=o>-</span><span class=mi>1</span><span class=p>:</span>
        <span class=n>data</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>i</span><span class=o>**</span><span class=mi>2</span><span class=p>)</span>

<span class=nb>print</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
<span class=c1># [1, 0, 1, 4, 9, 16]</span>

<span class=n>data</span> <span class=o>=</span> <span class=p>[</span><span class=n>i</span><span class=o>**</span><span class=mi>2</span> <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=o>-</span><span class=mi>5</span><span class=p>,</span> <span class=mi>5</span><span class=p>)</span> <span class=k>if</span> <span class=n>i</span> <span class=o>&gt;=</span> <span class=o>-</span><span class=mi>1</span><span class=p>]</span>
<span class=nb>print</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
<span class=c1># [1, 0, 1, 4, 9, 16]</span>
</code></pre></div> <p>下面的例子是使用for去遍历一个可迭代的列表。</p> <div class=highlight><pre><span></span><code><span class=n>data</span> <span class=o>=</span> <span class=p>[]</span>
<span class=n>fruit</span> <span class=o>=</span> <span class=p>[</span>
    <span class=s1>&#39;pomegranate&#39;</span><span class=p>,</span>
    <span class=s1>&#39;cherry&#39;</span><span class=p>,</span>
    <span class=s1>&#39;apricot&#39;</span><span class=p>,</span>
    <span class=s1>&#39;date&#39;</span><span class=p>,</span>
    <span class=s1>&#39;Apple&#39;</span><span class=p>,</span>
    <span class=s1>&#39;lemon&#39;</span><span class=p>,</span>
    <span class=s1>&#39;kiwi&#39;</span><span class=p>,</span>
    <span class=s1>&#39;ORANGE&#39;</span><span class=p>,</span>
    <span class=s1>&#39;lime&#39;</span><span class=p>,</span>
    <span class=s1>&#39;Watermelon&#39;</span><span class=p>,</span>
    <span class=s1>&#39;guava&#39;</span><span class=p>,</span>
    <span class=s1>&#39;papaya&#39;</span><span class=p>,</span>
    <span class=s1>&#39;FIG&#39;</span><span class=p>,</span>
    <span class=s1>&#39;pear&#39;</span><span class=p>,</span>
    <span class=s1>&#39;banana&#39;</span><span class=p>,</span>
    <span class=s1>&#39;Tamarind&#39;</span><span class=p>,</span>
    <span class=s1>&#39;persimmon&#39;</span><span class=p>,</span>
    <span class=s1>&#39;elderberry&#39;</span><span class=p>,</span>
    <span class=s1>&#39;peach&#39;</span><span class=p>,</span>
    <span class=s1>&#39;BLUEberry&#39;</span><span class=p>,</span>
    <span class=s1>&#39;lychee&#39;</span><span class=p>,</span>
    <span class=s1>&#39;grape&#39;</span>
<span class=p>]</span>

<span class=n>data</span> <span class=o>=</span> <span class=p>[</span><span class=n>x</span><span class=o>.</span><span class=n>upper</span><span class=p>()</span> <span class=k>if</span> <span class=n>x</span><span class=o>.</span><span class=n>startswith</span><span class=p>(</span><span class=s1>&#39;p&#39;</span><span class=p>)</span> <span class=k>else</span> <span class=n>x</span><span class=o>.</span><span class=n>title</span><span class=p>()</span> <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=n>fruit</span><span class=p>]</span>

<span class=nb>print</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
<span class=c1># [&#39;POMEGRANATE&#39;, &#39;Cherry&#39;, &#39;Apricot&#39;, &#39;Date&#39;, &#39;Apple&#39;, &#39;Lemon&#39;, &#39;Kiwi&#39;, &#39;Orange&#39;, &#39;Lime&#39;, &#39;Watermelon&#39;, &#39;Guava&#39;, &#39;PAPAYA&#39;, &#39;Fig&#39;, &#39;PEAR&#39;, &#39;Banana&#39;, &#39;Tamarind&#39;, &#39;PERSIMMON&#39;, &#39;Elderberry&#39;, &#39;PEACH&#39;, &#39;Blueberry&#39;, &#39;Lychee&#39;, &#39;Grape&#39;]</span>
</code></pre></div> <h4 id=_1>套列表推导式<a class=headerlink href=#_1 title="Permanent link"> ¶</a></h4> <p>下面的例子是用嵌套列表推导式代替2层for循环。</p> <div class=highlight><pre><span></span><code><span class=n>data</span> <span class=o>=</span> <span class=p>[]</span>

<span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>):</span>
    <span class=k>if</span> <span class=n>i</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>:</span>
        <span class=k>for</span> <span class=n>j</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>):</span>
            <span class=n>data</span><span class=o>.</span><span class=n>append</span><span class=p>((</span><span class=n>i</span><span class=p>,</span> <span class=n>j</span><span class=p>))</span>

<span class=nb>print</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
<span class=c1># [(1, 1), (1, 2), (2, 1), (2, 2)]</span>

<span class=n>data</span> <span class=o>=</span> <span class=p>[(</span><span class=n>i</span><span class=p>,</span> <span class=n>j</span><span class=p>)</span> <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>)</span> <span class=k>if</span> <span class=n>i</span> <span class=o>&gt;=</span> <span class=o>-</span><span class=mi>1</span> <span class=k>for</span> <span class=n>j</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>)]</span>
<span class=nb>print</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
<span class=c1># [(1, 1), (1, 2), (2, 1), (2, 2)]</span>
</code></pre></div> <p>再举一个嵌套列表推导式的例子。</p> <div class=highlight><pre><span></span><code><span class=n>all_data</span> <span class=o>=</span> <span class=p>[</span>
    <span class=p>[</span><span class=s1>&#39;John&#39;</span><span class=p>,</span> <span class=s1>&#39;Emily&#39;</span><span class=p>,</span> <span class=s1>&#39;Michael&#39;</span><span class=p>,</span> <span class=s1>&#39;Lee&#39;</span><span class=p>,</span> <span class=s1>&#39;Steven&#39;</span><span class=p>],</span>
    <span class=p>[</span><span class=s1>&#39;Maria&#39;</span><span class=p>,</span> <span class=s1>&#39;Juan&#39;</span><span class=p>,</span> <span class=s1>&#39;Javier&#39;</span><span class=p>,</span> <span class=s1>&#39;Natalia&#39;</span><span class=p>,</span> <span class=s1>&#39;Pilar&#39;</span><span class=p>],</span>
<span class=p>]</span>
<span class=n>names_of_interest</span> <span class=o>=</span> <span class=p>[]</span>

<span class=k>for</span> <span class=n>names</span> <span class=ow>in</span> <span class=n>all_data</span><span class=p>:</span>
    <span class=n>enough_es</span> <span class=o>=</span> <span class=p>[</span><span class=n>name</span> <span class=k>for</span> <span class=n>name</span> <span class=ow>in</span> <span class=n>names</span> <span class=k>if</span> <span class=n>name</span><span class=o>.</span><span class=n>count</span><span class=p>(</span><span class=s1>&#39;e&#39;</span><span class=p>)</span> <span class=o>&gt;=</span><span class=mi>2</span><span class=p>]</span>
    <span class=n>names_of_interest</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=n>enough_es</span><span class=p>)</span>

<span class=nb>print</span><span class=p>(</span><span class=n>names_of_interest</span><span class=p>)</span>  
<span class=c1># [&#39;Lee&#39;, &#39;Steven&#39;]</span>

<span class=n>result</span> <span class=o>=</span> <span class=p>[</span><span class=n>name</span> <span class=k>for</span> <span class=n>names</span> <span class=ow>in</span> <span class=n>all_data</span> <span class=k>for</span> <span class=n>name</span> <span class=ow>in</span> <span class=n>names</span> <span class=k>if</span> <span class=n>name</span><span class=o>.</span><span class=n>count</span><span class=p>(</span><span class=s1>&#39;e&#39;</span><span class=p>)</span> <span class=o>&gt;=</span> <span class=mi>2</span><span class=p>]</span>
<span class=nb>print</span><span class=p>(</span><span class=n>result</span><span class=p>)</span>  
<span class=c1># [&#39;Lee&#39;, &#39;Steven&#39;]</span>
</code></pre></div> <p>用嵌套列表推导式将矩阵扁平化。</p> <p>考虑下面这个3x4的矩阵，它由3个长度为4的列表组成。下面例子对比了用传统for循环将矩阵扁平化，和用嵌套列表推导式将矩阵扁平化。并且通过列表推导式中的列表推导式将扁平矩阵还原为3x4矩阵。</p> <div class=highlight><pre><span></span><code><span class=n>matrix</span> <span class=o>=</span> <span class=p>[</span>
    <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>],</span>
    <span class=p>[</span><span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>8</span><span class=p>],</span>
    <span class=p>[</span><span class=mi>9</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>11</span><span class=p>,</span> <span class=mi>12</span><span class=p>],</span>
<span class=p>]</span>

<span class=n>flattened</span> <span class=o>=</span> <span class=p>[]</span>

<span class=c1># 传统for循环嵌套</span>
<span class=k>for</span> <span class=n>m</span> <span class=ow>in</span> <span class=n>matrix</span><span class=p>:</span>
    <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=n>m</span><span class=p>:</span>
        <span class=n>flattened</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>x</span><span class=p>)</span>

<span class=nb>print</span><span class=p>(</span><span class=n>flattened</span><span class=p>)</span>  
<span class=c1># [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]</span>

<span class=c1># 嵌套列表推导式</span>
<span class=n>flattened</span> <span class=o>=</span> <span class=p>[</span><span class=n>x</span> <span class=k>for</span> <span class=n>m</span> <span class=ow>in</span> <span class=n>matrix</span> <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=n>m</span><span class=p>]</span>
<span class=nb>print</span><span class=p>(</span><span class=n>flattened</span><span class=p>)</span>  
<span class=c1># [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]</span>

<span class=c1># 列表推导式中的列表推导式</span>
<span class=n>z</span> <span class=o>=</span> <span class=p>[[</span><span class=n>x</span> <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=n>m</span><span class=p>]</span> <span class=k>for</span> <span class=n>m</span> <span class=ow>in</span> <span class=n>matrix</span><span class=p>]</span>
<span class=nb>print</span><span class=p>(</span><span class=n>z</span><span class=p>)</span>  
<span class=c1># [[1, 2, 3, 4], [5, 6, 7, 8], [9, 10, 11, 12]]</span>
</code></pre></div> <h3 id=_2>元组推导式<a class=headerlink href=#_2 title="Permanent link"> ¶</a></h3> <p>下面的例子生成一个包含数字1~5的元组。从结果可以看到，元组推导式生成的结果并不是一个元组，而是一个生成器对象，需要通过tuple()函数，将生成器对象转换成元组。</p> <div class=highlight><pre><span></span><code><span class=n>data</span> <span class=o>=</span> <span class=p>(</span><span class=n>x</span> <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>5</span><span class=p>))</span>

<span class=nb>print</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
<span class=c1># &lt;generator object &lt;genexpr&gt; at 0x7f87217a8e40&gt;</span>

<span class=nb>print</span><span class=p>(</span><span class=nb>type</span><span class=p>(</span><span class=n>data</span><span class=p>))</span>
<span class=c1># &lt;class &#39;generator&#39;&gt;</span>

<span class=nb>print</span><span class=p>(</span><span class=nb>tuple</span><span class=p>(</span><span class=n>data</span><span class=p>))</span>
<span class=c1># (0, 1, 2, 3, 4)</span>
</code></pre></div> <h3 id=_3>集合推导式<a class=headerlink href=#_3 title="Permanent link"> ¶</a></h3> <p>下面是一个简单的集合推导式例子。</p> <div class=highlight><pre><span></span><code><span class=n>data</span> <span class=o>=</span> <span class=p>{</span><span class=n>x</span><span class=o>**</span><span class=mi>2</span> <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>5</span><span class=p>)}</span>

<span class=nb>print</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
<span class=c1># {0, 1, 4, 9, 16}</span>

<span class=nb>print</span><span class=p>(</span><span class=nb>type</span><span class=p>(</span><span class=n>data</span><span class=p>))</span>
<span class=c1># &lt;class &#39;set&#39;&gt;</span>
</code></pre></div> <p>集合要保证元素必须是唯一的。</p> <div class=highlight><pre><span></span><code><span class=n>data</span> <span class=o>=</span> <span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>)</span>

<span class=n>newset</span> <span class=o>=</span> <span class=p>{</span><span class=n>x</span><span class=o>**</span><span class=mi>2</span> <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=n>data</span><span class=p>}</span>

<span class=nb>print</span><span class=p>(</span><span class=n>newset</span><span class=p>)</span>
<span class=c1># {1, 4, 36, 9, 16, 25}</span>

<span class=nb>print</span><span class=p>(</span><span class=nb>type</span><span class=p>(</span><span class=n>newset</span><span class=p>)</span>
<span class=c1># &lt;class &#39;set&#39;&gt;</span>
</code></pre></div> <h3 id=_4>字典推导式<a class=headerlink href=#_4 title="Permanent link"> ¶</a></h3> <p>字典推导式: dict_comp = {key-expr : value-expr for value in collection if condition}</p> <p>字典推导式的简单示例：</p> <div class=highlight><pre><span></span><code><span class=n>strings</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;a&#39;</span><span class=p>,</span> <span class=s1>&#39;as&#39;</span><span class=p>,</span> <span class=s1>&#39;bat&#39;</span><span class=p>,</span> <span class=s1>&#39;car&#39;</span><span class=p>,</span> <span class=s1>&#39;dove&#39;</span><span class=p>,</span> <span class=s1>&#39;python&#39;</span><span class=p>]</span>

<span class=n>loc_mapping</span> <span class=o>=</span> <span class=p>{</span><span class=n>index</span><span class=p>:</span> <span class=n>val</span> <span class=k>for</span> <span class=n>index</span><span class=p>,</span> <span class=n>val</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=n>strings</span><span class=p>)}</span>
<span class=nb>print</span><span class=p>(</span><span class=n>loc_mapping</span><span class=p>)</span>  
<span class=c1># {0: &#39;a&#39;, 1: &#39;as&#39;, 2: &#39;bat&#39;, 3: &#39;car&#39;, 4: &#39;dove&#39;, 5: &#39;python&#39;}</span>

<span class=c1># 交换键和值</span>
<span class=n>loc_mapping</span> <span class=o>=</span> <span class=p>{</span><span class=n>index</span><span class=p>:</span> <span class=n>val</span> <span class=k>for</span> <span class=n>val</span><span class=p>,</span> <span class=n>index</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=n>strings</span><span class=p>)}</span>
<span class=nb>print</span><span class=p>(</span><span class=n>loc_mapping</span><span class=p>)</span>
<span class=c1># {&#39;a&#39;: 0, &#39;as&#39;: 1, &#39;bat&#39;: 2, &#39;car&#39;: 3, &#39;dove&#39;: 4, &#39;python&#39;: 5}</span>
</code></pre></div> <h2 id=4>4. 函数声明<a class=headerlink href=#4 title="Permanent link"> ¶</a></h2> <p>如果Python达到函数的尾部时仍然没有遇到return语句，就会自动返回None。</p> <p>每个函数都可以有位置参数和关键字参数。关键字参数最常用于指定默认值或可选参数。关键字参数必须跟在位置参数后，可以使用关键字参数向位置参数传参。</p> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>sys</span>

<span class=k>def</span> <span class=nf>my_function1</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>,</span> <span class=n>z</span><span class=o>=</span><span class=mf>1.5</span><span class=p>):</span>
    <span class=k>if</span> <span class=n>z</span> <span class=o>&gt;</span> <span class=mi>1</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>z</span> <span class=o>*</span> <span class=p>(</span><span class=n>x</span> <span class=o>+</span> <span class=n>y</span><span class=p>)</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>z</span> <span class=o>/</span> <span class=p>(</span><span class=n>x</span> <span class=o>+</span> <span class=n>y</span><span class=p>)</span>

<span class=n>result1</span> <span class=o>=</span> <span class=n>my_function1</span><span class=p>(</span><span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=n>z</span><span class=o>=</span><span class=mf>0.7</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=n>result1</span><span class=p>)</span>  
<span class=c1># 0.06363636363636363</span>

<span class=n>result1</span> <span class=o>=</span> <span class=n>my_function1</span><span class=p>(</span><span class=n>x</span><span class=o>=</span><span class=mi>5</span><span class=p>,</span> <span class=n>y</span><span class=o>=</span><span class=mi>6</span><span class=p>,</span> <span class=n>z</span><span class=o>=</span><span class=mf>0.7</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=n>result1</span><span class=p>)</span>  
<span class=c1># 0.06363636363636363</span>

<span class=n>result1</span> <span class=o>=</span> <span class=n>my_function1</span><span class=p>(</span><span class=mf>3.14</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=mf>3.5</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=n>result1</span><span class=p>)</span>  
<span class=c1># 35.49</span>

<span class=n>result1</span> <span class=o>=</span> <span class=n>my_function1</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span> <span class=mi>20</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=n>result1</span><span class=p>)</span>  
<span class=c1># 45.0</span>
</code></pre></div> <h2 id=5>5. 命名空间、作用域和本地函数<a class=headerlink href=#5 title="Permanent link"> ¶</a></h2> <p>函数有两种连接变量的方式：全局、本地。</p> <div class=highlight><pre><span></span><code><span class=k>def</span> <span class=nf>func1</span><span class=p>():</span>
    <span class=n>list1</span> <span class=o>=</span> <span class=p>[]</span>  <span class=c1># 本地变量</span>
    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>5</span><span class=p>):</span>
        <span class=n>list1</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>i</span><span class=p>)</span>
    <span class=nb>print</span><span class=p>(</span><span class=n>list1</span><span class=p>)</span>

<span class=n>func1</span><span class=p>()</span>  
<span class=c1># [0, 1, 2, 3, 4]</span>

<span class=n>list2</span> <span class=o>=</span> <span class=p>[]</span>  <span class=c1># 全局变量</span>
<span class=k>def</span> <span class=nf>func2</span><span class=p>():</span>
    <span class=k>global</span> <span class=n>list2</span>  <span class=c1># 全局变量</span>
    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>5</span><span class=p>):</span>
        <span class=n>list2</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>i</span><span class=p>)</span>
    <span class=nb>print</span><span class=p>(</span><span class=n>list2</span><span class=p>)</span>

<span class=n>func2</span><span class=p>()</span>
<span class=c1># [0, 1, 2, 3, 4]</span>
</code></pre></div> <p>数据清洗示例</p> <div class=highlight><pre><span></span><code><span class=n>states</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;   Alabama&#39;</span><span class=p>,</span> <span class=s1>&#39;Georgia!&#39;</span><span class=p>,</span> <span class=s1>&#39;georgia&#39;</span><span class=p>,</span> <span class=s1>&#39;Georgia&#39;</span><span class=p>,</span> <span class=s1>&#39;FlOrIda&#39;</span><span class=p>,</span> <span class=s1>&#39;south    carolina##&#39;</span><span class=p>,</span> <span class=s1>&#39;West virginia? &#39;</span><span class=p>]</span>

<span class=c1># 方法1</span>
<span class=kn>import</span> <span class=nn>re</span>

<span class=k>def</span> <span class=nf>clean_string1</span><span class=p>(</span><span class=n>strings</span><span class=p>):</span>
    <span class=n>result2</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=k>for</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>strings</span><span class=p>:</span>
        <span class=n>value</span> <span class=o>=</span> <span class=n>value</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span>
        <span class=n>value</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>sub</span><span class=p>(</span><span class=s1>&#39;[! #? ]&#39;</span><span class=p>,</span> <span class=s1>&#39;&#39;</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span>
        <span class=n>value</span> <span class=o>=</span> <span class=n>value</span><span class=o>.</span><span class=n>title</span><span class=p>()</span>
        <span class=n>result2</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>result2</span>

<span class=nb>print</span><span class=p>(</span><span class=n>clean_string1</span><span class=p>((</span><span class=n>states</span><span class=p>)))</span>
<span class=c1># [&#39;Alabama&#39;, &#39;Georgia&#39;, &#39;Georgia&#39;, &#39;Georgia&#39;, &#39;Florida&#39;, &#39;Southcarolina&#39;, &#39;Westvirginia&#39;]</span>


<span class=c1># 方法2</span>
<span class=k>def</span> <span class=nf>remove_punctuaion</span><span class=p>(</span><span class=n>value</span><span class=p>):</span>
    <span class=k>return</span> <span class=n>re</span><span class=o>.</span><span class=n>sub</span><span class=p>(</span><span class=s1>&#39;[! #? ]&#39;</span><span class=p>,</span> <span class=s1>&#39;&#39;</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span>

<span class=n>clean_ops</span> <span class=o>=</span> <span class=p>[</span><span class=nb>str</span><span class=o>.</span><span class=n>strip</span><span class=p>,</span> <span class=n>remove_punctuaion</span><span class=p>,</span> <span class=nb>str</span><span class=o>.</span><span class=n>title</span><span class=p>]</span>

<span class=k>def</span> <span class=nf>clean_string2</span><span class=p>(</span><span class=n>strings</span><span class=p>,</span> <span class=n>ops</span><span class=p>):</span>
    <span class=n>result3</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=k>for</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>strings</span><span class=p>:</span>
        <span class=k>for</span> <span class=n>function</span> <span class=ow>in</span> <span class=n>ops</span><span class=p>:</span>
            <span class=n>value</span> <span class=o>=</span> <span class=n>function</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
        <span class=n>result3</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>result3</span>

<span class=n>result4</span> <span class=o>=</span> <span class=n>clean_string2</span><span class=p>(</span><span class=n>states</span><span class=p>,</span> <span class=n>clean_ops</span><span class=p>)</span>

<span class=nb>print</span><span class=p>(</span><span class=n>result4</span><span class=p>)</span>
<span class=c1># [&#39;Alabama&#39;, &#39;Georgia&#39;, &#39;Georgia&#39;, &#39;Georgia&#39;, &#39;Florida&#39;, &#39;Southcarolina&#39;, &#39;Westvirginia&#39;]</span>


<span class=c1># 可以将函数作为一个参数传给其他的函数。</span>
<span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=nb>map</span><span class=p>(</span><span class=n>remove_punctuaion</span><span class=p>,</span> <span class=n>states</span><span class=p>):</span>
    <span class=nb>print</span><span class=p>(</span><span class=n>x</span><span class=p>)</span>
    <span class=c1># Alabama</span>
    <span class=c1># Georgia</span>
    <span class=c1># georgia</span>
    <span class=c1># Georgia</span>
    <span class=c1># FlOrIda</span>
    <span class=c1># southcarolina</span>
    <span class=c1># Westvirginia</span>
</code></pre></div> <h2 id=6>6. 柯里化：部分参数应用<a class=headerlink href=#6 title="Permanent link"> ¶</a></h2> <p>柯里化是计算机科学术语（以数学家Haskell Curry命名），它表示通过部分参数应用的方式从已有的函数中衍生出新的函数。柯里化是一种将多参数函数转化为单参数高阶函数的技术，如果你固定某些参数，你将得到接受余下参数的一个函数。</p> <ul> <li> <p>定义一： 柯里化：一个函数中有个多个参数，想固定其中某个或者几个参数的值，而只接受另外几个还未固定的参数，这样函数演变成新的函数。</p> </li> <li> <p>定义二： 函数柯里化（currying）又称部分求值。一个 currying 的函数首先会接受一些参数，接受了这些参数之后，该函数并不会立即求值，而是继续返回另外一个函数，刚才传入的参数在函数形成的闭包中被保存起来。待到函数被真正需要求值的时候，之前传入的所有参数都会被一次性用于求值。</p> </li> <li> <p>定义三： 一些函数式语言的工作原理是将多参数函数语法转化为单参数函数集合，这一过程称为柯里化，它是以逻辑学家Haskell Curry的名字命名的。Haskell Curry从早期概念中发展出了该理论。其形式相当于将z=f(x, y)转换成z=f(x)(y)的形式，原函数由两个参数，现在变为两个接受单参数的函数，</p> </li> </ul> <p>示例1：柯里化的过程就是把原来带两个参数的函数add(x, y)，变成了一个嵌套函数，在add_currying函数内，又定义了一个_add函数，并且_add函数又引用了外部函数add_currying的变量x，这就是一个闭包。</p> <p>闭包，一句话说就是在函数中再嵌套一个函数，并且引用外部函数的变量。</p> <div class=highlight><pre><span></span><code><span class=c1># 普通写法</span>
<span class=k>def</span> <span class=nf>add</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>):</span>
    <span class=k>return</span> <span class=n>x</span> <span class=o>+</span> <span class=n>y</span>

<span class=nb>print</span><span class=p>(</span><span class=n>add</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>))</span>  
<span class=c1># 3</span>

<span class=c1># 柯里化写法</span>
<span class=k>def</span> <span class=nf>add_currying</span><span class=p>(</span><span class=n>x</span><span class=p>):</span>
    <span class=k>def</span> <span class=nf>_add</span><span class=p>(</span><span class=n>y</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>x</span> <span class=o>+</span> <span class=n>y</span>
    <span class=k>return</span> <span class=n>_add</span>

<span class=nb>print</span><span class=p>(</span><span class=n>add_currying</span><span class=p>(</span><span class=mi>1</span><span class=p>)(</span><span class=mi>2</span><span class=p>))</span>  
<span class=c1># 3</span>
</code></pre></div> <p>示例2，通过固定其中的第二个参数不变来实现柯里化。</p> <div class=highlight><pre><span></span><code><span class=k>def</span> <span class=nf>add2</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>):</span>
    <span class=k>def</span> <span class=nf>add1</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>,</span> <span class=n>c</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>a</span> <span class=o>+</span> <span class=n>b</span> <span class=o>+</span> <span class=n>c</span>

    <span class=k>return</span> <span class=n>add1</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=mi>666</span><span class=p>,</span> <span class=n>b</span><span class=p>)</span>

<span class=n>result6</span> <span class=o>=</span> <span class=n>add2</span><span class=p>(</span><span class=mi>12</span><span class=p>,</span> <span class=mi>13</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=n>result6</span><span class=p>)</span>  
<span class=c1># 691</span>

<span class=n>result6</span> <span class=o>=</span> <span class=n>add2</span><span class=p>(</span><span class=mi>12</span><span class=p>,</span> <span class=mi>555</span><span class=p>,</span> <span class=mi>13</span><span class=p>)</span>
<span class=c1># TypeError: add2() takes 2 positional arguments but 3 were given</span>
</code></pre></div> <p>示例3，通过functools提供的偏函数来实现柯里化。</p> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>functools</span> <span class=kn>import</span> <span class=n>partial</span>

<span class=k>def</span> <span class=nf>add1</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>,</span> <span class=n>c</span><span class=p>):</span>
    <span class=k>return</span> <span class=n>a</span> <span class=o>+</span> <span class=n>b</span> <span class=o>+</span> <span class=n>c</span>

<span class=n>add3</span> <span class=o>=</span> <span class=n>partial</span><span class=p>(</span><span class=n>add1</span><span class=p>,</span> <span class=n>b</span><span class=o>=</span><span class=mi>666</span><span class=p>)</span>

<span class=n>result7</span> <span class=o>=</span> <span class=n>add3</span><span class=p>(</span><span class=n>a</span><span class=o>=</span><span class=mi>12</span><span class=p>,</span> <span class=n>c</span><span class=o>=</span><span class=mi>13</span><span class=p>)</span>

<span class=nb>print</span><span class=p>(</span><span class=n>result7</span><span class=p>)</span>  
<span class=c1># 691</span>
</code></pre></div> <p>示例4，通过lambda表达式来实现柯里化。</p> <div class=highlight><pre><span></span><code><span class=k>def</span> <span class=nf>add1</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>,</span> <span class=n>c</span><span class=p>):</span>
    <span class=k>return</span> <span class=n>a</span> <span class=o>+</span> <span class=n>b</span> <span class=o>+</span> <span class=n>c</span>

<span class=n>add4</span> <span class=o>=</span> <span class=k>lambda</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>:</span> <span class=n>add1</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=mi>666</span><span class=p>,</span> <span class=n>y</span><span class=p>)</span>

<span class=n>result8</span> <span class=o>=</span> <span class=n>add4</span><span class=p>(</span><span class=mi>12</span><span class=p>,</span> <span class=mi>13</span><span class=p>)</span>

<span class=nb>print</span><span class=p>(</span><span class=n>result8</span><span class=p>)</span>  
<span class=c1># 691</span>
</code></pre></div> <p>示例5，通过python的装饰器来实现柯里化</p> <div class=highlight><pre><span></span><code><span class=k>def</span> <span class=nf>add1</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>,</span> <span class=n>c</span><span class=p>):</span>
    <span class=k>return</span> <span class=n>a</span> <span class=o>+</span> <span class=n>b</span> <span class=o>+</span> <span class=n>c</span>

<span class=k>def</span> <span class=nf>currying_add</span><span class=p>(</span><span class=n>func</span><span class=p>):</span>
    <span class=k>def</span> <span class=nf>wrapper</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>c</span><span class=p>,</span> <span class=n>b</span><span class=o>=</span><span class=mi>666</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>func</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>,</span> <span class=n>c</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>wrapper</span>

<span class=n>result9</span> <span class=o>=</span> <span class=n>currying_add</span><span class=p>(</span><span class=n>add1</span><span class=p>)(</span><span class=mi>12</span><span class=p>,</span> <span class=mi>13</span><span class=p>)</span>

<span class=nb>print</span><span class=p>(</span><span class=n>result9</span><span class=p>)</span>  
<span class=c1># 691</span>
</code></pre></div> <p>示例6，通过python的装饰器符号@来实现柯里化</p> <div class=highlight><pre><span></span><code><span class=k>def</span> <span class=nf>currying_add</span><span class=p>(</span><span class=n>func</span><span class=p>):</span>
    <span class=k>def</span> <span class=nf>wrapper</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>c</span><span class=p>,</span> <span class=n>b</span><span class=o>=</span><span class=mi>666</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>func</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>,</span> <span class=n>c</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>wrapper</span>

<span class=nd>@currying_add</span>
<span class=k>def</span> <span class=nf>add5</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>,</span> <span class=n>c</span><span class=p>):</span>
    <span class=k>return</span> <span class=n>a</span> <span class=o>+</span> <span class=n>b</span> <span class=o>+</span> <span class=n>c</span>

<span class=n>result10</span> <span class=o>=</span> <span class=n>add5</span><span class=p>(</span><span class=mi>12</span><span class=p>,</span> <span class=mi>13</span><span class=p>)</span>

<span class=nb>print</span><span class=p>(</span><span class=n>result10</span><span class=p>)</span>
<span class=c1># 691</span>
</code></pre></div> <h2 id=7>7. 迭代器与生成器<a class=headerlink href=#7 title="Permanent link"> ¶</a></h2> <h3 id=_5>迭代器<a class=headerlink href=#_5 title="Permanent link"> ¶</a></h3> <p>迭代是Python最强大的功能之一，是访问集合元素的一种方式。迭代器是一个可以记住遍历的位置的对象。</p> <p>迭代器对象从集合的第一个元素开始访问，直到所有的元素被访问完结束。迭代器只能往前不会后退。</p> <p>迭代器有两个基本的方法：iter() 和 next()。</p> <p>迭代器示例：</p> <div class=highlight><pre><span></span><code><span class=n>list_a</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>]</span>
<span class=n>it</span> <span class=o>=</span> <span class=nb>iter</span><span class=p>(</span><span class=n>list_a</span><span class=p>)</span>  <span class=c1># 创建迭代器对象</span>

<span class=nb>print</span><span class=p>(</span><span class=nb>next</span><span class=p>(</span><span class=n>it</span><span class=p>))</span>  <span class=c1># 输出迭代器的下一个元素</span>
<span class=c1># 1  </span>

<span class=nb>print</span><span class=p>(</span><span class=nb>next</span><span class=p>(</span><span class=n>it</span><span class=p>))</span>  <span class=c1># 输出迭代器的下一个元素</span>
<span class=c1># 2</span>
</code></pre></div> <p>迭代器对象可以使用常规for语句进行遍历。</p> <div class=highlight><pre><span></span><code><span class=n>list_a</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>]</span>
<span class=n>it</span> <span class=o>=</span> <span class=nb>iter</span><span class=p>(</span><span class=n>list_a</span><span class=p>)</span>  <span class=c1># 创建迭代器对象</span>

<span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=n>it</span><span class=p>:</span>
    <span class=nb>print</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>end</span><span class=o>=</span><span class=s2>&quot; &quot;</span><span class=p>)</span>

<span class=nb>print</span><span class=p>(</span><span class=n>end</span><span class=o>=</span><span class=s2>&quot;</span><span class=se>\n</span><span class=s2>&quot;</span><span class=p>)</span>
<span class=c1># 1 2 3 4</span>
</code></pre></div> <h3 id=_6>生成器<a class=headerlink href=#_6 title="Permanent link"> ¶</a></h3> <p>在 Python 中，使用了 yield 的函数被称为生成器（generator）。跟普通函数不同的是，生成器是一个返回迭代器的函数，只能用于迭代操作，生成器就是一个迭代器。</p> <p>在调用生成器运行的过程中，每次遇到 yield 时函数会暂停并保存当前所有的运行信息，返回 yield 的值, 并在下一次执行 next() 方法时从当前位置继续运行。</p> <p>调用一个生成器函数，返回的是一个迭代器对象。</p> <p>示例, 斐波那契数列：</p> <div class=highlight><pre><span></span><code><span class=k>def</span> <span class=nf>fibonacci</span><span class=p>(</span><span class=n>n</span><span class=p>):</span>
    <span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>,</span> <span class=n>counter</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>0</span>

    <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>counter</span> <span class=o>&gt;</span> <span class=n>n</span><span class=p>):</span>
            <span class=k>return</span>

        <span class=k>yield</span> <span class=n>a</span>

        <span class=n>a</span><span class=p>,</span> <span class=n>b</span> <span class=o>=</span> <span class=n>b</span><span class=p>,</span> <span class=n>a</span> <span class=o>+</span> <span class=n>b</span>

        <span class=n>counter</span> <span class=o>+=</span> <span class=mi>1</span>

<span class=n>f</span> <span class=o>=</span> <span class=n>fibonacci</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>  <span class=c1># f 是一个迭代器，由生成器返回生成</span>
<span class=nb>print</span><span class=p>(</span><span class=n>f</span><span class=p>)</span>  
<span class=c1># &lt;generator object fibonacci at 0x7fbe8a7f7580&gt; 实际调用生成器时，代码并不会立即执行</span>

<span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=n>f</span><span class=p>:</span>  <span class=c1># 请求生成器中的元素时，它才会执行它的代码</span>
    <span class=nb>print</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>end</span><span class=o>=</span><span class=s2>&quot; &quot;</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=n>end</span><span class=o>=</span><span class=s2>&quot;</span><span class=se>\n</span><span class=s2>&quot;</span><span class=p>)</span>
<span class=c1># 0 1 1 2 3 5 8 13 21 34 55</span>
</code></pre></div> <p>生成器表达式：</p> <p>用生成器表达式来创建生成器更为简单。生成器表达式与列表、字典、集合的推导式很类似，创建一个生成器表达式，只需要将列表推导式的中括号替换为小括号即可。</p> <div class=highlight><pre><span></span><code><span class=n>gen1</span> <span class=o>=</span> <span class=p>(</span><span class=n>x</span> <span class=o>**</span> <span class=mi>2</span> <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>100</span><span class=p>))</span>

<span class=nb>print</span><span class=p>(</span><span class=n>gen1</span><span class=p>)</span>  
<span class=c1># &lt;generator object &lt;genexpr&gt; at 0x7fd3f30c9580&gt;</span>
</code></pre></div> <p>上面的代码与下面的生成器是等价的</p> <div class=highlight><pre><span></span><code><span class=k>def</span> <span class=nf>_make_gen</span><span class=p>():</span>
    <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>100</span><span class=p>):</span>
        <span class=k>yield</span> <span class=n>x</span> <span class=o>**</span> <span class=mi>2</span>

<span class=n>gen2</span> <span class=o>=</span> <span class=n>_make_gen</span><span class=p>()</span>
<span class=nb>print</span><span class=p>(</span><span class=n>gen2</span><span class=p>)</span>  
<span class=c1># &lt;generator object _make_gen at 0x7fceb69ed580&gt;</span>
</code></pre></div> <p>生成器表达式可以作为函数参数用于替代列表推导式。对比下面2个例子。</p> <div class=highlight><pre><span></span><code><span class=c1># 示例1</span>
<span class=n>result11</span> <span class=o>=</span> <span class=nb>sum</span><span class=p>(</span><span class=n>x</span> <span class=o>**</span> <span class=mi>2</span> <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>100</span><span class=p>))</span>
<span class=nb>print</span><span class=p>(</span><span class=n>result11</span><span class=p>)</span>  
<span class=c1># 328350</span>

<span class=n>gen1</span> <span class=o>=</span> <span class=p>(</span><span class=n>x</span> <span class=o>**</span> <span class=mi>2</span> <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>100</span><span class=p>))</span>
<span class=n>result11</span> <span class=o>=</span> <span class=nb>sum</span><span class=p>(</span><span class=n>gen1</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=n>result11</span><span class=p>)</span>  
<span class=c1># 328350</span>

<span class=c1># 示例2</span>
<span class=n>result12</span> <span class=o>=</span> <span class=nb>dict</span><span class=p>((</span><span class=n>i</span><span class=p>,</span> <span class=n>i</span> <span class=o>**</span> <span class=mi>2</span><span class=p>)</span> <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>5</span><span class=p>))</span>
<span class=nb>print</span><span class=p>(</span><span class=n>result12</span><span class=p>)</span>  
<span class=c1># {0: 0, 1: 1, 2: 4, 3: 9, 4: 16}</span>

<span class=n>gen2</span> <span class=o>=</span> <span class=p>((</span><span class=n>i</span><span class=p>,</span> <span class=n>i</span> <span class=o>**</span> <span class=mi>2</span><span class=p>)</span> <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>5</span><span class=p>))</span>
<span class=n>result12</span> <span class=o>=</span> <span class=nb>dict</span><span class=p>(</span><span class=n>gen2</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=n>result12</span><span class=p>)</span>  
<span class=c1># {0: 0, 1: 1, 2: 4, 3: 9, 4: 16}</span>
</code></pre></div> <h3 id=itertools>生成器：itertools模块<a class=headerlink href=#itertools title="Permanent link"> ¶</a></h3> <p>标准库中的itertools模块是适用于大多数数据算法的生成器集合。</p> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>itertools</span>

<span class=n>first_letter</span> <span class=o>=</span> <span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=n>x</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
<span class=n>names</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;Alan&#39;</span><span class=p>,</span> <span class=s1>&#39;Adam&#39;</span><span class=p>,</span> <span class=s1>&#39;Wes&#39;</span><span class=p>,</span> <span class=s1>&#39;Will&#39;</span><span class=p>,</span> <span class=s1>&#39;Albert&#39;</span><span class=p>,</span> <span class=s1>&#39;Steven&#39;</span><span class=p>]</span>

<span class=k>for</span> <span class=n>letter</span><span class=p>,</span> <span class=n>names</span> <span class=ow>in</span> <span class=n>itertools</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=n>names</span><span class=p>,</span> <span class=n>first_letter</span><span class=p>):</span>
    <span class=nb>print</span><span class=p>(</span><span class=n>letter</span><span class=p>)</span>
    <span class=nb>print</span><span class=p>(</span><span class=n>first_letter</span><span class=p>)</span>
    <span class=nb>print</span><span class=p>(</span><span class=n>letter</span><span class=p>,</span> <span class=nb>list</span><span class=p>(</span><span class=n>names</span><span class=p>))</span>  <span class=c1># names is generator</span>

<span class=c1># A</span>
<span class=c1># &lt;function &lt;lambda&gt; at 0x7fa598a7a0d0&gt;</span>
<span class=c1># A [&#39;Alan&#39;, &#39;Adam&#39;]</span>
<span class=c1># W</span>
<span class=c1># &lt;function &lt;lambda&gt; at 0x7fa598a7a0d0&gt;</span>
<span class=c1># W [&#39;Wes&#39;, &#39;Will&#39;]</span>
<span class=c1># A</span>
<span class=c1># &lt;function &lt;lambda&gt; at 0x7fa598a7a0d0&gt;</span>
<span class=c1># A [&#39;Albert&#39;]</span>
<span class=c1># S</span>
<span class=c1># &lt;function &lt;lambda&gt; at 0x7fa598a7a0d0&gt;</span>
<span class=c1># S [&#39;Steven&#39;]</span>
</code></pre></div> <h2 id=8>8. 错误和异常处理<a class=headerlink href=#8 title="Permanent link"> ¶</a></h2> <p>Python用异常对象(exception object)来表示异常情况。遇到错误后，会引发异常。如果异常对象并未被处理或捕捉，程序就会用所谓的回溯(traceback， 一种错误信息)终止执行。</p> <p>异常和语法错误是有区别的。</p> <ul> <li>错误：是指代码不符合解释器或者编译器语法。</li> <li>异常：是指不完整、不合法输入，或者计算出现错误。</li> </ul> <p>python里用try...except...语句来处理异常情况。</p> <div class=highlight><pre><span></span><code><span class=k>def</span> <span class=nf>attempt_float</span><span class=p>(</span><span class=n>x</span><span class=p>):</span>
    <span class=k>try</span><span class=p>:</span>
        <span class=k>return</span> <span class=nb>float</span><span class=p>(</span><span class=n>x</span><span class=p>)</span>
    <span class=k>except</span> <span class=p>(</span><span class=ne>TypeError</span><span class=p>,</span> <span class=ne>ValueError</span><span class=p>):</span>
        <span class=k>return</span> <span class=s2>&quot;Type error, not numbers&quot;</span>

<span class=n>r1</span> <span class=o>=</span> <span class=n>attempt_float</span><span class=p>(</span><span class=s1>&#39;1.2256&#39;</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=n>r1</span><span class=p>)</span>  
<span class=c1># 1.2256</span>

<span class=n>r1</span> <span class=o>=</span> <span class=n>attempt_float</span><span class=p>(</span><span class=s1>&#39;friends&#39;</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=n>r1</span><span class=p>)</span>  
<span class=c1># Type error, not numbers</span>
</code></pre></div> <h2 id=9>9. 文件与操作系统<a class=headerlink href=#9 title="Permanent link"> ¶</a></h2> <p>f=open(path, 'w')，一个新的文件会在path指定的路径被创建，并在同一路径下覆盖同名文件。（请小心！） f=open(path, 'x')，一个新的文件会在path指定的路径被创建，如果给定路径下已经存在同名文件就会创建失败。</p> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>os</span>

<span class=c1># 查看当前路径</span>
<span class=n>os</span><span class=o>.</span><span class=n>getcwd</span><span class=p>()</span>
<span class=c1># &#39;/opt/myMemo&#39;</span>

<span class=c1># 更改文件读取默认路径</span>
<span class=n>os</span><span class=o>.</span><span class=n>chdir</span><span class=p>(</span><span class=s1>&#39;/opt/myMemo/python/datasets/examples&#39;</span><span class=p>)</span>

<span class=c1># 指定文件名</span>
<span class=n>path</span> <span class=o>=</span> <span class=s1>&#39;file01.txt&#39;</span>

<span class=c1># 打开文件</span>
<span class=n>f</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>

<span class=c1># 读取文件每一行，文件每一行作为列表一个元素</span>
<span class=n>lines</span> <span class=o>=</span> <span class=p>[</span><span class=n>x</span><span class=o>.</span><span class=n>rstrip</span><span class=p>()</span> <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=nb>open</span><span class=p>(</span><span class=n>path</span><span class=p>)]</span>

<span class=c1># 输出列表</span>
<span class=nb>print</span><span class=p>(</span><span class=n>lines</span><span class=p>)</span>

<span class=c1># 关闭文件会将资源释放回操作系统</span>
<span class=n>f</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>  
</code></pre></div> <p>另一种更简单的关闭文件的方式</p> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>os</span>

<span class=c1># 查看当前路径</span>
<span class=n>os</span><span class=o>.</span><span class=n>getcwd</span><span class=p>()</span>
<span class=c1># &#39;/opt/myMemo&#39;</span>

<span class=c1># 更改文件读取默认路径</span>
<span class=n>os</span><span class=o>.</span><span class=n>chdir</span><span class=p>(</span><span class=s1>&#39;/opt/myMemo/python/datasets/examples&#39;</span><span class=p>)</span>

<span class=c1># 指定文件名</span>
<span class=n>path</span> <span class=o>=</span> <span class=s1>&#39;file01.txt&#39;</span>

<span class=c1># 打开文件</span>
<span class=n>f</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>

<span class=c1># 使用with语句读取文件，文件会在with代码块结束后自动关闭。</span>
<span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=n>path</span><span class=p>)</span> <span class=k>as</span> <span class=n>f</span><span class=p>:</span> 
    <span class=n>lines</span> <span class=o>=</span> <span class=p>[</span><span class=n>x</span><span class=o>.</span><span class=n>rstrip</span><span class=p>()</span> <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=nb>open</span><span class=p>(</span><span class=n>path</span><span class=p>)]</span>

<span class=c1># 输出：文件每一行作为列表一个元素</span>
<span class=nb>print</span><span class=p>(</span><span class=n>lines</span><span class=p>)</span>
</code></pre></div> <p>在打开文件时使用seek读取文件内容要当心。如果文件的句柄位置恰好在一个Unicode符号的字节中间时，后续的读取会导致错误。</p> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>os</span>

<span class=c1># 查看当前路径</span>
<span class=n>os</span><span class=o>.</span><span class=n>getcwd</span><span class=p>()</span>
<span class=c1># &#39;/opt/myMemo&#39;</span>

<span class=c1># 更改文件读取默认路径</span>
<span class=n>os</span><span class=o>.</span><span class=n>chdir</span><span class=p>(</span><span class=s1>&#39;/opt/myMemo/python/datasets/examples&#39;</span><span class=p>)</span>

<span class=c1># 指定文件名</span>
<span class=n>path</span> <span class=o>=</span> <span class=s1>&#39;file01.txt&#39;</span>

<span class=c1># 打开文件</span>
<span class=n>f</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>

<span class=c1># 读取文件。</span>
<span class=nb>print</span><span class=p>(</span><span class=n>f</span><span class=o>.</span><span class=n>read</span><span class=p>(</span><span class=mi>5</span><span class=p>))</span>  <span class=c1># 输出前5个字符。 read方法通过读取的字节数来推进文件句柄的位置。</span>
<span class=c1># I Thi </span>
<span class=nb>print</span><span class=p>(</span><span class=n>f</span><span class=o>.</span><span class=n>tell</span><span class=p>())</span>  <span class=c1># tell方法可以给出句柄当前的位置</span>
<span class=c1># 5  </span>
<span class=nb>print</span><span class=p>(</span><span class=n>f</span><span class=o>.</span><span class=n>seek</span><span class=p>(</span><span class=mi>6</span><span class=p>))</span>  <span class=c1># seek方法可以将句柄位置改变到文件中特定的字节</span>
<span class=c1># 6  </span>
<span class=nb>print</span><span class=p>(</span><span class=n>f</span><span class=o>.</span><span class=n>read</span><span class=p>(</span><span class=mi>1</span><span class=p>))</span>  <span class=c1># 从第7个字节开始，输出1个字节</span>
<span class=c1># k </span>

<span class=c1># 关闭文件会将资源释放回操作系统</span>
<span class=n>f</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</code></pre></div> <p>如果使用二进制方式打开文件，则：</p> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>os</span>

<span class=c1># 查看当前路径</span>
<span class=n>os</span><span class=o>.</span><span class=n>getcwd</span><span class=p>()</span>
<span class=c1># &#39;/opt/myMemo&#39;</span>

<span class=c1># 更改文件读取默认路径</span>
<span class=n>os</span><span class=o>.</span><span class=n>chdir</span><span class=p>(</span><span class=s1>&#39;/opt/myMemo/python/datasets/examples&#39;</span><span class=p>)</span>

<span class=c1># 指定文件名</span>
<span class=n>path</span> <span class=o>=</span> <span class=s1>&#39;file01.txt&#39;</span>

<span class=c1># 打开文件</span>
<span class=n>f2</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=n>path</span><span class=p>,</span> <span class=s1>&#39;rb&#39;</span><span class=p>)</span>  <span class=c1># 二进制模式</span>

<span class=c1># 读取文件</span>
<span class=nb>print</span><span class=p>(</span><span class=n>f2</span><span class=o>.</span><span class=n>read</span><span class=p>(</span><span class=mi>5</span><span class=p>))</span>  <span class=c1># 第一个b代表二进制格式</span>
<span class=c1># b&#39;I Thi&#39;  </span>
<span class=nb>print</span><span class=p>(</span><span class=n>f2</span><span class=o>.</span><span class=n>tell</span><span class=p>())</span>  
<span class=c1># 5</span>
<span class=nb>print</span><span class=p>(</span><span class=n>f2</span><span class=o>.</span><span class=n>seek</span><span class=p>(</span><span class=mi>6</span><span class=p>))</span>  
<span class=c1># 6</span>
<span class=nb>print</span><span class=p>(</span><span class=n>f2</span><span class=o>.</span><span class=n>read</span><span class=p>(</span><span class=mi>2</span><span class=p>))</span>  <span class=c1># 从第7个字节开始，输出2个字节</span>
<span class=c1># b&#39;k &#39;  </span>

<span class=c1># 关闭文件会将资源释放回操作系统</span>
<span class=n>f2</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</code></pre></div> <p>将本文写入文件，可以使用文件对象的write或wirtelines方法。</p> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>os</span>

<span class=c1># 查看当前路径</span>
<span class=n>os</span><span class=o>.</span><span class=n>getcwd</span><span class=p>()</span>
<span class=c1># &#39;/opt/myMemo&#39;</span>

<span class=c1># 更改文件读取默认路径</span>
<span class=n>os</span><span class=o>.</span><span class=n>chdir</span><span class=p>(</span><span class=s1>&#39;/opt/myMemo/python/datasets/examples&#39;</span><span class=p>)</span>

<span class=c1># 指定文件名</span>
<span class=n>path1</span> <span class=o>=</span> <span class=s1>&#39;file01.txt&#39;</span>
<span class=n>path2</span> <span class=o>=</span> <span class=s1>&#39;file02.txt&#39;</span>  <span class=c1># file02.txt是一个空文件</span>

<span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=n>path2</span><span class=p>,</span> <span class=s1>&#39;r+&#39;</span><span class=p>,</span> <span class=n>encoding</span><span class=o>=</span><span class=s1>&#39;utf-8&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>f</span><span class=p>:</span>
    <span class=n>f</span><span class=o>.</span><span class=n>writelines</span><span class=p>(</span><span class=n>x</span> <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=nb>open</span><span class=p>(</span><span class=n>path1</span><span class=p>,</span> <span class=s1>&#39;r&#39;</span><span class=p>,</span> <span class=n>encoding</span><span class=o>=</span><span class=s1>&#39;utf-8&#39;</span><span class=p>)</span> <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>x</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>1</span><span class=p>)</span>  <span class=c1># 把file01.txt的内容写入file02.txt</span>
    <span class=n>lines</span> <span class=o>=</span> <span class=n>f</span><span class=o>.</span><span class=n>readlines</span><span class=p>()</span>
    <span class=nb>print</span><span class=p>(</span><span class=n>lines</span><span class=p>)</span>
</code></pre></div> <h2 id=10>10. 装饰器<a class=headerlink href=#10 title="Permanent link"> ¶</a></h2> <h3 id=_7>闭包<a class=headerlink href=#_7 title="Permanent link"> ¶</a></h3> <p>维基百科中的解释：<strong>闭包（Closure）</strong>，又称词法闭包（Lexical Closure）或函数闭包（function closures），是引用了自由变量的函数。这个被引用的自由变量将和这个函数一同存在，即使已经离开了创造它的环境也不例外。</p> <p>闭包延伸了作用域的函数，其中包含函数定义体中引用、但是不在定义体中定义的非全局变量。函数是不是匿名的没有关系，关键是它能访问定义体之外定义的非全局变量。</p> <p>例一，计算移动平均值。</p> <p>下面是是传统类实现方式，Avg的实例是可调用的对象。</p> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Avg</span><span class=p>():</span>

    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>mylist</span> <span class=o>=</span> <span class=p>[]</span>

    <span class=k>def</span> <span class=fm>__call__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>newValue</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>mylist</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>newValue</span><span class=p>)</span>
        <span class=n>total</span> <span class=o>=</span> <span class=nb>sum</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>mylist</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>total</span><span class=o>/</span><span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>mylist</span><span class=p>)</span>


<span class=n>avg</span> <span class=o>=</span> <span class=n>Avg</span><span class=p>()</span>

<span class=n>avg</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>
<span class=c1># 10.0</span>
<span class=n>avg</span><span class=p>(</span><span class=mi>20</span><span class=p>)</span>
<span class=c1># 15.0</span>
<span class=n>avg</span><span class=p>(</span><span class=mi>30</span><span class=p>)</span>
<span class=c1># 20.0</span>
</code></pre></div> <p>下面是高阶函数实现方式。调用<code>make_avg</code>时，返回一个<code>my_avg</code>函数对象。每次调用<code>my_avg</code>时，它会把参数添加到系列值中，然后计算当前平均值。</p> <div class=highlight><pre><span></span><code><span class=k>def</span> <span class=nf>make_avg</span><span class=p>():</span>

    <span class=n>my_list</span> <span class=o>=</span> <span class=p>[]</span>

    <span class=k>def</span> <span class=nf>avg</span><span class=p>(</span><span class=n>newValue</span><span class=p>):</span>
        <span class=n>my_list</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>newValue</span><span class=p>)</span>
        <span class=n>total</span> <span class=o>=</span> <span class=nb>sum</span><span class=p>(</span><span class=n>my_list</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>total</span><span class=o>/</span><span class=nb>len</span><span class=p>(</span><span class=n>my_list</span><span class=p>)</span>

    <span class=k>return</span> <span class=n>avg</span>

<span class=n>my_avg</span> <span class=o>=</span> <span class=n>make_avg</span><span class=p>()</span>

<span class=n>my_avg</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>
<span class=c1># 10.0</span>
<span class=n>my_avg</span><span class=p>(</span><span class=mi>20</span><span class=p>)</span>
<span class=c1># 15.0</span>
<span class=n>my_avg</span><span class=p>(</span><span class=mi>30</span><span class=p>)</span>
<span class=c1># 20.0</span>

<span class=n>my_avg</span><span class=o>.</span><span class=vm>__code__</span><span class=o>.</span><span class=n>co_varnames</span>
<span class=c1># (&#39;newValue&#39;, &#39;total&#39;)</span>

<span class=n>my_avg</span><span class=o>.</span><span class=vm>__code__</span><span class=o>.</span><span class=n>co_freevars</span>
<span class=c1># (&#39;my_list&#39;,)</span>

<span class=n>my_avg</span><span class=o>.</span><span class=vm>__closure__</span>
<span class=c1># (&lt;cell at 0x7fe93d347468: list object at 0x7fe93d0e2f48&gt;,)</span>

<span class=n>my_avg</span><span class=o>.</span><span class=vm>__closure__</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>cell_contents</span>
<span class=c1># [10, 20, 30]</span>
</code></pre></div> <p>这两个示例有共通之处：调用<code>Avg()</code>或<code>make_avg()</code>得到一个可调用对象<code>avg</code>，它会更新历史值，然后计算当前均值。 在类实现中，<code>avg</code>是<code>Avg</code>的实例；在高阶函数实现中是内部函数<code>avg</code>。</p> <p>两种实现方式中，我们都只需调用<code>avg(n)</code>，把<code>n</code>放入系列值中，然后重新计算均值。</p> <p>第一个例子中，<code>Avg</code>类的实例<code>avg</code>在<code>self.series</code>实例属性中存储历史值。</p> <p>第二个例子中的<code>my_list</code>是函数<code>make_avg()</code>的局部变量，也称为该函数的**自由变量（free variable）**，指未在本地作用域中绑定的变量。 <code>avg()</code>函数的闭包延伸到函数的作用域之外，包含了<code>make_avg()</code>的自由变量<code>my_list</code>的绑定。</p> <p>对于返回的<code>my_avg</code>对象，其<code>__code__</code>属性（表示编译后的函数定义体）中保存了局部变量和自由变量的名称，即<code>my_avg.__code__.co_varnames</code>返回了局部变量<code>('newValue', 'total')</code>和<code>my_avg.__code__.co_freevars</code>返回了自由变量<code>('my_list',)</code>。</p> <p>自由变量<code>my_list</code>绑定在返回的<code>my_avg</code>的<code>__closure__</code>的属性中，<code>my_avg.__closure__</code>中的各个元素对应了<code>my_avg.__code__.co_freevars</code>中的一个名称。这些元素是<code>cell</code>对象，有个<code>cell_contents</code>属性，如：<code>my_avg.__closure__</code>返回<code>(&lt;cell at 0x7fe93d347468: list object at 0x7fe93d0e2f48&gt;,)</code>，里面保存着真正的值，如<code>my_avg.__closure__[0].cell_contents</code>里面保存每次调用的真实值<code>[10, 20, 30]</code>。</p> <p>上面<code>my_list</code>是一个可变类型，如果用不可变类型改写，并实现闭包，可以使用<code>nolocal</code>进行声明。它的作用是把变量标记为自由变量，即使在函数中为变量赋予新值了，也会变成自由变量。如果为nonlocal声明的变量赋予新值，闭包中保存的绑定会更新。</p> <p><code>my_avg.__code__.co_freevars</code>返回了2个自由变量<code>('count', 'total')</code>，并在<code>my_avg.__closure__[0].cell_contents</code>和<code>my_avg.__closure__[1].cell_contents</code>里面保存了最后一次执行的真实值。</p> <div class=highlight><pre><span></span><code><span class=k>def</span> <span class=nf>make_avg</span><span class=p>():</span>
    <span class=n>count</span> <span class=o>=</span> <span class=mi>0</span>
    <span class=n>total</span> <span class=o>=</span> <span class=mi>0</span>

    <span class=k>def</span> <span class=nf>avg</span><span class=p>(</span><span class=n>newValue</span><span class=p>):</span>
        <span class=k>nonlocal</span> <span class=n>count</span><span class=p>,</span> <span class=n>total</span>
        <span class=n>count</span> <span class=o>+=</span> <span class=mi>1</span>
        <span class=n>total</span> <span class=o>+=</span> <span class=n>newValue</span>
        <span class=k>return</span> <span class=n>total</span> <span class=o>/</span> <span class=n>count</span>

    <span class=k>return</span> <span class=n>avg</span>


<span class=n>my_avg</span> <span class=o>=</span> <span class=n>make_avg</span><span class=p>()</span>

<span class=n>my_avg</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>
<span class=c1># 10.0</span>
<span class=n>my_avg</span><span class=p>(</span><span class=mi>20</span><span class=p>)</span>
<span class=c1># 15.0</span>
<span class=n>my_avg</span><span class=p>(</span><span class=mi>30</span><span class=p>)</span>
<span class=c1># 20.0</span>

<span class=n>my_avg</span><span class=o>.</span><span class=vm>__code__</span><span class=o>.</span><span class=n>co_varnames</span>
<span class=c1># (&#39;newValue&#39;,)</span>

<span class=n>my_avg</span><span class=o>.</span><span class=vm>__code__</span><span class=o>.</span><span class=n>co_freevars</span>
<span class=c1># (&#39;count&#39;, &#39;total&#39;)</span>

<span class=n>my_avg</span><span class=o>.</span><span class=vm>__closure__</span>
<span class=c1># (&lt;cell at 0x7fe93d3474c8: int object at 0x7fe93e865240&gt;, &lt;cell at 0x7fe93d347318: int object at 0x7fe93e865960&gt;)</span>

<span class=n>my_avg</span><span class=o>.</span><span class=vm>__closure__</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>cell_contents</span>
<span class=c1># 3</span>
<span class=n>my_avg</span><span class=o>.</span><span class=vm>__closure__</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>cell_contents</span>
<span class=c1># 60</span>
</code></pre></div> <p>例二： <code>money</code>是一个局部变量，在<code>get_money</code>是外围函数，函数执行之后应该就不会存在了。 但是嵌套函数<code>work</code>引用了<code>money</code>这个自由变量，将这个局部变量封闭在了嵌套函数<code>work</code>中，这样就形成了一个闭包。 <code>closure = get_money()</code>获得的就是一个闭包。<code>closure()</code>输出闭包，即，执行了<code>work()</code>，打印输出<code>money</code>的值。</p> <p>本地函数通过global声明对全局变量进行引用修改，那么对于内嵌函数<code>work()</code>作用域中的变量进行修改，就要使用<code>nonlocal</code>进行声明。</p> <div class=highlight><pre><span></span><code><span class=k>def</span> <span class=nf>get_money</span><span class=p>():</span>
    <span class=n>money</span> <span class=o>=</span> <span class=mi>0</span>

    <span class=k>def</span> <span class=nf>work</span><span class=p>():</span>
        <span class=k>nonlocal</span> <span class=n>money</span>
        <span class=n>money</span> <span class=o>+=</span> <span class=mi>100</span>
        <span class=nb>print</span><span class=p>(</span><span class=n>money</span><span class=p>)</span>

    <span class=k>return</span> <span class=n>work</span>


<span class=n>closure</span> <span class=o>=</span> <span class=n>get_money</span><span class=p>()</span>

<span class=n>closure</span><span class=p>()</span>
<span class=c1># 100</span>
<span class=n>closure</span><span class=p>()</span>
<span class=c1># 200</span>
<span class=n>closure</span><span class=p>()</span>
<span class=c1># 300</span>
</code></pre></div> <p>例三：</p> <p>函数<code>maker</code>中定义了函数<code>action</code>，<code>action</code>引用了<code>maker</code>嵌套作用域内的变量<code>k</code>，并且，<code>maker</code>将函数<code>action</code>作为返回对象进行返回。</p> <p>这样，我们通过执行<code>f = maker(2)</code>，<code>f</code>获取了返回对象<code>action</code>，虽然此时<code>maker</code>函数以及结束退出了，但对象<code>f</code>仍然记住了函数<code>maker</code>嵌套作用域内的变量<code>k</code>和<code>n</code>，并在执行<code>f(3)</code>时，将<code>x=3</code>以及之前记住的<code>k</code>和<code>n</code>，一并传入<code>action()</code>，计算并返回<code>x + n + k</code>值。<code>make</code>也称为**工厂函数**。</p> <div class=highlight><pre><span></span><code><span class=k>def</span> <span class=nf>maker</span><span class=p>(</span><span class=n>n</span><span class=p>):</span>
    <span class=n>k</span> <span class=o>=</span> <span class=mi>8</span>

    <span class=k>def</span> <span class=nf>action</span><span class=p>(</span><span class=n>x</span><span class=p>):</span>
       <span class=k>return</span> <span class=n>x</span> <span class=o>+</span> <span class=n>n</span> <span class=o>+</span> <span class=n>k</span>

    <span class=k>return</span> <span class=n>action</span>


<span class=n>f</span> <span class=o>=</span> <span class=n>maker</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span> 

<span class=nb>print</span><span class=p>(</span><span class=n>f</span><span class=p>(</span><span class=mi>3</span><span class=p>))</span>
<span class=c1># 13</span>
<span class=nb>print</span><span class=p>(</span><span class=n>f</span><span class=p>(</span><span class=mi>4</span><span class=p>))</span>
<span class=c1># 14</span>
<span class=nb>print</span><span class=p>(</span><span class=n>f</span><span class=p>(</span><span class=mi>5</span><span class=p>))</span>
<span class=c1># 15</span>
</code></pre></div> <p>结合前面2个例子再看上面的解释，闭包就是引用了自由变量的函数，这个函数保存了执行的上下文，可以脱离原本的作用域独立存在。</p> <h3 id=_8>装饰器<a class=headerlink href=#_8 title="Permanent link"> ¶</a></h3> <p>看下面例子，将函数作为参数传给另一个函数，函数<code>my_decorator</code>的传入参数正好是其嵌套函数<code>myFunc</code>。</p> <div class=highlight><pre><span></span><code><span class=k>def</span> <span class=nf>my_decorator</span><span class=p>(</span><span class=n>nestedFunc</span><span class=p>):</span>

    <span class=k>def</span> <span class=nf>myFunc</span><span class=p>():</span>
        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Before executing nestedFunc()&quot;</span><span class=p>)</span>

        <span class=n>nestedFunc</span><span class=p>()</span>

        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;After executing nestedFunc()&quot;</span><span class=p>)</span>

    <span class=k>return</span> <span class=n>myFunc</span>


<span class=k>def</span> <span class=nf>nestedFunc</span><span class=p>():</span>
    <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Decoration - executing nestedFunc()&quot;</span><span class=p>)</span>


<span class=n>nestedFunc</span><span class=p>()</span>
<span class=c1># Decoration - executing nestedFunc()</span>

<span class=n>nestedFunc</span> <span class=o>=</span> <span class=n>my_decorator</span><span class=p>(</span><span class=n>nestedFunc</span><span class=p>)</span>

<span class=n>nestedFunc</span><span class=p>()</span>
<span class=c1># Before executing nestedFunc()</span>
<span class=c1># Decoration - executing nestedFunc()</span>
<span class=c1># After executing nestedFunc()</span>
</code></pre></div> <p>装饰器只是个方法，使用时用了<code>@</code>语法。<code>@</code>语法只是将函数<code>nestedFunc</code>传入装饰器函数<code>my_decorator</code>。 <code>@my_decorator</code>是<code>nestedFunc = my_decorator(nestedFunc)</code>的快捷表达方式，</p> <div class=highlight><pre><span></span><code><span class=nd>@my_decorator</span>
<span class=k>def</span> <span class=nf>nestedFunc</span><span class=p>():</span>
    <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;New added to decoration - executing nestedFunc()&quot;</span><span class=p>)</span>


<span class=n>nestedFunc</span><span class=p>()</span>
<span class=c1># Before executing nestedFunc()</span>
<span class=c1># New added to decoration - executing nestedFunc()</span>
<span class=c1># After executing nestedFunc()</span>

<span class=nb>print</span><span class=p>(</span><span class=n>nestedFunc</span><span class=o>.</span><span class=vm>__name__</span><span class=p>)</span>
<span class=c1># myFunc</span>
</code></pre></div> <p>但上例最后的输出不是我们想要的，我们希望输出<code>nestedFunc</code>，但却被<code>myFunc</code>替代了，它重写了我们函数的名字和注释文档(docstring)。</p> <p>下面使用<code>functools.wraps</code>来修正上面的问题。</p> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>functools</span> <span class=kn>import</span> <span class=n>wraps</span>


<span class=k>def</span> <span class=nf>my_decorator</span><span class=p>(</span><span class=n>nestedFunc</span><span class=p>):</span>

    <span class=nd>@wraps</span><span class=p>(</span><span class=n>nestedFunc</span><span class=p>)</span>
    <span class=k>def</span> <span class=nf>myFunc</span><span class=p>():</span>
        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Before executing nestedFunc()&quot;</span><span class=p>)</span>

        <span class=n>nestedFunc</span><span class=p>()</span>

        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;After executing nestedFunc()&quot;</span><span class=p>)</span>

    <span class=k>return</span> <span class=n>myFunc</span>


<span class=k>def</span> <span class=nf>nestedFunc</span><span class=p>():</span>
    <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Decoration - executing nestedFunc()&quot;</span><span class=p>)</span>


<span class=nd>@my_decorator</span>
<span class=k>def</span> <span class=nf>nestedFunc</span><span class=p>():</span>
    <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;New added to decoration - executing nestedFunc()&quot;</span><span class=p>)</span>


<span class=n>nestedFunc</span><span class=p>()</span>
<span class=c1># Before executing nestedFunc()</span>
<span class=c1># New added to decoration - executing nestedFunc()</span>
<span class=c1># After executing nestedFunc()</span>

<span class=nb>print</span><span class=p>(</span><span class=n>nestedFunc</span><span class=o>.</span><span class=vm>__name__</span><span class=p>)</span>
<span class=c1># nestedFunc</span>
</code></pre></div> <p>下面是装饰器的蓝本规范。</p> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>functools</span> <span class=kn>import</span> <span class=n>wraps</span>


<span class=k>def</span> <span class=nf>decorator_name</span><span class=p>(</span><span class=n>f</span><span class=p>):</span>

    <span class=nd>@wraps</span><span class=p>(</span><span class=n>f</span><span class=p>)</span>
    <span class=k>def</span> <span class=nf>decorated</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>can_run</span><span class=p>:</span>
            <span class=k>return</span> <span class=s2>&quot;Function will not run&quot;</span>
        <span class=k>return</span> <span class=n>f</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>

    <span class=k>return</span> <span class=n>decorated</span>


<span class=nd>@decorator_name</span>
<span class=k>def</span> <span class=nf>func</span><span class=p>():</span>
    <span class=k>return</span> <span class=p>(</span><span class=s2>&quot;Function is running&quot;</span><span class=p>)</span>


<span class=n>can_run</span> <span class=o>=</span> <span class=kc>True</span>
<span class=nb>print</span><span class=p>(</span><span class=n>func</span><span class=p>())</span>
<span class=c1># Output: Function is running</span>

<span class=n>can_run</span> <span class=o>=</span> <span class=kc>False</span>
<span class=nb>print</span><span class=p>(</span><span class=n>func</span><span class=p>())</span>
<span class=c1># Output: Function will not run</span>
</code></pre></div> <p>下面还是一个装饰器的例子。把下面的代码段保存到文件<code>test.py</code>。</p> <div class=highlight><pre><span></span><code><span class=n>registry</span> <span class=o>=</span> <span class=p>[]</span>

<span class=k>def</span> <span class=nf>register</span><span class=p>(</span><span class=n>func</span><span class=p>):</span>
    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;running register </span><span class=si>{</span><span class=n>func</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
    <span class=n>registry</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>func</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>func</span>

<span class=nd>@register</span>
<span class=k>def</span> <span class=nf>f1</span><span class=p>():</span>
    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;running f1()&#39;</span><span class=p>)</span>

<span class=nd>@register</span>
<span class=k>def</span> <span class=nf>f2</span><span class=p>():</span>
    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;running f2()&#39;</span><span class=p>)</span>

<span class=k>def</span> <span class=nf>f3</span><span class=p>():</span>
    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;running f3()&#39;</span><span class=p>)</span>

<span class=k>def</span> <span class=nf>main</span><span class=p>():</span>
    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;runnning main()&#39;</span><span class=p>)</span>
    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;registry--&gt; </span><span class=si>{</span><span class=n>registry</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
    <span class=n>f1</span><span class=p>()</span>
    <span class=n>f2</span><span class=p>()</span>
    <span class=n>f3</span><span class=p>()</span>

<span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
    <span class=n>main</span><span class=p>()</span>
</code></pre></div> <p>执行上述代码段<code>python3 test.py</code>，得到下面的结果。</p> <div class=highlight><pre><span></span><code><span class=n>running</span> <span class=n>register</span> <span class=o>&lt;</span><span class=n>function</span> <span class=n>f1</span> <span class=n>at</span> <span class=mh>0x7f70847bec80</span><span class=o>&gt;</span>
<span class=n>running</span> <span class=n>register</span> <span class=o>&lt;</span><span class=n>function</span> <span class=n>f2</span> <span class=n>at</span> <span class=mh>0x7f70705aa9d8</span><span class=o>&gt;</span>
<span class=n>runnning</span> <span class=n>main</span><span class=p>()</span>
<span class=n>registry</span><span class=o>--&gt;</span> <span class=p>[</span><span class=o>&lt;</span><span class=n>function</span> <span class=n>f1</span> <span class=n>at</span> <span class=mh>0x7f70847bec80</span><span class=o>&gt;</span><span class=p>,</span> <span class=o>&lt;</span><span class=n>function</span> <span class=n>f2</span> <span class=n>at</span> <span class=mh>0x7f70705aa9d8</span><span class=o>&gt;</span><span class=p>]</span>
<span class=n>running</span> <span class=n>f1</span><span class=p>()</span>
<span class=n>running</span> <span class=n>f2</span><span class=p>()</span>
<span class=n>running</span> <span class=n>f3</span><span class=p>()</span>
</code></pre></div> <p><code>register</code>在模块中其他函数之前运行（两次）。调用<code>register</code>时，传给它的参数是被装饰的函数，例如<code>function f1 at 0x7f70847bec80&gt;</code>。加载模块后，<code>registry</code>中有两个被装饰函数的引用：<code>f1</code>和<code>f2</code>。这两个函数，以及<code>f3</code>，只在<code>main</code>明确调用它们时才执行。</p> <p>由此得，函数装饰器在导入模块时立即执行，而被装饰的函数只在明确调用时运行，即Python中提到的**导入时**和**运行时**之间的区别。</p> <p>上面例子中装饰器函数与被装饰的函数在同一个模块中定义。实际应用中，装饰器通常在一个模块中定义，然后应用到其他模块中的函数上。</p> <p>上面例子中<code>register</code>装饰器返回的函数与通过参数传入的相同。实际应用中，大多数装饰器会在内部定义一个函数，然后将其返回。</p> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../ch02/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Python打包和解包" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Python打包和解包 </div> </div> </a> <a href=../ch04/ class="md-footer__link md-footer__link--next" aria-label="Next: Python面向对象概念" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Python面向对象概念 </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.instant", "navigation.top"], "search": "../../../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script> <script src=../../../assets/javascripts/bundle.2ab50757.min.js></script> </body> </html>