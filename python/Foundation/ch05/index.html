<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://huyuhui001.github.io/mySite/python/Foundation/ch05/ rel=canonical><link rel=icon href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.3.1, mkdocs-material-8.4.3"><title>Python面向对象三大特性 - 知行斋</title><link rel=stylesheet href=../../../assets/stylesheets/main.6b80c2a2.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.cbb835fc.min.css><meta name=theme-color content=#009485><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../extra.css><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme data-md-color-primary=teal data-md-color-accent=green> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#python class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title=知行斋 class="md-header__button md-logo" aria-label=知行斋 data-md-component=logo> <img src=../../../assets/logo.jpg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> 知行斋 </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Python面向对象三大特性 </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/huyuhui001/mySite title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> huyuhui001/mySite </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> Site </a> </li> <li class=md-tabs__item> <a href=../../../linux/ class=md-tabs__link> Linux </a> </li> <li class=md-tabs__item> <a href=../../../k8s/ class=md-tabs__link> Kubernetes </a> </li> <li class=md-tabs__item> <a href=../../ class="md-tabs__link md-tabs__link--active"> Python </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title=知行斋 class="md-nav__button md-logo" aria-label=知行斋 data-md-component=logo> <img src=../../../assets/logo.jpg alt=logo> </a> 知行斋 </label> <div class=md-nav__source> <a href=https://github.com/huyuhui001/mySite title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> huyuhui001/mySite </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_1 type=checkbox id=__nav_1> <label class=md-nav__link for=__nav_1> Site <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Site data-md-level=1> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Site </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> Index </a> </li> <li class=md-nav__item> <a href=../../../about/ class=md-nav__link> About </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2> Linux <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Linux data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Linux </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../linux/ class=md-nav__link> Index </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_2 type=checkbox id=__nav_2_2> <label class=md-nav__link for=__nav_2_2> Linux SRE <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Linux SRE" data-md-level=2> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> Linux SRE </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../linux/SRE/01-fundamentals/ class=md-nav__link> 第一章 Linux基础 </a> </li> <li class=md-nav__item> <a href=../../../linux/SRE/02-filesystem/ class=md-nav__link> 第二章 文件系统 </a> </li> <li class=md-nav__item> <a href=../../../linux/SRE/03-identity-security/ class=md-nav__link> 第三章 身份与安全 </a> </li> <li class=md-nav__item> <a href=../../../linux/SRE/04-TextTools/ class=md-nav__link> 第四章 文本编辑 </a> </li> <li class=md-nav__item> <a href=../../../linux/SRE/05-RegExpress/ class=md-nav__link> 第五章 正则表达式 </a> </li> <li class=md-nav__item> <a href=../../../linux/SRE/06-FileLookup/ class=md-nav__link> 第六章 文件查找 </a> </li> <li class=md-nav__item> <a href=../../../linux/SRE/07-FilePacking/ class=md-nav__link> 第七章 文件打包和解包 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_3 type=checkbox id=__nav_2_3> <label class=md-nav__link for=__nav_2_3> SUSE Linux Administration <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="SUSE Linux Administration" data-md-level=2> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> SUSE Linux Administration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../linux/Administration/01/ class=md-nav__link> Linux File System Overview </a> </li> <li class=md-nav__item> <a href=../../../linux/Administration/02/ class=md-nav__link> Useful Commands </a> </li> <li class=md-nav__item> <a href=../../../linux/Administration/03/ class=md-nav__link> Shell </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_4 type=checkbox id=__nav_2_4> <label class=md-nav__link for=__nav_2_4> SUSE Enterprise Storage Foundation <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="SUSE Enterprise Storage Foundation" data-md-level=2> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> SUSE Enterprise Storage Foundation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../linux/SES/linux_ses_memo/ class=md-nav__link> SUSE Enterprise Storage Foundation </a> </li> <li class=md-nav__item> <a href=../../../linux/SES/linux_ses_demo/ class=md-nav__link> SUSE Enterprise Storage Basic Operation </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3> Kubernetes <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Kubernetes data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Kubernetes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/ class=md-nav__link> Index </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_2 type=checkbox id=__nav_3_2> <label class=md-nav__link for=__nav_3_2> CKA Learning Memo <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="CKA Learning Memo" data-md-level=2> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> CKA Learning Memo </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_2_1 type=checkbox id=__nav_3_2_1> <label class=md-nav__link for=__nav_3_2_1> Installation <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Installation data-md-level=3> <label class=md-nav__title for=__nav_3_2_1> <span class="md-nav__icon md-icon"></span> Installation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_en/installation/single-local/ class=md-nav__link> Single Node Installation </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/installation/multiple-local/ class=md-nav__link> Multiple Nodes Installation </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/installation/aliyun-ubuntu/ class=md-nav__link> Installation on Aliyun ECS </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_2_2 type=checkbox id=__nav_3_2_2> <label class=md-nav__link for=__nav_3_2_2> Docker <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Docker data-md-level=3> <label class=md-nav__title for=__nav_3_2_2> <span class="md-nav__icon md-icon"></span> Docker </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/docker/ class=md-nav__link> Fundamentals </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_2_3 type=checkbox id=__nav_3_2_3> <label class=md-nav__link for=__nav_3_2_3> Foundamentals <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Foundamentals data-md-level=3> <label class=md-nav__title for=__nav_3_2_3> <span class="md-nav__icon md-icon"></span> Foundamentals </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/memo/ class=md-nav__link> Memo </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/basics/ class=md-nav__link> kubectl basics </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_2_4 type=checkbox id=__nav_3_2_4> <label class=md-nav__link for=__nav_3_2_4> Core Kubernetes <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Core Kubernetes" data-md-level=3> <label class=md-nav__title for=__nav_3_2_4> <span class="md-nav__icon md-icon"></span> Core Kubernetes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/pod/ class=md-nav__link> Pod </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/deployment/ class=md-nav__link> Deployment </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/service/ class=md-nav__link> Service </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_2_5 type=checkbox id=__nav_3_2_5> <label class=md-nav__link for=__nav_3_2_5> Application Modeling <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Application Modeling" data-md-level=3> <label class=md-nav__title for=__nav_3_2_5> <span class="md-nav__icon md-icon"></span> Application Modeling </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/namespace/ class=md-nav__link> Namespace </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/statefulset/ class=md-nav__link> StatefulSet </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/daemonset/ class=md-nav__link> DaemonSet </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/job/ class=md-nav__link> Job and Cronjob </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/configuration/ class=md-nav__link> Configuration </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/secrets/ class=md-nav__link> Secrets </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/persistence/ class=md-nav__link> Persistence </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/rbac/ class=md-nav__link> Role Based Access Control (RBAC) </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/ingress/ class=md-nav__link> Ingress </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_2_6 type=checkbox id=__nav_3_2_6> <label class=md-nav__link for=__nav_3_2_6> Advanced Kubernetes <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Advanced Kubernetes" data-md-level=3> <label class=md-nav__title for=__nav_3_2_6> <span class="md-nav__icon md-icon"></span> Advanced Kubernetes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/scheduling/ class=md-nav__link> Scheduling </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/hpa/ class=md-nav__link> Horizontal Pod Autoscaling </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/policy/ class=md-nav__link> Policy </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/networkpolicy/ class=md-nav__link> Network Policy </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/clustermgt/ class=md-nav__link> Cluster Management </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_2_7 type=checkbox id=__nav_3_2_7> <label class=md-nav__link for=__nav_3_2_7> Operating Kubernetes <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Operating Kubernetes" data-md-level=3> <label class=md-nav__title for=__nav_3_2_7> <span class="md-nav__icon md-icon"></span> Operating Kubernetes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/troubleshooting/ class=md-nav__link> Troubleshooting </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/healthcheck/ class=md-nav__link> Health Check </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/helming/ class=md-nav__link> Helming </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_2_8 type=checkbox id=__nav_3_2_8> <label class=md-nav__link for=__nav_3_2_8> Topics <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Topics data-md-level=3> <label class=md-nav__title for=__nav_3_2_8> <span class="md-nav__icon md-icon"></span> Topics </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/casestudy-operation-resources/ class=md-nav__link> Operations on Resources </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/casestudy-health-check/ class=md-nav__link> Health Check </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/casestudy-calico/ class=md-nav__link> Calico Installation </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_en/foundamentals/kyma/ class=md-nav__link> Kyma </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3 type=checkbox id=__nav_3_3> <label class=md-nav__link for=__nav_3_3> CKA学习笔记 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=CKA学习笔记 data-md-level=2> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> CKA学习笔记 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3_1 type=checkbox id=__nav_3_3_1> <label class=md-nav__link for=__nav_3_3_1> 安装 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=安装 data-md-level=3> <label class=md-nav__title for=__nav_3_3_1> <span class="md-nav__icon md-icon"></span> 安装 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_cn/installation/single-local/ class=md-nav__link> 单节点虚拟机安装Kubernetes </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/installation/multiple-local/ class=md-nav__link> 多节点虚拟机安装Kubernetes </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/installation/aliyun-ubuntu/ class=md-nav__link> 阿里云ECS安装Kubernetes </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3_2 type=checkbox id=__nav_3_3_2> <label class=md-nav__link for=__nav_3_3_2> Docker <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Docker data-md-level=3> <label class=md-nav__title for=__nav_3_3_2> <span class="md-nav__icon md-icon"></span> Docker </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/docker/ class=md-nav__link> Docker基础 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3_3 type=checkbox id=__nav_3_3_3> <label class=md-nav__link for=__nav_3_3_3> 基础知识 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=基础知识 data-md-level=3> <label class=md-nav__title for=__nav_3_3_3> <span class="md-nav__icon md-icon"></span> 基础知识 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/memo/ class=md-nav__link> Kubernetes随笔 </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/overview/ class=md-nav__link> Kubernetes集群概览 </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/basics/ class=md-nav__link> kubectl基础 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3_4 type=checkbox id=__nav_3_3_4> <label class=md-nav__link for=__nav_3_3_4> 核心概念 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=核心概念 data-md-level=3> <label class=md-nav__title for=__nav_3_3_4> <span class="md-nav__icon md-icon"></span> 核心概念 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/pod/ class=md-nav__link> Pod </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/deployment/ class=md-nav__link> Deployment </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/service/ class=md-nav__link> Service </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3_5 type=checkbox id=__nav_3_3_5> <label class=md-nav__link for=__nav_3_3_5> 应用体系 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=应用体系 data-md-level=3> <label class=md-nav__title for=__nav_3_3_5> <span class="md-nav__icon md-icon"></span> 应用体系 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/namespace/ class=md-nav__link> Namespace </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/statefulset/ class=md-nav__link> StatefulSet </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/daemonset/ class=md-nav__link> DaemonSet </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/job/ class=md-nav__link> Job and Cronjob </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/configuration/ class=md-nav__link> Configuration </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/secrets/ class=md-nav__link> secrets </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/persistence/ class=md-nav__link> Persistence </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/rbac/ class=md-nav__link> RBAC鉴权 </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/ingress/ class=md-nav__link> Ingress-nginx </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3_6 type=checkbox id=__nav_3_3_6> <label class=md-nav__link for=__nav_3_3_6> 进阶概念 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=进阶概念 data-md-level=3> <label class=md-nav__title for=__nav_3_3_6> <span class="md-nav__icon md-icon"></span> 进阶概念 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/scheduling/ class=md-nav__link> Scheduling </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/hpa/ class=md-nav__link> Horizontal Pod Autoscaling (HPA) </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/policy/ class=md-nav__link> Policy </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/networkpolicy/ class=md-nav__link> Network Policy </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/clustermgt/ class=md-nav__link> Cluster Management </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3_7 type=checkbox id=__nav_3_3_7> <label class=md-nav__link for=__nav_3_3_7> 日常维护 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=日常维护 data-md-level=3> <label class=md-nav__title for=__nav_3_3_7> <span class="md-nav__icon md-icon"></span> 日常维护 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/troubleshooting/ class=md-nav__link> Troubleshooting </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/healthcheck/ class=md-nav__link> 健康检查 </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/helming/ class=md-nav__link> Helm Chart </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3_8 type=checkbox id=__nav_3_3_8> <label class=md-nav__link for=__nav_3_3_8> 主题讨论 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=主题讨论 data-md-level=3> <label class=md-nav__title for=__nav_3_3_8> <span class="md-nav__icon md-icon"></span> 主题讨论 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/casestudy-operation-resources/ class=md-nav__link> Kubernetes资源常见操作 </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/casestudy-health-check/ class=md-nav__link> 健康检查 </a> </li> <li class=md-nav__item> <a href=../../../k8s/cka_cn/foundamentals/casestudy-calico/ class=md-nav__link> 安装Calico </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_4 type=checkbox id=__nav_3_4> <label class=md-nav__link for=__nav_3_4> Demos <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Demos data-md-level=2> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> Demos </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../k8s/demo/cap_on_kyma/ class=md-nav__link> Build CAP Application on Kyma </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4> Python <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Python data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Python </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ class=md-nav__link> Index </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_2 type=checkbox id=__nav_4_2 checked> <label class=md-nav__link for=__nav_4_2> Python基础 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Python基础 data-md-level=2> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Python基础 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ch00/ class=md-nav__link> Python安装 </a> </li> <li class=md-nav__item> <a href=../ch01/ class=md-nav__link> Python语言基础 </a> </li> <li class=md-nav__item> <a href=../ch02/ class=md-nav__link> Python打包和解包 </a> </li> <li class=md-nav__item> <a href=../ch03/ class=md-nav__link> Python内置函数及文件 </a> </li> <li class=md-nav__item> <a href=../ch04/ class=md-nav__link> Python面向对象概念 </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Python面向对象三大特性 <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Python面向对象三大特性 </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#encapsulation class=md-nav__link> 封装 Encapsulation </a> </li> <li class=md-nav__item> <a href=#inheritance class=md-nav__link> 继承 Inheritance </a> <nav class=md-nav aria-label="继承 Inheritance"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#multiple-inheritance class=md-nav__link> 多重继承 Multiple Inheritance </a> </li> <li class=md-nav__item> <a href=#_1 class=md-nav__link> 菱形继承和继承关系检测 </a> </li> <li class=md-nav__item> <a href=#minxins class=md-nav__link> 多继承关系的minxins机制 </a> </li> <li class=md-nav__item> <a href=#class-combination class=md-nav__link> 组合（Class Combination） </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#polymorphism class=md-nav__link> 多态 Polymorphism </a> <nav class=md-nav aria-label="多态 Polymorphism"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_2 class=md-nav__link> 类方法的多态性 </a> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> 继承的多态性 </a> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> 函数和对象的多态性 </a> </li> <li class=md-nav__item> <a href=#ducking-typinggoose-typing class=md-nav__link> 鸭子类型（Ducking Typing）和白鹅类型（Goose Typing） </a> </li> <li class=md-nav__item> <a href=#class-methodstatic-method class=md-nav__link> 类方法（Class method）和静态方法（Static Method） </a> </li> <li class=md-nav__item> <a href=#monkey-patch class=md-nav__link> 猴子补丁（monkey patch） </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#private-variables class=md-nav__link> 私有变量 Private Variables </a> </li> <li class=md-nav__item> <a href=#reflection class=md-nav__link> 反射(reflection) </a> </li> <li class=md-nav__item> <a href=#iterators class=md-nav__link> 迭代器 Iterators </a> </li> <li class=md-nav__item> <a href=#generators class=md-nav__link> 生成器 Generators </a> </li> <li class=md-nav__item> <a href=#generator-expressions class=md-nav__link> 生成器表达式 Generator Expressions </a> </li> <li class=md-nav__item> <a href=#metaclass class=md-nav__link> 元类（metaclass） </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3 type=checkbox id=__nav_4_3> <label class=md-nav__link for=__nav_4_3> Python数据分析基础 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Python数据分析基础 data-md-level=2> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> Python数据分析基础 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../DataAnalysis/ch01/ class=md-nav__link> NumPy基础 </a> </li> <li class=md-nav__item> <a href=../../DataAnalysis/ch10/ class=md-nav__link> NumPy进阶 </a> </li> <li class=md-nav__item> <a href=../../DataAnalysis/ch02/ class=md-nav__link> Pandas入门 </a> </li> <li class=md-nav__item> <a href=../../DataAnalysis/ch03/ class=md-nav__link> 数据载入、存储及文件格式 </a> </li> <li class=md-nav__item> <a href=../../DataAnalysis/ch04/ class=md-nav__link> 数据清洗与准备 </a> </li> <li class=md-nav__item> <a href=../../DataAnalysis/ch05/ class=md-nav__link> 数据规整：连接、联合与重塑 </a> </li> <li class=md-nav__item> <a href=../../DataAnalysis/ch06/ class=md-nav__link> 绘图与可视化 </a> </li> <li class=md-nav__item> <a href=../../DataAnalysis/ch07/ class=md-nav__link> 数据聚合与分组操作 </a> </li> <li class=md-nav__item> <a href=../../DataAnalysis/ch08/ class=md-nav__link> 时间序列 </a> </li> <li class=md-nav__item> <a href=../../DataAnalysis/ch09/ class=md-nav__link> 高阶pandas </a> </li> <li class=md-nav__item> <a href=../../DataAnalysis/ch11/ class=md-nav__link> Python建模库介绍 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_4 type=checkbox id=__nav_4_4> <label class=md-nav__link for=__nav_4_4> 数据结构和算法 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=数据结构和算法 data-md-level=2> <label class=md-nav__title for=__nav_4_4> <span class="md-nav__icon md-icon"></span> 数据结构和算法 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../DataStructure/01_PythonFundmantal/ class=md-nav__link> 基础知识回顾 </a> </li> <li class=md-nav__item> <a href=../../DataStructure/02_CollectionsOverview/ class=md-nav__link> 多项集的概述 </a> </li> <li class=md-nav__item> <a href=../../DataStructure/03_TimeComplexity/ class=md-nav__link> 搜索、排序以及复杂度分析 </a> </li> <li class=md-nav__item> <a href=../../DataStructure/04_ArrayChain/ class=md-nav__link> 数组和链接结构 </a> </li> <li class=md-nav__item> <a href=../../DataStructure/05_InterfacePolymorphism/ class=md-nav__link> 接口、实现和多态 </a> </li> <li class=md-nav__item> <a href=../../DataStructure/06_InheritanceAbstractClass/ class=md-nav__link> 继承与抽象类 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5 type=checkbox id=__nav_4_5> <label class=md-nav__link for=__nav_4_5> Effective Python <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Effective Python" data-md-level=2> <label class=md-nav__title for=__nav_4_5> <span class="md-nav__icon md-icon"></span> Effective Python </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule01/ class=md-nav__link> 第01条 查询自己使用的Python版本 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule02/ class=md-nav__link> 第02条 遵循PEP 8风格指南 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule03/ class=md-nav__link> 第03条 了解bytes与str的区别 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule04/ class=md-nav__link> 第04条 用支持插值的f-string取代C风格的格式字符串与str.format方法 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule05/ class=md-nav__link> 第05条 用辅助函数取代复杂的表达式 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule06/ class=md-nav__link> 第06条 把数据结构直接拆分到多个变量里，不要专门通过下标访问 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule07/ class=md-nav__link> 第07条 尽量用enumerate取代range </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule08/ class=md-nav__link> 第08条 用zip函数同时遍历两个迭代器 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule09/ class=md-nav__link> 第09条 不要在for与while循环后面写else块 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule10/ class=md-nav__link> 第10条 用赋值表达式减少重复代码 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule11/ class=md-nav__link> 第11条 学会对序列做切片 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule12/ class=md-nav__link> 第12条 不要在切片里同时指定起止下标与步进 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule13/ class=md-nav__link> 第13条 通过带星号的unpacking操作来捕获多个元素,不要用切片 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule14/ class=md-nav__link> 第14条 用sort方法的key参数来表示复杂的排序逻辑 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule15/ class=md-nav__link> 第15条 不要过分依赖给字典添加条目时所用的顺序 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule16/ class=md-nav__link> 第16条 用get处理键不在字典中的情况,不要使用in与KeyError </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule17/ class=md-nav__link> 第17条 用defaultdict处理内部状态中缺失的元素,而不要用setdefault </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule18/ class=md-nav__link> 第18条 学会利用__missing__构造依赖键的默认值 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule19/ class=md-nav__link> 第19条 不要把函数返回的多个数值拆分到三个以上的变量中 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule20/ class=md-nav__link> 第20条 遇到意外状况时应该抛出异常,不要返回None </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule21/ class=md-nav__link> 第21条 了解如何在闭包里面使用外围作用域中的变量 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule22/ class=md-nav__link> 第22条 用数量可变的位置参数给函数设计清晰的参数列表 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule23/ class=md-nav__link> 第23条 用关键字参数来表示可选的行为 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule24/ class=md-nav__link> 第24条 用None和docstring来描述默认值会变的参数 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule25/ class=md-nav__link> 第25条 用只能以关键字指定和只能按位置传入的参数来设计清晰的参数列表 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule26/ class=md-nav__link> 第26条 用functools.wraps定义函数修饰器 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule27/ class=md-nav__link> 第27条 用列表推导取代map与filter </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule28/ class=md-nav__link> 第28条 控制推导逻辑的子表达式不要超过两个 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule29/ class=md-nav__link> 第29条 用赋值表达式消除推导中的重复代码 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule30/ class=md-nav__link> 第30条 不要让函数直接返回列表，应该让它逐个生成列表里的值 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule31/ class=md-nav__link> 第31条 谨慎地迭代函数所收到的参数 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule32/ class=md-nav__link> 第32条 考虑用生成器表达式改写数据量较大的列表推导 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule33/ class=md-nav__link> 第33条 通过yield from把多个生成器连起来用 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule34/ class=md-nav__link> 第34条 不要用send给生成器注入数据 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule35/ class=md-nav__link> 第35条 不要通过throw变换生成器的状态 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule36/ class=md-nav__link> 第36条 考虑用itertools拼装迭代器与生成器 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule37/ class=md-nav__link> 第37条 用组合起来的类来实现多层结构，不要用嵌套的内置类型 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule38/ class=md-nav__link> 第38条 让简单的接口接受函数，而不是类的实例 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule39/ class=md-nav__link> 第39条 通过@classmethod多态来构造同一体系中的各类对象 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule40/ class=md-nav__link> 第40条 通过super初始化超类 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule41/ class=md-nav__link> 第41条 考虑用mix-in类来表示可组合的功能 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule42/ class=md-nav__link> 第42条 优先考虑用public属性表示应受保护的数据,不要用private属性表示 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule43/ class=md-nav__link> 第43条 自定义的容器类型应该从collections.abc继承 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule44/ class=md-nav__link> 第44条 用纯属性与修饰器取代旧式的setter与getter方法 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule45/ class=md-nav__link> 第45条 考虑用@property实现新的属性访问逻辑,不要急着重构原有的代码 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule46/ class=md-nav__link> 第46条 用描述符来改写需要复用的@property方法 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule47/ class=md-nav__link> 第47条 针对惰性属性使用__getattr__、__getattribute__及__setattr__ </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule48/ class=md-nav__link> 第48条 用__init_subclass__验证子类写得是否正确 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule49/ class=md-nav__link> 第49条 用__init_subclass__记录现有的子类 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule50/ class=md-nav__link> 第50条 用__set_name__给类属性加注解 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule51/ class=md-nav__link> 第51条 优先考虑通过类修饰器来提供可组合的扩充功能，不要使用元类 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule52/ class=md-nav__link> 第52条 用subprocess管理子进程 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule53/ class=md-nav__link> 第53条 可以用线程执行阻塞式I/O,但不要用它做并行计算 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule54/ class=md-nav__link> 第54条 利用Lock防止多个线程争用同一份数据 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule55/ class=md-nav__link> 第55条 用Queue来协调各线程之间的工作进度 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule56/ class=md-nav__link> 第56条 学会判断什么场合必须做并发 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule57/ class=md-nav__link> 第57条 不要在每次fan-out时都新建一批Thread实例 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule58/ class=md-nav__link> 第58条 学会正确地重构代码,以便用Queue做并发 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule59/ class=md-nav__link> 第59条 如果必须用线程做并发,那就考虑通过ThreadPoolExecutor实现 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule60/ class=md-nav__link> 第60条 用协程实现高并发的I/O </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule61/ class=md-nav__link> 第61条 学会用asyncio改写那些通过线程实现的I/O </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule62/ class=md-nav__link> 第62条 结合线程与协程,将代码顺利迁移到asyncio </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule63/ class=md-nav__link> 第63条 让asyncio的事件循环保持畅通,以便进一步提升程序的响应能力 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule64/ class=md-nav__link> 第64条 考虑用concurrent.futures实现真正的并行计算 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule65/ class=md-nav__link> 第65条 合理利用try/except/else/finally结构中的每个代码块 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule66/ class=md-nav__link> 第66条 考虑用contextlib和with语句来改写可复用的try/finally代码 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule67/ class=md-nav__link> 第67条 用datetime模块处理本地时间,不要用time模块 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule68/ class=md-nav__link> 第68条 用copyreg实现可靠的pickle操作 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule69/ class=md-nav__link> 第69条 在需要准确计算的场合,用decimal表示相应的数值 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule70/ class=md-nav__link> 第70条 先分析性能，然后再优化 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule71/ class=md-nav__link> 第71条 优先考虑用deque实现生产者-消费者队列 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule72/ class=md-nav__link> 第72条 考虑用bisect搜索已排序的序列 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule73/ class=md-nav__link> 第73条 学会使用heapq制作优先级队列 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule74/ class=md-nav__link> 第74条 考虑用memoryview与bytearray来实现无须拷贝的bytes操作 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule75/ class=md-nav__link> 第75条 通过repr字符串输出调试信息 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule76/ class=md-nav__link> 第76条 在TestCase子类里验证相关的行为 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule77/ class=md-nav__link> 第77条 把测试前、后的准备与清理逻辑写在setUp、tearDown、setUpModule与tearDownModule中,以防用例之间互相干扰 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule78/ class=md-nav__link> 第78条 用Mock来模拟受测代码所依赖的复杂函数 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule79/ class=md-nav__link> 第79条 把受测代码所依赖的系统封装起来，以便于模拟和测试 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule80/ class=md-nav__link> 第80条 考虑用pdb做交互调试 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule81/ class=md-nav__link> 第81条 用tracemalloc来掌握内存的使用与泄漏情况 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule82/ class=md-nav__link> 第82条 学会寻找由其他Python开发者所构建的模块 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule83/ class=md-nav__link> 第83条 用虚拟环境隔离项目,并重建依赖关系 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule84/ class=md-nav__link> 第84条 每一个函数、类与模块都要写docstring </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule85/ class=md-nav__link> 第85条 用包来安排模块,以提供稳固的API </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule86/ class=md-nav__link> 第86条 考虑用模块级别的代码配置不同的部署环境 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule87/ class=md-nav__link> 第87条 为自编的模块定义根异常,让调用者能够专门处理与此API有关的异常 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule88/ class=md-nav__link> 第88条 用适当的方式打破循环依赖关系 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule89/ class=md-nav__link> 第89条 重构时考虑通过warnings提醒开发者API已经发生变化 </a> </li> <li class=md-nav__item> <a href=../../Pythonic90Rules/Rule90/ class=md-nav__link> 第90条 考虑通过typing做静态分析,以消除bug </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_6 type=checkbox id=__nav_4_6> <label class=md-nav__link for=__nav_4_6> Demos <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Demos data-md-level=2> <label class=md-nav__title for=__nav_4_6> <span class="md-nav__icon md-icon"></span> Demos </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Demo/CourseSystem/ class=md-nav__link> 选课系统 </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#encapsulation class=md-nav__link> 封装 Encapsulation </a> </li> <li class=md-nav__item> <a href=#inheritance class=md-nav__link> 继承 Inheritance </a> <nav class=md-nav aria-label="继承 Inheritance"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#multiple-inheritance class=md-nav__link> 多重继承 Multiple Inheritance </a> </li> <li class=md-nav__item> <a href=#_1 class=md-nav__link> 菱形继承和继承关系检测 </a> </li> <li class=md-nav__item> <a href=#minxins class=md-nav__link> 多继承关系的minxins机制 </a> </li> <li class=md-nav__item> <a href=#class-combination class=md-nav__link> 组合（Class Combination） </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#polymorphism class=md-nav__link> 多态 Polymorphism </a> <nav class=md-nav aria-label="多态 Polymorphism"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_2 class=md-nav__link> 类方法的多态性 </a> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> 继承的多态性 </a> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> 函数和对象的多态性 </a> </li> <li class=md-nav__item> <a href=#ducking-typinggoose-typing class=md-nav__link> 鸭子类型（Ducking Typing）和白鹅类型（Goose Typing） </a> </li> <li class=md-nav__item> <a href=#class-methodstatic-method class=md-nav__link> 类方法（Class method）和静态方法（Static Method） </a> </li> <li class=md-nav__item> <a href=#monkey-patch class=md-nav__link> 猴子补丁（monkey patch） </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#private-variables class=md-nav__link> 私有变量 Private Variables </a> </li> <li class=md-nav__item> <a href=#reflection class=md-nav__link> 反射(reflection) </a> </li> <li class=md-nav__item> <a href=#iterators class=md-nav__link> 迭代器 Iterators </a> </li> <li class=md-nav__item> <a href=#generators class=md-nav__link> 生成器 Generators </a> </li> <li class=md-nav__item> <a href=#generator-expressions class=md-nav__link> 生成器表达式 Generator Expressions </a> </li> <li class=md-nav__item> <a href=#metaclass class=md-nav__link> 元类（metaclass） </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/huyuhui001/mySite/edit/main/docs/python/Foundation/ch05.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg> </a> <h1 id=python>Python面向对象三大特性<a class=headerlink href=#python title="Permanent link"> ¶</a></h1> <p>Python面向对象三大特性：</p> <ul> <li>封装</li> <li>继承</li> <li>多态</li> </ul> <h2 id=encapsulation>封装 Encapsulation<a class=headerlink href=#encapsulation title="Permanent link"> ¶</a></h2> <p>封装是使用特殊的语法，对成员属性和成员方法进行包装，限制一些访问和操作，达到保护和隐藏的目的。</p> <p>封装机制保证了类内部数据结构的完整性，因为使用类的用户无法直接看到类中的数据结构，只能使用类允许公开的数据，很好地避免了外部对内部数据的影响，提高了程序的可维护性。</p> <p>对一个类实现良好的封装，用户只能借助暴露出来的类方法来访问数据，可以在这些暴露的方法中加入适当的控制逻辑，即可控制用户对类中属性或方法的操作。</p> <p>对类进行良好的封装，主要是内部使用封装的成员，也提高了代码的复用性。</p> <p>类成员封装的级别：</p> <ul> <li>公有的（public）</li> <li>保护的（protected），在Python中并没有实现protected封装，属于开发者的约定俗成。</li> <li>私有的（private），在Python中private封装是通过改名策略来实现的，并不是真正的私有化。</li> </ul> <table> <thead> <tr> <th>访问限制</th> <th>共有的public</th> <th>受保护的protected</th> <th>私有的private</th> </tr> </thead> <tbody> <tr> <td>在类的内部</td> <td>OK</td> <td>OK</td> <td>OK</td> </tr> <tr> <td>在类的外部</td> <td>OK</td> <td>No (Python中可以)</td> <td>No</td> </tr> </tbody> </table> <p>看下面的例子。(参考<a href=./ >私有变量Private Variables</a>)</p> <ul> <li><code>name</code>是共有属性，可以在外部调用tom.name。</li> <li><code>_age</code>是受保护的属性，理论上在外部是不可调用的，但在Python中是可以调用的<code>tom._age</code>。</li> <li><code>__phone</code>是私有属性，在外部是不可调用的，<code>tom.__get_phone()</code>报错“属性不存在”。</li> <li>对应方法也是类似。</li> <li>在类的内部对受保护对象和私有对象没有访问限制。<code>_get_age</code>可以调用私有属性<code>__phone</code>。</li> </ul> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Person</span><span class=p>():</span>
    <span class=n>name</span> <span class=o>=</span> <span class=s1>&#39;name&#39;</span>  <span class=c1># public</span>
    <span class=n>_age</span> <span class=o>=</span> <span class=mi>0</span>  <span class=c1># protected</span>
    <span class=n>__phone</span> <span class=o>=</span> <span class=s1>&#39;phone&#39;</span>  <span class=c1># private</span>

    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>n</span><span class=p>,</span> <span class=n>a</span><span class=p>,</span> <span class=n>p</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>name</span> <span class=o>=</span> <span class=n>n</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_age</span> <span class=o>=</span> <span class=n>a</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>__phone</span> <span class=o>=</span> <span class=n>p</span>

    <span class=k>def</span> <span class=nf>get_name</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;My name is </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>

    <span class=k>def</span> <span class=nf>_get_age</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;My age is </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>_age</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;My age is </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>__phone</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>

    <span class=k>def</span> <span class=nf>__get_phone</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;My phone is </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>__phone</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>


<span class=n>tom</span> <span class=o>=</span> <span class=n>Person</span><span class=p>(</span><span class=s1>&#39;Tom&#39;</span><span class=p>,</span> <span class=mi>18</span><span class=p>,</span> <span class=mi>12345678</span><span class=p>)</span>

<span class=n>tom</span><span class=o>.</span><span class=n>name</span>
<span class=c1># &#39;Tom&#39;</span>
<span class=n>tom</span><span class=o>.</span><span class=n>_age</span>
<span class=c1># 18</span>
<span class=n>tom</span><span class=o>.</span><span class=n>__phone</span>
<span class=c1># AttributeError: &#39;Person&#39; object has no attribute &#39;__phone&#39;</span>

<span class=n>tom</span><span class=o>.</span><span class=n>get_name</span><span class=p>()</span>
<span class=c1># My name is Tom</span>

<span class=n>tom</span><span class=o>.</span><span class=n>_get_age</span><span class=p>()</span>
<span class=c1># My age is 18</span>
<span class=c1># My age is 12345678</span>

<span class=n>tom</span><span class=o>.</span><span class=n>__get_phone</span><span class=p>()</span>
<span class=c1># AttributeError: &#39;Person&#39; object has no attribute &#39;__get_phone&#39;</span>
</code></pre></div> <h2 id=inheritance>继承 Inheritance<a class=headerlink href=#inheritance title="Permanent link"> ¶</a></h2> <p>在不指定继承的父类时，所有类都继承object类（系统提供）。</p> <ul> <li>被其它类继承的类，称为父类，或者基类，或者超类。</li> <li>继承其它类的类，称为子类，或者派生类（derived class）。</li> <li>子类继承父类后，就拥有了父类中的所有成员（除了私有成员）。</li> <li>子类继承父类后，并不会把父类的成员复制给子类，而是引用。</li> <li>子类可以直接调用父类的方法<code>super().BaseClassName</code>。如果父类方法有参数要求，子类调用时也有参数要求。</li> <li>子类继承父类后，可以重新定义父类中的方法，称为**重写（Override）**。</li> <li>子类继承父类后，定义父类中没有的方法，被称为对父类的扩展。</li> <li>一个父类可以被多个子类继承。</li> </ul> <p>**派生类（derived class）**定义的语法如下所示:</p> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>BaseClassName</span><span class=p>():</span>
    <span class=o>&lt;</span><span class=n>statement</span><span class=o>-</span><span class=mi>1</span><span class=o>&gt;</span>
    <span class=o>.</span>
    <span class=o>.</span>
    <span class=o>.</span>
    <span class=o>&lt;</span><span class=n>statement</span><span class=o>-</span><span class=n>N</span><span class=o>&gt;</span>

<span class=k>class</span> <span class=nc>DerivedClassName</span><span class=p>(</span><span class=n>BaseClassName</span><span class=p>):</span>
    <span class=o>&lt;</span><span class=n>statement</span><span class=o>-</span><span class=mi>1</span><span class=o>&gt;</span>
    <span class=o>.</span>
    <span class=o>.</span>
    <span class=o>.</span>
    <span class=o>&lt;</span><span class=n>statement</span><span class=o>-</span><span class=n>N</span><span class=o>&gt;</span>
</code></pre></div> <p>名称<code>BaseClassName</code>必须定义于包含派生类定义的作用域中。 也允许用其他任意表达式代替基类名称所在的位置，例如，当基类定义在另一个模块中的时候:</p> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>DerivedClassName</span><span class=p>(</span><span class=n>modname</span><span class=o>.</span><span class=n>BaseClassName</span><span class=p>):</span>
</code></pre></div> <p>派生类定义的执行过程与基类相同。 当构造类对象时，基类会被记住。 此信息将被用来解析属性引用：如果请求的属性在类中找不到，搜索将转往基类中进行查找。 如果基类本身也派生自其他某个类，则此规则将被递归地（recursively）应用。</p> <p>派生类的实例化没有任何特殊之处: <code>DerivedClassName()</code>会创建该类的一个*新实例*。 方法引用将按以下方式解析：搜索相应的类属性，如有必要将按基类继承链逐步向下查找，如果产生了一个函数对象则方法引用就生效。</p> <p>派生类可能会重写（override）其基类的方法。 因为方法在调用同一对象的其他方法时没有特殊权限，所以调用同一基类中定义的另一方法的基类方法最终可能会调用覆盖它的派生类的方法。</p> <p>在派生类中的重载方法（overriding method）实际上可能想要扩展而非简单地替换同名的基类方法。 有一种方式可以简单地直接调用基类方法：即调用<code>BaseClassName.methodname(self, arguments)</code>。 请注意，仅当此基类可在全局作用域中以<code>BaseClassName</code>的名称被访问时方可使用此方式。</p> <p>Python有两个内置函数可被用于继承机制：</p> <ul> <li>使用<code>isinstance()</code>来检查一个实例的类型: <code>isinstance(obj, int)</code>仅会在<code>obj.__class__</code> 为<code>int</code>或某个派生自<code>int</code>的类时为<code>True</code>。</li> <li>使用<code>issubclass()</code>来检查类的继承关系:<code>issubclass(bool, int)</code>为<code>True</code>，因为<code>bool</code>是<code>int</code>的子类。 但是，<code>issubclass(float, int)</code>为<code>False</code>，因为<code>float</code>不是<code>int</code>的子类。</li> </ul> <h3 id=multiple-inheritance>多重继承 Multiple Inheritance<a class=headerlink href=#multiple-inheritance title="Permanent link"> ¶</a></h3> <p>单继承（single-inheritance）：一个类只能继承一个父类方式。</p> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>DerivedClassName</span><span class=p>(</span><span class=n>BaseClassName</span><span class=p>):</span>
    <span class=o>&lt;</span><span class=n>statement</span><span class=o>-</span><span class=mi>1</span><span class=o>&gt;</span>
    <span class=o>.</span>
    <span class=o>.</span>
    <span class=o>.</span>
    <span class=o>&lt;</span><span class=n>statement</span><span class=o>-</span><span class=n>N</span><span class=o>&gt;</span>
</code></pre></div> <p>多继承（Multiple Inheritance）：一个类去继承多个类的方式。定义语句如下所示</p> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>DerivedClassName</span><span class=p>(</span><span class=n>Base1</span><span class=p>,</span> <span class=n>Base2</span><span class=p>,</span> <span class=n>Base3</span><span class=p>):</span>
    <span class=o>&lt;</span><span class=n>statement</span><span class=o>-</span><span class=mi>1</span><span class=o>&gt;</span>
    <span class=o>.</span>
    <span class=o>.</span>
    <span class=o>.</span>
    <span class=o>&lt;</span><span class=n>statement</span><span class=o>-</span><span class=n>N</span><span class=o>&gt;</span>
</code></pre></div> <p>在最简单的情况下，搜索从父类所继承属性的操作是深度优先（depth-first）、从左至右（left-to-right）的，当层次结构中存在重叠时不会在同一个类中搜索两次。 因此，如果某一属性在<code>DerivedClassName</code>中未找到，则会到<code>Base1</code>中搜索它，然后（递归地）到<code>Base1</code>的基类中搜索，如果在那里未找到，再到<code>Base2</code>中搜索，依此类推。</p> <p>真实情况更复杂；方法解析顺序会动态改变以支持对<code>super()</code>的协同调用。 这种方式在某些其他多重继承型语言中被称为**后续方法调用（call-next-method）**，它比**单继承（single-inheritance）**语言中的<code>uper</code>调用更强大。</p> <p>动态改变顺序是有必要的，因为所有多重继承的情况都会显示出一个或更多的菱形关联（diamond relationships）（即至少有一个父类可通过多条路径被最底层类所访问）。 例如，所有类都是继承自<code>object</code>，因此任何多重继承的情况都提供了一条以上的路径可以通向 <code>object</code>。 为了确保基类不会被访问一次以上，动态算法会用一种特殊方式将搜索顺序线性化， 保留每个类所指定的从左至右的顺序，只调用每个父类一次，并且保持单调（monotonic）（即一个类可以被子类化而不影响其父类的优先顺序）。 总而言之，这些特性使得设计具有多重继承的可靠且可扩展的类成为可能。</p> <p>看下面例子，定义了3个类和继承关系。</p> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>F</span><span class=p>():</span>

    <span class=k>def</span> <span class=nf>drink</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Drink Beer&quot;</span><span class=p>)</span>


<span class=k>class</span> <span class=nc>M</span><span class=p>():</span>

    <span class=k>def</span> <span class=nf>drink</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Drink Red Wine&quot;</span><span class=p>)</span>


<span class=k>class</span> <span class=nc>C</span><span class=p>(</span><span class=n>F</span><span class=p>,</span> <span class=n>M</span><span class=p>):</span>

    <span class=k>def</span> <span class=nf>drink</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Drink Water&quot;</span><span class=p>)</span>
</code></pre></div> <p>执行结果是</p> <div class=highlight><pre><span></span><code><span class=n>c</span> <span class=o>=</span> <span class=n>C</span><span class=p>()</span>
<span class=n>c</span><span class=o>.</span><span class=n>drink</span><span class=p>()</span>
<span class=c1># Drink Water</span>
</code></pre></div> <p>方法1：按照mro进行继承查找。 如果把<code>C</code>类改写为如下，可以调用父类，参照<code>C</code>类的mro进行，<code>mro</code>里面类<code>F</code>的上一级是类<code>M</code>，所以类<code>F</code>中的<code>super()</code>就是指类<code>M</code>。</p> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>C</span><span class=p>(</span><span class=n>F</span><span class=p>,</span> <span class=n>M</span><span class=p>):</span>

    <span class=k>def</span> <span class=nf>drink</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>drink</span><span class=p>()</span>
        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Drink Water&quot;</span><span class=p>)</span>


<span class=n>c</span> <span class=o>=</span> <span class=n>C</span><span class=p>()</span>
<span class=n>c</span><span class=o>.</span><span class=n>drink</span><span class=p>()</span>
<span class=c1># Drink Beer</span>
<span class=c1># Drink Water</span>

<span class=n>C</span><span class=o>.</span><span class=n>mro</span><span class=p>()</span>
<span class=c1># [&lt;class &#39;__main__.C&#39;&gt;, &lt;class &#39;__main__.F&#39;&gt;, &lt;class &#39;__main__.M&#39;&gt;, &lt;class &#39;object&#39;&gt;]</span>
</code></pre></div> <p>方法2：“指名道姓”调用。如果把<code>C</code>类改写为如下，可以调用<code>M</code>类。</p> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>C</span><span class=p>(</span><span class=n>F</span><span class=p>,</span> <span class=n>M</span><span class=p>):</span>

    <span class=k>def</span> <span class=nf>drink</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=n>M</span><span class=o>.</span><span class=n>drink</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Drink Water&quot;</span><span class=p>)</span>


<span class=n>c</span> <span class=o>=</span> <span class=n>C</span><span class=p>()</span>
<span class=n>c</span><span class=o>.</span><span class=n>drink</span><span class=p>()</span>
<span class=c1># Drink Red Wine</span>
<span class=c1># Drink Water</span>
</code></pre></div> <h3 id=_1>菱形继承和继承关系检测<a class=headerlink href=#_1 title="Permanent link"> ¶</a></h3> <p>菱形继承的描述是，类<code>A</code>作为基类（这里基类是指非<code>object</code>类），类<code>B</code>和类<code>C</code>同时继承类<code>A</code>，然后类<code>D</code>又继承类<code>B</code>和类<code>C</code>，如下图，看起来像个钻石的形状。</p> <div class=highlight><pre><span></span><code><span class=go>    A</span>
<span class=go>   / \</span>
<span class=go>  B   C</span>
<span class=go>   \ /</span>
<span class=go>    D</span>
</code></pre></div> <p>在这种结构中，在调用顺序上就会出现疑惑，调用顺序究竟是以下哪一种顺序呢？</p> <ul> <li>D-&gt;B-&gt;A-&gt;C（深度优先）</li> <li>D-&gt;B-&gt;C-&gt;A（广度优先）</li> </ul> <p>看下面代码，在Python3中，**菱形**的多继承关系是按照D-&gt;B-&gt;C-&gt;A**广度优先**的搜索方式。</p> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>A</span><span class=p>():</span>
    <span class=k>pass</span>


<span class=k>class</span> <span class=nc>B</span><span class=p>(</span><span class=n>A</span><span class=p>):</span>

    <span class=k>def</span> <span class=nf>test</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;init B.test()&quot;</span><span class=p>)</span>


<span class=k>class</span> <span class=nc>C</span><span class=p>(</span><span class=n>A</span><span class=p>):</span>

    <span class=k>def</span> <span class=nf>test</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;init C.test()&quot;</span><span class=p>)</span>


<span class=k>class</span> <span class=nc>D</span><span class=p>(</span><span class=n>B</span><span class=p>,</span> <span class=n>C</span><span class=p>):</span>
    <span class=k>pass</span>


<span class=n>d</span> <span class=o>=</span> <span class=n>D</span><span class=p>()</span>
<span class=n>d</span><span class=o>.</span><span class=n>test</span><span class=p>()</span>
<span class=c1># init B.test()</span>


<span class=n>D</span><span class=o>.</span><span class=n>mro</span><span class=p>()</span>
<span class=c1># [&lt;class &#39;__main__.D&#39;&gt;, &lt;class &#39;__main__.B&#39;&gt;, &lt;class &#39;__main__.C&#39;&gt;, &lt;class &#39;__main__.A&#39;&gt;, &lt;class &#39;object&#39;&gt;]</span>
</code></pre></div> <p>对于下面这种**非菱形**的多继承关系，查找顺序是A-&gt;B-&gt;E-&gt;C-&gt;F-&gt;D**深度优先**的搜索方式。</p> <div class=highlight><pre><span></span><code><span class=n>E</span>     <span class=n>F</span>
<span class=o>|</span>     <span class=o>|</span>
<span class=n>B</span><span class=p>(</span><span class=n>E</span><span class=p>)</span> <span class=n>C</span><span class=p>(</span><span class=n>F</span><span class=p>)</span>  <span class=n>D</span>
<span class=o>|</span>     <span class=o>|</span>    <span class=o>|</span>
 \    <span class=o>|</span>   <span class=o>/</span>
  \   <span class=o>|</span>  <span class=o>/</span>
   <span class=n>A</span><span class=p>(</span><span class=n>B</span><span class=p>,</span><span class=n>C</span><span class=p>,</span><span class=n>D</span><span class=p>)</span>
</code></pre></div> <p>代码实现：</p> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>D</span><span class=p>():</span>

    <span class=k>def</span> <span class=nf>test</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;init D.test()&quot;</span><span class=p>)</span>


<span class=k>class</span> <span class=nc>F</span><span class=p>():</span>

    <span class=k>def</span> <span class=nf>test</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;init F.test()&quot;</span><span class=p>)</span>


<span class=k>class</span> <span class=nc>C</span><span class=p>(</span><span class=n>F</span><span class=p>):</span>
    <span class=k>pass</span>


<span class=k>class</span> <span class=nc>E</span><span class=p>():</span>
    <span class=k>pass</span>


<span class=k>class</span> <span class=nc>B</span><span class=p>(</span><span class=n>E</span><span class=p>):</span>
    <span class=k>pass</span>


<span class=k>class</span> <span class=nc>A</span><span class=p>(</span><span class=n>B</span><span class=p>,</span> <span class=n>C</span><span class=p>,</span> <span class=n>D</span><span class=p>):</span>
    <span class=k>pass</span>


<span class=n>a</span> <span class=o>=</span> <span class=n>A</span><span class=p>()</span>
<span class=n>a</span><span class=o>.</span><span class=n>test</span><span class=p>()</span>
<span class=c1># init F.test()</span>

<span class=n>A</span><span class=o>.</span><span class=n>mro</span><span class=p>()</span>
<span class=c1># [&lt;class &#39;__main__.A&#39;&gt;, &lt;class &#39;__main__.B&#39;&gt;, &lt;class &#39;__main__.E&#39;&gt;, &lt;class &#39;__main__.C&#39;&gt;, &lt;class &#39;__main__.F&#39;&gt;, &lt;class &#39;__main__.D&#39;&gt;, &lt;class &#39;object&#39;&gt;]</span>
</code></pre></div> <p>总结：</p> <ol> <li>继承结构要尽量简单，不要过于复杂。</li> <li>推荐使用minxins机制，在多继承背景下，满足继承的什么是什么的关系（is-a）</li> </ol> <h3 id=minxins>多继承关系的minxins机制<a class=headerlink href=#minxins title="Permanent link"> ¶</a></h3> <p>看下面例子，如果在<code>Vehicle</code>类中定义了<code>fly</code>的方法，会导致<code>Car(Vehicle)</code>的继承关系出现矛盾，汽车并不会飞，但按照上述继承关系，汽车也能飞了。 但是如果民航飞机和直升机都各自写自己的飞行fly方法，又违背了代码尽可能重用的原则。</p> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Vehicle</span><span class=p>:</span>  <span class=c1># 交通工具</span>

    <span class=k>def</span> <span class=nf>fly</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=sd>&#39;&#39;&#39;</span>
<span class=sd>        飞行功能相应的代码        </span>
<span class=sd>        &#39;&#39;&#39;</span>
        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;I am flying&quot;</span><span class=p>)</span>


<span class=c1># 民航飞机</span>
<span class=k>class</span> <span class=nc>CivilAircraft</span><span class=p>(</span><span class=n>Vehicle</span><span class=p>):</span>
    <span class=k>pass</span>


<span class=c1># 直升飞机</span>
<span class=k>class</span> <span class=nc>Helicopter</span><span class=p>(</span><span class=n>Vehicle</span><span class=p>):</span>
    <span class=k>pass</span>


<span class=c1># 汽车</span>
<span class=k>class</span> <span class=nc>Car</span><span class=p>(</span><span class=n>Vehicle</span><span class=p>):</span>
    <span class=k>pass</span>
</code></pre></div> <p>Python中没有类似Java接口interface的功能，但提供了Mixins机制。</p> <ul> <li>Python对于<code>Mixin</code>类的命名方式一般以 <code>Mixin</code>, <code>able</code>, <code>ible</code>为后缀。</li> <li><code>Mixin</code>类必须功能单一，如果有多个功能，那就写多个Mixin类。</li> <li>一个类可以继承多个<code>Mixin</code>类，为了保证遵循继承的“is-a”原则，只能继承一个标识其归属含义的父类</li> <li><code>Mixin</code>类不依赖于子类的实现。</li> <li>子类即便没有继承这个<code>Mixin</code>类类，也照样可以工作，就是缺少了某个功能。</li> </ul> <p>我们定义的<code>Mixin</code>类越多，子类的代码可读性就会越差。</p> <div class=highlight><pre><span></span><code><span class=c1># 交通工具</span>
<span class=k>class</span> <span class=nc>Vehicle</span><span class=p>:</span>
    <span class=k>pass</span>


<span class=c1># 为当前类混入一些功能，不是一个单纯的类</span>
<span class=k>class</span> <span class=nc>FlyableMixin</span><span class=p>:</span>

    <span class=k>def</span> <span class=nf>fly</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=sd>&#39;&#39;&#39;</span>
<span class=sd>        飞行功能相应的代码        </span>
<span class=sd>        &#39;&#39;&#39;</span>
        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;I am flying&quot;</span><span class=p>)</span>


<span class=c1># 民航飞机</span>
<span class=k>class</span> <span class=nc>CivilAircraft</span><span class=p>(</span><span class=n>FlyableMixin</span><span class=p>,</span> <span class=n>Vehicle</span><span class=p>):</span>
    <span class=k>pass</span>


<span class=c1># 直升飞机</span>
<span class=k>class</span> <span class=nc>Helicopter</span><span class=p>(</span><span class=n>FlyableMixin</span><span class=p>,</span> <span class=n>Vehicle</span><span class=p>):</span>
    <span class=k>pass</span>


<span class=c1># 汽车</span>
<span class=k>class</span> <span class=nc>Car</span><span class=p>(</span><span class=n>Vehicle</span><span class=p>):</span>
    <span class=k>pass</span>
</code></pre></div> <h3 id=class-combination>组合（Class Combination）<a class=headerlink href=#class-combination title="Permanent link"> ¶</a></h3> <p>在一个类中以另一个类的对象作为数据属性，称为类的**组合**。组合与继承都是用来解决代码的重用性问题。 继承体现“是”的关系，当类之间有很多相同之处，用继承。 组合体现“有”的关系，当类之间有显著不同，一个类是另一个类的属性是，用组合。</p> <p>下例是计算圆环的面积和周长，圆环是由两个圆组成的，圆环的面积是外面圆的面积减去内部圆的面积。圆环的周长是内部圆的周长加上外部圆的周长。</p> <p>这个例子演示了类<code>ring</code>里面的属性<code>circle1</code>和<code>circle2</code>正是另一个类<code>Circle</code>。</p> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>math</span> <span class=kn>import</span> <span class=n>pi</span>

<span class=k>class</span> <span class=nc>Circle</span><span class=p>():</span>

    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>r</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>r</span> <span class=o>=</span> <span class=n>r</span>

    <span class=k>def</span> <span class=nf>area</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>pi</span> <span class=o>*</span> <span class=bp>self</span><span class=o>.</span><span class=n>r</span> <span class=o>*</span> <span class=bp>self</span><span class=o>.</span><span class=n>r</span>

    <span class=k>def</span> <span class=nf>perimeter</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=mi>2</span> <span class=o>*</span> <span class=n>pi</span> <span class=o>*</span> <span class=bp>self</span><span class=o>.</span><span class=n>r</span>


<span class=k>class</span> <span class=nc>Ring</span><span class=p>():</span>

    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>r1</span><span class=p>,</span> <span class=n>r2</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>circle1</span> <span class=o>=</span> <span class=n>Circle</span><span class=p>(</span><span class=n>r1</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>circle2</span> <span class=o>=</span> <span class=n>Circle</span><span class=p>(</span><span class=n>r2</span><span class=p>)</span>

    <span class=k>def</span> <span class=nf>area</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=nb>abs</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>circle1</span><span class=o>.</span><span class=n>area</span><span class=p>()</span> <span class=o>-</span> <span class=bp>self</span><span class=o>.</span><span class=n>circle2</span><span class=o>.</span><span class=n>area</span><span class=p>())</span>

    <span class=k>def</span> <span class=nf>permiter</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>circle1</span><span class=o>.</span><span class=n>perimeter</span><span class=p>()</span> <span class=o>+</span> <span class=bp>self</span><span class=o>.</span><span class=n>circle2</span><span class=o>.</span><span class=n>perimeter</span><span class=p>()</span>


<span class=n>ring</span> <span class=o>=</span> <span class=n>Ring</span><span class=p>(</span><span class=mi>5</span><span class=p>,</span> <span class=mi>8</span><span class=p>)</span>

<span class=nb>print</span><span class=p>(</span><span class=n>ring</span><span class=o>.</span><span class=n>area</span><span class=p>())</span>
<span class=c1># 122.52211349000193</span>

<span class=nb>print</span><span class=p>(</span><span class=n>ring</span><span class=o>.</span><span class=n>permiter</span><span class=p>())</span>
<span class=c1># 81.68140899333463</span>
</code></pre></div> <p>下面的例子演示了如何通过传参的方式进行类的组合。</p> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Birthday</span><span class=p>():</span>

    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>year</span><span class=p>,</span> <span class=n>month</span><span class=p>,</span> <span class=n>day</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>year</span> <span class=o>=</span> <span class=n>year</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>month</span> <span class=o>=</span> <span class=n>month</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>day</span> <span class=o>=</span> <span class=n>day</span>


<span class=k>class</span> <span class=nc>Course</span><span class=p>():</span>

    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>course_name</span><span class=p>,</span> <span class=n>course_period</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>course_name</span> <span class=o>=</span> <span class=n>course_name</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>course_period</span> <span class=o>=</span> <span class=n>course_period</span>


<span class=k>class</span> <span class=nc>Professor</span><span class=p>():</span>

    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=n>gender</span><span class=p>,</span> <span class=n>birth</span><span class=p>,</span> <span class=n>course</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>name</span> <span class=o>=</span> <span class=n>name</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>gender</span> <span class=o>=</span> <span class=n>gender</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>birth</span> <span class=o>=</span> <span class=n>birth</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>course</span> <span class=o>=</span> <span class=n>course</span>

    <span class=k>def</span> <span class=nf>teach</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Professor name: </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s2>; Gender: </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>gender</span><span class=si>}</span><span class=s2>; Birthday: </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>birth</span><span class=o>.</span><span class=n>year</span><span class=si>}</span><span class=s2>-</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>birth</span><span class=o>.</span><span class=n>month</span><span class=si>}{</span><span class=bp>self</span><span class=o>.</span><span class=n>birth</span><span class=o>.</span><span class=n>day</span><span class=si>}</span><span class=s2>, Course name: </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>course</span><span class=o>.</span><span class=n>course_name</span><span class=si>}</span><span class=s2> and period: </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>course</span><span class=o>.</span><span class=n>course_period</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>


<span class=n>prof</span> <span class=o>=</span> <span class=n>Professor</span><span class=p>(</span><span class=s1>&#39;Tom&#39;</span><span class=p>,</span> <span class=s1>&#39;Male&#39;</span><span class=p>,</span> <span class=n>Birthday</span><span class=p>(</span><span class=mi>1985</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>5</span><span class=p>),</span> <span class=n>Course</span><span class=p>(</span><span class=s1>&#39;Chinese&#39;</span><span class=p>,</span> <span class=s1>&#39;2022/3/1 ~ 2022/6/30&#39;</span><span class=p>))</span>

<span class=n>prof</span><span class=o>.</span><span class=n>teach</span><span class=p>()</span>
<span class=c1># Professor name: Tom; Gender: Male; Birthday: 1985-55, Course name: Chinese and period: 2022/3/1 ~ 2022/6/30</span>
</code></pre></div> <h2 id=polymorphism>多态 Polymorphism<a class=headerlink href=#polymorphism title="Permanent link"> ¶</a></h2> <p>多态意味着相同的函数名用于不同的情形。 如下例，<code>len()</code>被用于不同的情形。</p> <div class=highlight><pre><span></span><code><span class=c1># len() being used for a string</span>
<span class=nb>print</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=s2>&quot;geeks&quot;</span><span class=p>))</span>
<span class=c1># 5</span>

<span class=c1># len() being used for a list</span>
<span class=nb>print</span><span class=p>(</span><span class=nb>len</span><span class=p>([</span><span class=mi>10</span><span class=p>,</span> <span class=mi>20</span><span class=p>,</span> <span class=mi>30</span><span class=p>]))</span>
<span class=c1># 3</span>
</code></pre></div> <h3 id=_2>类方法的多态性<a class=headerlink href=#_2 title="Permanent link"> ¶</a></h3> <p>下面的代码展示了 Python 如何以相同的方式使用两种不同的类类型。 我们创建了一个遍历对象元组的 <code>for</code> 循环。 然后调用方法而不用关心每个对象是哪个类类型。 我们假设这些方法实际上存在于每个类中。</p> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>India</span><span class=p>():</span>

    <span class=k>def</span> <span class=nf>capital</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;New Delhi is the capital of India.&quot;</span><span class=p>)</span>

    <span class=k>def</span> <span class=nf>language</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Hindi is the most widely spoken language of India.&quot;</span><span class=p>)</span>

    <span class=k>def</span> <span class=nf>type</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;India is a developing country.&quot;</span><span class=p>)</span>


<span class=k>class</span> <span class=nc>USA</span><span class=p>():</span>

    <span class=k>def</span> <span class=nf>capital</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Washington, D.C. is the capital of USA.&quot;</span><span class=p>)</span>

    <span class=k>def</span> <span class=nf>language</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;English is the primary language of USA.&quot;</span><span class=p>)</span>

    <span class=k>def</span> <span class=nf>type</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;USA is a developed country.&quot;</span><span class=p>)</span>


<span class=n>obj_ind</span> <span class=o>=</span> <span class=n>India</span><span class=p>()</span>
<span class=n>obj_usa</span> <span class=o>=</span> <span class=n>USA</span><span class=p>()</span>

<span class=k>for</span> <span class=n>country</span> <span class=ow>in</span> <span class=p>(</span><span class=n>obj_ind</span><span class=p>,</span> <span class=n>obj_usa</span><span class=p>):</span>
    <span class=n>country</span><span class=o>.</span><span class=n>capital</span><span class=p>()</span>
    <span class=n>country</span><span class=o>.</span><span class=n>language</span><span class=p>()</span>
    <span class=n>country</span><span class=o>.</span><span class=n>type</span><span class=p>()</span>

<span class=c1># New Delhi is the capital of India.</span>
<span class=c1># Hindi is the most widely spoken language of India.</span>
<span class=c1># India is a developing country.</span>
<span class=c1># Washington, D.C. is the capital of USA.</span>
<span class=c1># English is the primary language of USA.</span>
<span class=c1># USA is a developed country.</span>
</code></pre></div> <h3 id=_3>继承的多态性<a class=headerlink href=#_3 title="Permanent link"> ¶</a></h3> <p>在 Python 中，多态允许我们在子类中定义与父类中的方法同名的方法。 在继承中，子类继承父类的方法。 但是，可以修改从父类继承的子类中的方法。 这在从父类继承的方法不太适合子类的情况下特别有用。 在这种情况下，我们在子类中重新实现该方法。 这种在子类中重新实现方法的过程称为**方法覆盖（Method Overriding）**。</p> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Bird</span><span class=p>:</span>

    <span class=k>def</span> <span class=nf>intro</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;There are many types of birds.&quot;</span><span class=p>)</span>

    <span class=k>def</span> <span class=nf>flight</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Most of the birds can fly but some cannot.&quot;</span><span class=p>)</span>


<span class=k>class</span> <span class=nc>sparrow</span><span class=p>(</span><span class=n>Bird</span><span class=p>):</span>

    <span class=k>def</span> <span class=nf>flight</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Sparrows can fly.&quot;</span><span class=p>)</span>


<span class=k>class</span> <span class=nc>ostrich</span><span class=p>(</span><span class=n>Bird</span><span class=p>):</span>

    <span class=k>def</span> <span class=nf>flight</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Ostriches cannot fly.&quot;</span><span class=p>)</span>


<span class=n>obj_bird</span> <span class=o>=</span> <span class=n>Bird</span><span class=p>()</span>
<span class=n>obj_spr</span> <span class=o>=</span> <span class=n>sparrow</span><span class=p>()</span>
<span class=n>obj_ost</span> <span class=o>=</span> <span class=n>ostrich</span><span class=p>()</span>

<span class=n>obj_bird</span><span class=o>.</span><span class=n>intro</span><span class=p>()</span>
<span class=c1># There are many types of birds.</span>

<span class=n>obj_bird</span><span class=o>.</span><span class=n>flight</span><span class=p>()</span>
<span class=c1># Most of the birds can fly but some cannot.</span>

<span class=n>obj_spr</span><span class=o>.</span><span class=n>intro</span><span class=p>()</span>
<span class=c1># There are many types of birds.</span>

<span class=n>obj_spr</span><span class=o>.</span><span class=n>flight</span><span class=p>()</span>
<span class=c1># Sparrows can fly.</span>

<span class=n>obj_ost</span><span class=o>.</span><span class=n>intro</span><span class=p>()</span>
<span class=c1># There are many types of birds.</span>

<span class=n>obj_ost</span><span class=o>.</span><span class=n>flight</span><span class=p>()</span>
<span class=c1># Ostriches cannot fly.</span>
</code></pre></div> <h3 id=_4>函数和对象的多态性<a class=headerlink href=#_4 title="Permanent link"> ¶</a></h3> <p>我们也可以创建一个可以接受任何对象的函数，允许多态性。 在下面例子中，我们创建一个名为<code>func()</code>的函数，传入参数是<code>obj</code>的对象。 在这种情况下，我们调用三个方法，即<code>capital()</code>、<code>language()</code>和<code>type()</code>，每个方法都定义在<code>India</code>和<code>USA</code>两个类中。 我们可以使用相同的 <code>func()</code> 函数调用它们的动作：</p> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>India</span><span class=p>():</span>

    <span class=k>def</span> <span class=nf>capital</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;New Delhi is the capital of India.&quot;</span><span class=p>)</span>

    <span class=k>def</span> <span class=nf>language</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Hindi is the most widely spoken language of India.&quot;</span><span class=p>)</span>

    <span class=k>def</span> <span class=nf>type</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;India is a developing country.&quot;</span><span class=p>)</span>


<span class=k>class</span> <span class=nc>USA</span><span class=p>():</span>

    <span class=k>def</span> <span class=nf>capital</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Washington, D.C. is the capital of USA.&quot;</span><span class=p>)</span>

    <span class=k>def</span> <span class=nf>language</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;English is the primary language of USA.&quot;</span><span class=p>)</span>

    <span class=k>def</span> <span class=nf>type</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;USA is a developed country.&quot;</span><span class=p>)</span>


<span class=k>def</span> <span class=nf>func</span><span class=p>(</span><span class=n>obj</span><span class=p>):</span>
    <span class=n>obj</span><span class=o>.</span><span class=n>capital</span><span class=p>()</span>
    <span class=n>obj</span><span class=o>.</span><span class=n>language</span><span class=p>()</span>
    <span class=n>obj</span><span class=o>.</span><span class=n>type</span><span class=p>()</span>


<span class=n>obj_ind</span> <span class=o>=</span> <span class=n>India</span><span class=p>()</span>
<span class=n>obj_usa</span> <span class=o>=</span> <span class=n>USA</span><span class=p>()</span>

<span class=n>func</span><span class=p>(</span><span class=n>obj_ind</span><span class=p>)</span>
<span class=c1># New Delhi is the capital of India.</span>
<span class=c1># Hindi is the most widely spoken language of India.</span>
<span class=c1># India is a developing country.</span>

<span class=n>func</span><span class=p>(</span><span class=n>obj_usa</span><span class=p>)</span>
<span class=c1># Washington, D.C. is the capital of USA.</span>
<span class=c1># English is the primary language of USA.</span>
<span class=c1># USA is a developed country.</span>
</code></pre></div> <h3 id=ducking-typinggoose-typing>鸭子类型（Ducking Typing）和白鹅类型（Goose Typing）<a class=headerlink href=#ducking-typinggoose-typing title="Permanent link"> ¶</a></h3> <p>在Python中实现多态主要有两种机制：白鹅类型和鸭子类型。白鹅类型和鸭子类型不仅是两种机制，也是两种不同的编程风格。</p> <p>下面是一个打印商品价格的例子，分别用鸭子类型和白鹅类型实现。</p> <p>鸭子类型。</p> <p>在鸭子类型的实现中，我们只需要保证调用<code>price</code>方法的每个对象都有<code>price</code>方法即可。</p> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Food</span><span class=p>:</span>
    <span class=k>def</span> <span class=nf>price</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
       <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;</span><span class=si>{}</span><span class=s2> price:$4&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span><span class=p>))</span>

<span class=k>class</span> <span class=nc>Clothes</span><span class=p>:</span>
    <span class=k>def</span> <span class=nf>price</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
       <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;</span><span class=si>{}</span><span class=s2> price:$5&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span><span class=p>))</span>

<span class=k>class</span> <span class=nc>Coffee</span><span class=p>:</span>
    <span class=k>def</span> <span class=nf>price</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
       <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;</span><span class=si>{}</span><span class=s2> price:$6&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span><span class=p>))</span>


<span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>

    <span class=n>goods</span> <span class=o>=</span> <span class=p>[</span><span class=n>Food</span><span class=p>(),</span> <span class=n>Clothes</span><span class=p>(),</span> <span class=n>Coffee</span><span class=p>()]</span>

    <span class=k>for</span> <span class=n>good</span> <span class=ow>in</span> <span class=n>goods</span><span class=p>:</span>
       <span class=n>good</span><span class=o>.</span><span class=n>price</span><span class=p>()</span>

<span class=c1># Food price:$4</span>
<span class=c1># Clothes price:$5</span>
<span class=c1># Coffee price:$6</span>
</code></pre></div> <p>白鹅类型。</p> <p>在白鹅类型中，直接让所有对象的类继承父类<code>Good</code>中的抽象方法<code>price</code>。Python中的白鹅类型机制就是强类型语言中实现多态的标准模式，即通过调取父类的虚函数或者继承的函数来完成不同的行为。</p> <div class=highlight><pre><span></span><code><span class=kn>import</span> <span class=nn>abc</span>

<span class=k>class</span> <span class=nc>Good</span><span class=p>(</span><span class=n>abc</span><span class=o>.</span><span class=n>ABC</span><span class=p>):</span>
    <span class=nd>@abc</span><span class=o>.</span><span class=n>abstractmethod</span>
    <span class=k>def</span> <span class=nf>price</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>pass</span>

<span class=k>class</span> <span class=nc>Food</span><span class=p>(</span><span class=n>Good</span><span class=p>):</span>
    <span class=k>def</span> <span class=nf>price</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;</span><span class=si>{}</span><span class=s2> price:$4&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span><span class=p>))</span>

<span class=k>class</span> <span class=nc>Clothes</span><span class=p>(</span><span class=n>Good</span><span class=p>):</span>
    <span class=k>def</span> <span class=nf>price</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;</span><span class=si>{}</span><span class=s2> price:$5&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span><span class=p>))</span>


<span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>

    <span class=n>goods</span> <span class=o>=</span> <span class=p>[</span><span class=n>Food</span><span class=p>(),</span> <span class=n>Clothes</span><span class=p>(),</span> <span class=n>Coffee</span><span class=p>()]</span>

    <span class=k>for</span> <span class=n>good</span> <span class=ow>in</span> <span class=n>goods</span><span class=p>:</span>
        <span class=n>good</span><span class=o>.</span><span class=n>price</span><span class=p>()</span>

<span class=c1># Food price:$4</span>
<span class=c1># Clothes price:$5</span>
<span class=c1># Coffee price:$6</span>
</code></pre></div> <h3 id=class-methodstatic-method>类方法（Class method）和静态方法（Static Method）<a class=headerlink href=#class-methodstatic-method title="Permanent link"> ¶</a></h3> <p>类方法（Class method）也叫绑定方法，必须把类作为传入参数，使用<code>cls</code>作为第一个传入参数，而静态方法（Static Method），也叫非绑定方法，不需要特定的参数。</p> <p>类方法是绑定到类的，不是绑定到类对象，所以类方法可以访问或修改类，并对所有类实例生效。</p> <p>静态方法无法直接访问或修改类，因为静态方法是不知道类本身的，静态方法是属于工具类方法，基于传入的参数完成特定的功能，其实就是一个普通函数而已。</p> <p>Python中使用<code>@classmethod</code>装饰器（decorator）来创建一个类方法，用@staticmethod装饰器来创建一个静态方法。</p> <p>语法格式：</p> <div class=highlight><pre><span></span><code><span class=nd>@classmethod</span>
<span class=k>def</span> <span class=nf>fun</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>arg1</span><span class=p>,</span> <span class=n>arg2</span><span class=p>,</span> <span class=o>...</span><span class=p>):</span>
</code></pre></div> <p>其中：</p> <div class=highlight><pre><span></span><code><span class=n>fun</span><span class=p>:</span> <span class=n>需要转换成类方法的函数</span>
<span class=n>returns</span><span class=p>:</span> <span class=n>函数的类方法</span>
</code></pre></div> <p><code>classmethod()</code>方法绑定到类而不是对象。类方法可以被类和对象调用。这些方法可以通过类或对象进行调用。</p> <p>例1：创建一个简单的<code>classmethod</code>。 创建一个类<code>Training</code>，有类变量<code>course</code>和方法<code>purchase</code>。 我们通过把函数<code>Training.purchase</code>传给<code>classmethod()</code>，把该方法转成类方法，然后直接调用它，而无需先创建对象。 可以看出转换前后<code>Training.purchase</code>的类型变化。</p> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Training</span><span class=p>:</span>
 <span class=n>course</span> <span class=o>=</span> <span class=s1>&#39;Python for Data Analysis&#39;</span>

 <span class=k>def</span> <span class=nf>purchase</span><span class=p>(</span><span class=n>obj</span><span class=p>):</span>
  <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Puchase course : &quot;</span><span class=p>,</span> <span class=n>obj</span><span class=o>.</span><span class=n>course</span><span class=p>)</span>


<span class=nb>type</span><span class=p>(</span><span class=n>Training</span><span class=o>.</span><span class=n>purchase</span><span class=p>)</span>
<span class=c1># &lt;class &#39;function&#39;&gt;</span>

<span class=n>Training</span><span class=o>.</span><span class=n>purchase</span> <span class=o>=</span> <span class=nb>classmethod</span><span class=p>(</span><span class=n>Training</span><span class=o>.</span><span class=n>purchase</span><span class=p>)</span>

<span class=n>Training</span><span class=o>.</span><span class=n>purchase</span><span class=p>()</span>
<span class=c1># Puchase course :  Python for Data Analysis</span>

<span class=nb>type</span><span class=p>(</span><span class=n>Training</span><span class=o>.</span><span class=n>purchase</span><span class=p>)</span>
<span class=c1># &lt;class &#39;method&#39;&gt;</span>
</code></pre></div> <p>例2：使用装饰器<code>@classmethod</code>创建工厂类。</p> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Training</span><span class=p>:</span>
    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>course</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>course</span> <span class=o>=</span> <span class=n>course</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span> <span class=nf>purchase</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>course</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>cls</span><span class=p>(</span><span class=n>course</span><span class=p>)</span>

    <span class=k>def</span> <span class=nf>display</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;Purchase course: &#39;</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>course</span><span class=p>)</span>


<span class=n>training</span> <span class=o>=</span> <span class=n>Training</span><span class=p>(</span><span class=s2>&quot;Python for Data Analysis&quot;</span><span class=p>)</span>
<span class=n>training</span><span class=o>.</span><span class=n>display</span><span class=p>()</span>
<span class=c1># Purchase course:  Python for Data Analysis</span>
</code></pre></div> <p>例3：通过<code>staticmethod()</code>和<code>classmethod()</code>来检查一个person是否是adult。 person1是通过姓名和年龄创建的实例。person2是通过姓名和年份创建的实例。</p> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>datetime</span> <span class=kn>import</span> <span class=n>date</span>


<span class=k>class</span> <span class=nc>Person</span><span class=p>:</span>

    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=n>age</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>name</span> <span class=o>=</span> <span class=n>name</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>age</span> <span class=o>=</span> <span class=n>age</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span> <span class=nf>fromBirthYear</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=n>year</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>cls</span><span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>date</span><span class=o>.</span><span class=n>today</span><span class=p>()</span><span class=o>.</span><span class=n>year</span> <span class=o>-</span> <span class=n>year</span><span class=p>)</span>

    <span class=nd>@staticmethod</span>
    <span class=k>def</span> <span class=nf>isAdult</span><span class=p>(</span><span class=n>age</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>age</span> <span class=o>&gt;</span> <span class=mi>18</span>


<span class=n>person1</span> <span class=o>=</span> <span class=n>Person</span><span class=p>(</span><span class=s1>&#39;mayank&#39;</span><span class=p>,</span> <span class=mi>21</span><span class=p>)</span>
<span class=n>person2</span> <span class=o>=</span> <span class=n>Person</span><span class=o>.</span><span class=n>fromBirthYear</span><span class=p>(</span><span class=s1>&#39;mayank&#39;</span><span class=p>,</span> <span class=mi>1996</span><span class=p>)</span>

<span class=nb>print</span><span class=p>(</span><span class=n>person1</span><span class=o>.</span><span class=n>age</span><span class=p>)</span>
<span class=c1># 21</span>
<span class=nb>print</span><span class=p>(</span><span class=n>person2</span><span class=o>.</span><span class=n>age</span><span class=p>)</span>
<span class=c1># 26</span>
<span class=nb>print</span><span class=p>(</span><span class=n>Person</span><span class=o>.</span><span class=n>isAdult</span><span class=p>(</span><span class=mi>22</span><span class=p>))</span>
<span class=c1># True</span>
</code></pre></div> <p>小结： 若类中需要一个功能，该功能的实现代码中需要引用对象，则将其定义成对象方法；需要引用类，则将其定义成类方法；无需引用类或对象，则将其定义成静态方法。</p> <h3 id=monkey-patch>猴子补丁（monkey patch）<a class=headerlink href=#monkey-patch title="Permanent link"> ¶</a></h3> <p>猴子补丁是动态为已经创建出的对象增加新的方法和属性成员的一种机制，也就是动态打补丁。</p> <p>实例化对象的猴子补丁。</p> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Test</span><span class=p>:</span>
    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
       <span class=bp>self</span><span class=o>.</span><span class=n>a</span> <span class=o>=</span> <span class=mi>1</span>

    <span class=k>def</span> <span class=nf>func1</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>):</span>
       <span class=nb>print</span><span class=p>(</span><span class=n>x</span> <span class=o>+</span> <span class=n>y</span><span class=p>)</span>


<span class=c1># 正常实例化</span>
<span class=n>test</span> <span class=o>=</span> <span class=n>Test</span><span class=p>()</span>
<span class=n>test</span><span class=o>.</span><span class=n>func1</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
<span class=c1># 2</span>

<span class=c1># 修改实例</span>
<span class=n>test</span><span class=o>.</span><span class=n>func1</span> <span class=o>=</span> <span class=k>lambda</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span> <span class=p>:</span> <span class=nb>print</span><span class=p>(</span><span class=n>x</span> <span class=o>+</span> <span class=mi>2</span> <span class=o>*</span> <span class=n>y</span><span class=p>)</span>
<span class=n>test</span><span class=o>.</span><span class=n>func1</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
<span class=c1># 3</span>

<span class=c1># 通过修改实例，访问内部成员变量。</span>
<span class=n>test</span><span class=o>.</span><span class=n>func1</span> <span class=o>=</span> <span class=k>lambda</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span> <span class=p>:</span> <span class=nb>print</span><span class=p>(</span><span class=n>x</span> <span class=o>+</span> <span class=mi>2</span> <span class=o>*</span> <span class=n>y</span> <span class=o>+</span> <span class=bp>self</span><span class=o>.</span><span class=n>a</span><span class=p>)</span>
<span class=n>test</span><span class=o>.</span><span class=n>func1</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
<span class=c1># NameError: name &#39;self&#39; is not defined</span>
<span class=n>test</span><span class=o>.</span><span class=n>func1</span> <span class=o>=</span> <span class=k>lambda</span> <span class=bp>self</span><span class=p>,</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span> <span class=p>:</span> <span class=nb>print</span><span class=p>(</span><span class=n>x</span> <span class=o>+</span> <span class=mi>2</span> <span class=o>*</span> <span class=n>y</span> <span class=o>+</span> <span class=bp>self</span><span class=o>.</span><span class=n>a</span><span class=p>)</span>
<span class=n>test</span><span class=o>.</span><span class=n>func1</span><span class=p>(</span><span class=n>test</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
<span class=c1># 4</span>
</code></pre></div> <p>类对象的猴子补丁。</p> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Test</span><span class=p>:</span>
    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
       <span class=bp>self</span><span class=o>.</span><span class=n>a</span> <span class=o>=</span> <span class=mi>1</span>

    <span class=k>def</span> <span class=nf>func1</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>):</span>
       <span class=nb>print</span><span class=p>(</span><span class=n>x</span> <span class=o>+</span> <span class=n>y</span><span class=p>)</span>


<span class=c1># 修改类成员，实例化后的结果已修改。</span>
<span class=n>Test</span><span class=o>.</span><span class=n>func1</span> <span class=o>=</span> <span class=k>lambda</span> <span class=bp>self</span><span class=p>,</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span> <span class=p>:</span> <span class=nb>print</span><span class=p>(</span><span class=n>x</span> <span class=o>+</span> <span class=mi>2</span> <span class=o>*</span> <span class=n>y</span><span class=p>)</span>

<span class=n>test</span> <span class=o>=</span> <span class=n>Test</span><span class=p>()</span>
<span class=n>test</span><span class=o>.</span><span class=n>func1</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
<span class=c1># 3</span>


<span class=c1># 修改类成员，并访问成员变量，实例化后的结果已修改。</span>
<span class=n>Test</span><span class=o>.</span><span class=n>func1</span> <span class=o>=</span> <span class=k>lambda</span> <span class=bp>self</span><span class=p>,</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span> <span class=p>:</span> <span class=nb>print</span><span class=p>(</span><span class=n>x</span> <span class=o>+</span> <span class=mi>2</span> <span class=o>*</span> <span class=n>y</span> <span class=o>+</span> <span class=bp>self</span><span class=o>.</span><span class=n>a</span><span class=p>)</span>

<span class=n>test</span> <span class=o>=</span> <span class=n>Test</span><span class=p>()</span>
<span class=n>test</span><span class=o>.</span><span class=n>func1</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
<span class=c1># 4</span>

<span class=c1># 增加类成员。</span>
<span class=n>Test</span><span class=o>.</span><span class=n>func2</span> <span class=o>=</span> <span class=k>lambda</span> <span class=bp>self</span><span class=p>,</span> <span class=n>p</span><span class=p>,</span> <span class=n>q</span><span class=p>:</span> <span class=nb>print</span><span class=p>(</span><span class=n>p</span> <span class=o>+</span> <span class=mi>3</span> <span class=o>*</span> <span class=n>q</span> <span class=o>+</span> <span class=bp>self</span><span class=o>.</span><span class=n>a</span><span class=p>)</span>
<span class=n>test</span> <span class=o>=</span> <span class=n>Test</span><span class=p>()</span>
<span class=n>test</span><span class=o>.</span><span class=n>func1</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
<span class=c1># 4</span>
<span class=n>test</span><span class=o>.</span><span class=n>func2</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>)</span>
<span class=c1># 11</span>
</code></pre></div> <h2 id=private-variables>私有变量 Private Variables<a class=headerlink href=#private-variables title="Permanent link"> ¶</a></h2> <p>那种仅限从一个对象内部访问的“私有”实例变量（“Private” instance variables）在 Python 中并不存在。 但是，大多数 Python 代码都遵循这样一个约定：带有*一个前缀下划线*的名称 (例如<code>_spam</code>) 应该被当作是 API 的非公有（non-public）部分 (无论它是函数、方法或是数据成员)。 这应当被视为一个实现细节，可能不经通知即加以改变。</p> <p>由于存在对于类私有成员（class-private members）的有效使用场景（例如避免名称与子类所定义的名称相冲突），因此存在对此种机制的有限支持，称为**名称改写（name mangling）**。 任何形式为<code>__spam</code>的标识符（至少带有*两个前缀下划线*，至多一个后缀下划线）的文本将被替换为 <code>_classname__spam</code>，其中 <code>classname</code> 为去除了前缀下划线的当前类名称。 这种改写不考虑标识符的句法位置，只要它出现在类定义内部就会进行。</p> <p>名称改写（Name mangling）有助于让子类重载方法（）override methods而不破坏类内方法（intraclass method）调用。例如:</p> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Mapping</span><span class=p>:</span>

    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>iterable</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>items_list</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>__update</span><span class=p>(</span><span class=n>iterable</span><span class=p>)</span>

    <span class=k>def</span> <span class=nf>update</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>iterable</span><span class=p>):</span>
        <span class=k>for</span> <span class=n>item</span> <span class=ow>in</span> <span class=n>iterable</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>items_list</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>item</span><span class=p>)</span>

    <span class=n>__update</span> <span class=o>=</span> <span class=n>update</span>  <span class=c1># private copy of original update() method</span>


<span class=k>class</span> <span class=nc>MappingSubclass</span><span class=p>(</span><span class=n>Mapping</span><span class=p>):</span>

    <span class=k>def</span> <span class=nf>update</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>keys</span><span class=p>,</span> <span class=n>values</span><span class=p>):</span>
        <span class=c1># provides new signature for update()</span>
        <span class=c1># but does not break __init__()</span>
        <span class=k>for</span> <span class=n>item</span> <span class=ow>in</span> <span class=nb>zip</span><span class=p>(</span><span class=n>keys</span><span class=p>,</span> <span class=n>values</span><span class=p>):</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>items_list</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>item</span><span class=p>)</span>
</code></pre></div> <p>上面的示例即使在 <code>MappingSubclass</code> 引入了一个 <code>__update</code> 标识符的情况下也不会出错，因为它会在 Mapping 类中被替换为 <code>_Mapping__update</code> 而在 <code>MappingSubclass</code> 类中被替换为 <code>_MappingSubclass__update</code>。</p> <p>请注意，改写规则（mangling rules）的设计主要是为了避免意外冲突；访问或修改私有变量仍然是可能的。这在特殊情况下甚至会很有用，例如在调试器（debugger）中。</p> <p>请注意传递给 <code>exec()</code> 或 <code>eval()</code> 的代码不会把发起调用类的类名视作当前类；这类似于 <code>global</code> 语句的效果，因此这种效果仅限于同时经过字节码编译的代码。 同样的限制也适用于 <code>getattr()</code>, <code>setattr()</code> 和 <code>delattr()</code>，以及对于 <code>__dict__</code> 的直接引用。</p> <h2 id=reflection>反射(reflection)<a class=headerlink href=#reflection title="Permanent link"> ¶</a></h2> <p>反射(reflection)是动态语言的一个特性。**反射机制**指的是在程序的运行状态中，对于任意一个类，都可以知道这个类的所有属性和方法；对于任意一个对象，都能够调用他的任意方法和属性。这种动态获取程序信息以及动态调用对象的功能称为反射机制。</p> <p>通过下面例子可知，通过<code>dir(person)</code>获取任意一个类或者对象的属性列表。通过内置函数<code>hasattr</code>、<code>getattr</code>、<code>setattr</code>、<code>delattr</code>操作类和对象。</p> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Person</span><span class=p>:</span>

    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=n>age</span><span class=p>,</span> <span class=n>gender</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>name</span> <span class=o>=</span> <span class=n>name</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>age</span> <span class=o>=</span> <span class=n>age</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>gender</span> <span class=o>=</span> <span class=n>gender</span>


<span class=n>person</span> <span class=o>=</span> <span class=n>Person</span><span class=p>(</span><span class=s1>&#39;Tom&#39;</span><span class=p>,</span> <span class=mi>21</span><span class=p>,</span> <span class=s1>&#39;Male&#39;</span><span class=p>)</span>

<span class=nb>print</span><span class=p>(</span><span class=nb>dir</span><span class=p>(</span><span class=n>person</span><span class=p>))</span>
<span class=c1># [&#39;__class__&#39;, &#39;__delattr__&#39;, &#39;__dict__&#39;, &#39;__dir__&#39;, &#39;__doc__&#39;, &#39;__eq__&#39;, &#39;__format__&#39;, &#39;__ge__&#39;, &#39;__getattribute__&#39;, &#39;__gt__&#39;, &#39;__hash__&#39;, &#39;__init__&#39;, &#39;__init_subclass__&#39;, &#39;__le__&#39;, &#39;__lt__&#39;, &#39;__module__&#39;, &#39;__ne__&#39;, &#39;__new__&#39;, &#39;__reduce__&#39;, &#39;__reduce_ex__&#39;, &#39;__repr__&#39;, &#39;__setattr__&#39;, &#39;__sizeof__&#39;, &#39;__str__&#39;, &#39;__subclasshook__&#39;, &#39;__weakref__&#39;, &#39;age&#39;, &#39;gender&#39;, &#39;name&#39;]</span>

<span class=c1># hasattr(object,&#39;name&#39;)</span>
<span class=c1># 按字符串&#39;name&#39;判断有无属性person.name</span>
<span class=nb>hasattr</span><span class=p>(</span><span class=n>person</span><span class=p>,</span> <span class=s1>&#39;name&#39;</span><span class=p>)</span>
<span class=c1># True</span>

<span class=c1># getattr(object, &#39;name&#39;, default=None)</span>
<span class=c1># 等同于person.name,不存在该属性则返回默认值None</span>
<span class=nb>getattr</span><span class=p>(</span><span class=n>person</span><span class=p>,</span> <span class=s1>&#39;name&#39;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
<span class=c1># &#39;Tom&#39;</span>

<span class=c1># setattr(x, &#39;y&#39;, v)</span>
<span class=c1># 等同于person.age = 18</span>
<span class=nb>setattr</span><span class=p>(</span><span class=n>person</span><span class=p>,</span> <span class=s1>&#39;age&#39;</span><span class=p>,</span> <span class=mi>18</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=n>person</span><span class=o>.</span><span class=n>age</span><span class=p>)</span>
<span class=c1># 18</span>

<span class=c1># delattr(x, &#39;y&#39;)</span>
<span class=c1># 等同于del person.age</span>
<span class=nb>delattr</span><span class=p>(</span><span class=n>person</span><span class=p>,</span> <span class=s1>&#39;age&#39;</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=n>person</span><span class=o>.</span><span class=n>age</span><span class=p>)</span>
<span class=c1># AttributeError: &#39;Person&#39; object has no attribute &#39;age&#39;</span>
</code></pre></div> <p>下面是一个实际应用的例子。</p> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>FtpServer</span><span class=p>():</span>

    <span class=k>def</span> <span class=nf>server_run</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
            <span class=n>inp</span> <span class=o>=</span> <span class=nb>input</span><span class=p>(</span><span class=s1>&#39;Input your command &gt;&gt;:&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span>
            <span class=n>cmd</span><span class=p>,</span> <span class=n>file</span> <span class=o>=</span> <span class=n>inp</span><span class=o>.</span><span class=n>split</span><span class=p>()</span>

            <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>cmd</span><span class=p>):</span>
                <span class=n>func</span> <span class=o>=</span> <span class=nb>getattr</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>cmd</span><span class=p>)</span>
                <span class=n>func</span><span class=p>(</span><span class=n>file</span><span class=p>)</span>

    <span class=k>def</span> <span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>file</span><span class=p>):</span>
        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;Downloading </span><span class=si>{</span><span class=n>file</span><span class=si>}</span><span class=s1>...&#39;</span><span class=p>)</span>

    <span class=k>def</span> <span class=nf>put</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>file</span><span class=p>):</span>
        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;Uploading  </span><span class=si>{</span><span class=n>file</span><span class=si>}</span><span class=s1>...&#39;</span><span class=p>)</span>


<span class=n>ftp_server</span> <span class=o>=</span> <span class=n>FtpServer</span><span class=p>()</span>

<span class=n>ftp_server</span><span class=o>.</span><span class=n>server_run</span><span class=p>()</span>
<span class=c1># Input your command &gt;&gt;:get a.ext</span>
<span class=c1># Downloading a.ext...</span>
<span class=c1># Input your command &gt;&gt;:put a.txt</span>
<span class=c1># Uploading  a.txt...</span>
</code></pre></div> <h2 id=iterators>迭代器 Iterators<a class=headerlink href=#iterators title="Permanent link"> ¶</a></h2> <p>在Python中，大多数容器对象（container object）都可以使用 for 语句:</p> <div class=highlight><pre><span></span><code><span class=k>for</span> <span class=n>element</span> <span class=ow>in</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>]:</span>
    <span class=nb>print</span><span class=p>(</span><span class=n>element</span><span class=p>)</span>
<span class=k>for</span> <span class=n>element</span> <span class=ow>in</span> <span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>):</span>
    <span class=nb>print</span><span class=p>(</span><span class=n>element</span><span class=p>)</span>
<span class=k>for</span> <span class=n>key</span> <span class=ow>in</span> <span class=p>{</span><span class=s1>&#39;one&#39;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span> <span class=s1>&#39;two&#39;</span><span class=p>:</span> <span class=mi>2</span><span class=p>}:</span>
    <span class=nb>print</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
<span class=k>for</span> <span class=n>char</span> <span class=ow>in</span> <span class=s2>&quot;123&quot;</span><span class=p>:</span>
    <span class=nb>print</span><span class=p>(</span><span class=n>char</span><span class=p>)</span>
<span class=k>for</span> <span class=n>line</span> <span class=ow>in</span> <span class=nb>open</span><span class=p>(</span><span class=s2>&quot;myfile.txt&quot;</span><span class=p>):</span>
    <span class=nb>print</span><span class=p>(</span><span class=n>line</span><span class=p>,</span> <span class=n>end</span><span class=o>=</span><span class=s1>&#39;&#39;</span><span class=p>)</span>
</code></pre></div> <p><code>for</code> 语句会在容器对象上调用 iter()。 该函数返回一个定义了 <code>__next__()</code> 方法的迭代器对象，此方法将逐一访问容器中的元素。 当元素用尽时，<code>__next__()</code> 将引发 <code>StopIteration</code> 异常来通知终止 <code>for</code> 循环。 可以使用 <code>next()</code> 内置函数来调用 <code>__next__()</code> 方法；下面这个例子展示了刚刚描述的具体运行方式:</p> <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=n>s</span> <span class=o>=</span> <span class=s1>&#39;abc&#39;</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>it</span> <span class=o>=</span> <span class=nb>iter</span><span class=p>(</span><span class=n>s</span><span class=p>)</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>it</span>
<span class=o>&lt;</span><span class=n>str_iterator</span> <span class=nb>object</span> <span class=n>at</span> <span class=mh>0x10c90e650</span><span class=o>&gt;</span>
<span class=o>&gt;&gt;&gt;</span> <span class=nb>next</span><span class=p>(</span><span class=n>it</span><span class=p>)</span>
<span class=s1>&#39;a&#39;</span>
<span class=o>&gt;&gt;&gt;</span> <span class=nb>next</span><span class=p>(</span><span class=n>it</span><span class=p>)</span>
<span class=s1>&#39;b&#39;</span>
<span class=o>&gt;&gt;&gt;</span> <span class=nb>next</span><span class=p>(</span><span class=n>it</span><span class=p>)</span>
<span class=s1>&#39;c&#39;</span>
<span class=o>&gt;&gt;&gt;</span> <span class=nb>next</span><span class=p>(</span><span class=n>it</span><span class=p>)</span>
<span class=n>Traceback</span> <span class=p>(</span><span class=n>most</span> <span class=n>recent</span> <span class=n>call</span> <span class=n>last</span><span class=p>):</span>
  <span class=n>File</span> <span class=s2>&quot;&lt;stdin&gt;&quot;</span><span class=p>,</span> <span class=n>line</span> <span class=mi>1</span><span class=p>,</span> <span class=ow>in</span> <span class=o>&lt;</span><span class=n>module</span><span class=o>&gt;</span>
    <span class=nb>next</span><span class=p>(</span><span class=n>it</span><span class=p>)</span>
<span class=ne>StopIteration</span>
</code></pre></div> <p>在了解了迭代器协议（iterator protocol）的机制后，给类添加迭代器就很容易了。 定义一个 <code>__iter__()</code> 方法来返回一个带有 <code>__next__()</code> 方法的对象。 如果类已定义了 <code>__next__()</code>，则 <code>__iter__()</code> 可以简单地返回 <code>self</code>:</p> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Reverse</span><span class=p>:</span>
    <span class=sd>&quot;&quot;&quot;Iterator for looping over a sequence backwards.&quot;&quot;&quot;</span>

    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>data</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>data</span> <span class=o>=</span> <span class=n>data</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>index</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>

    <span class=k>def</span> <span class=fm>__iter__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span>

    <span class=k>def</span> <span class=fm>__next__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>index</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>StopIteration</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>index</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>index</span> <span class=o>-</span> <span class=mi>1</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=bp>self</span><span class=o>.</span><span class=n>index</span><span class=p>]</span>


<span class=n>rev</span> <span class=o>=</span> <span class=n>Reverse</span><span class=p>(</span><span class=s1>&#39;spam&#39;</span><span class=p>)</span>

<span class=nb>print</span><span class=p>(</span><span class=nb>iter</span><span class=p>(</span><span class=n>rev</span><span class=p>))</span>

<span class=k>for</span> <span class=n>char</span> <span class=ow>in</span> <span class=n>rev</span><span class=p>:</span>
    <span class=nb>print</span><span class=p>(</span><span class=n>char</span><span class=p>)</span>

<span class=c1># m</span>
<span class=c1># a</span>
<span class=c1># p</span>
<span class=c1># s</span>
</code></pre></div> <h2 id=generators>生成器 Generators<a class=headerlink href=#generators title="Permanent link"> ¶</a></h2> <p>**生成器（Generators）**是一个用于创建迭代器的简单而强大的工具。 它们的写法类似于标准的函数，但当它们要返回数据时会使用 <code>yield</code> 语句。 每次在生成器上调用 <code>next()</code> 时，它会从上次离开的位置恢复执行（它会记住上次执行语句时的所有数据值）。</p> <p>一个创建生成器的示例如下（改写上面迭代器中所举的例子）:</p> <div class=highlight><pre><span></span><code><span class=k>def</span> <span class=nf>reverse</span><span class=p>(</span><span class=n>data</span><span class=p>):</span>
    <span class=k>for</span> <span class=n>index</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>data</span><span class=p>)</span> <span class=o>-</span> <span class=mi>1</span><span class=p>,</span> <span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=o>-</span><span class=mi>1</span><span class=p>):</span>
        <span class=k>yield</span> <span class=n>data</span><span class=p>[</span><span class=n>index</span><span class=p>]</span>


<span class=k>for</span> <span class=n>char</span> <span class=ow>in</span> <span class=n>reverse</span><span class=p>(</span><span class=s1>&#39;golf&#39;</span><span class=p>):</span>
    <span class=nb>print</span><span class=p>(</span><span class=n>char</span><span class=p>)</span>

<span class=c1># f</span>
<span class=c1># l</span>
<span class=c1># o</span>
<span class=c1># g</span>
</code></pre></div> <p>可以用生成器来完成的操作同样可以用前面所描述的基于类的迭代器来完成。但生成器的写法更为紧凑，因为它会自动创建 <code>__iter__()</code> 和 <code>__next__()</code> 方法。</p> <p>另一个关键特性在于局部变量和执行状态会在每次调用之间自动保存。 这使得该函数相比使用 <code>self.index</code> 和 <code>self.data</code> 这种实例变量的方式更易编写且更为清晰。</p> <p>除了会自动创建方法和保存程序状态，当生成器终结时，它们还会自动引发 <code>StopIteration</code>。</p> <h2 id=generator-expressions>生成器表达式 Generator Expressions<a class=headerlink href=#generator-expressions title="Permanent link"> ¶</a></h2> <p>某些简单的生成器可以写成简洁的表达式代码，所用语法类似列表推导式，但外层为圆括号而非方括号。 这种表达式被设计用于生成器将立即被外层函数所使用的情况。 生成器表达式相比完整的生成器更紧凑但较不灵活，相比等效的列表推导式则更为节省内存。</p> <p>示例:</p> <div class=highlight><pre><span></span><code><span class=o>&gt;&gt;&gt;</span> <span class=nb>sum</span><span class=p>(</span><span class=n>i</span> <span class=o>*</span> <span class=n>i</span> <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>10</span><span class=p>))</span>  <span class=c1># sum of squares</span>
<span class=mi>285</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>xvec</span> <span class=o>=</span> <span class=p>[</span><span class=mi>10</span><span class=p>,</span> <span class=mi>20</span><span class=p>,</span> <span class=mi>30</span><span class=p>]</span>
<span class=o>&gt;&gt;&gt;</span> <span class=n>yvec</span> <span class=o>=</span> <span class=p>[</span><span class=mi>7</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>3</span><span class=p>]</span>
<span class=o>&gt;&gt;&gt;</span> <span class=nb>sum</span><span class=p>(</span><span class=n>x</span> <span class=o>*</span> <span class=n>y</span> <span class=k>for</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span> <span class=ow>in</span> <span class=nb>zip</span><span class=p>(</span><span class=n>xvec</span><span class=p>,</span> <span class=n>yvec</span><span class=p>))</span>  <span class=c1># dot product</span>
<span class=mi>260</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>unique_words</span> <span class=o>=</span> <span class=nb>set</span><span class=p>(</span><span class=n>word</span> <span class=k>for</span> <span class=n>line</span> <span class=ow>in</span> <span class=n>page</span>  <span class=k>for</span> <span class=n>word</span> <span class=ow>in</span> <span class=n>line</span><span class=o>.</span><span class=n>split</span><span class=p>())</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>valedictorian</span> <span class=o>=</span> <span class=nb>max</span><span class=p>((</span><span class=n>student</span><span class=o>.</span><span class=n>gpa</span><span class=p>,</span> <span class=n>student</span><span class=o>.</span><span class=n>name</span><span class=p>)</span> <span class=k>for</span> <span class=n>student</span> <span class=ow>in</span> <span class=n>graduates</span><span class=p>)</span>

<span class=o>&gt;&gt;&gt;</span> <span class=n>data</span> <span class=o>=</span> <span class=s1>&#39;golf&#39;</span>
<span class=o>&gt;&gt;&gt;</span> <span class=nb>list</span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>data</span><span class=p>)</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=o>-</span><span class=mi>1</span><span class=p>))</span>
<span class=p>[</span><span class=s1>&#39;f&#39;</span><span class=p>,</span> <span class=s1>&#39;l&#39;</span><span class=p>,</span> <span class=s1>&#39;o&#39;</span><span class=p>,</span> <span class=s1>&#39;g&#39;</span><span class=p>]</span>
</code></pre></div> <h2 id=metaclass>元类（metaclass）<a class=headerlink href=#metaclass title="Permanent link"> ¶</a></h2> <p>所有的对象都是实例化或者说调用类而得到的（调用类的过程称为类的实例化。</p> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>StandfordProfessor</span><span class=p>(</span><span class=nb>object</span><span class=p>):</span>
    <span class=n>university</span> <span class=o>=</span> <span class=s1>&#39;Standford&#39;</span>

    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=n>gender</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>name</span> <span class=o>=</span> <span class=n>name</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>gender</span> <span class=o>=</span> <span class=n>gender</span>

    <span class=k>def</span> <span class=nf>display</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;Professor </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s1> says welcome to </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>university</span><span class=si>}</span><span class=s1>!&#39;</span><span class=p>)</span>

<span class=n>professor</span> <span class=o>=</span> <span class=n>StandfordProfessor</span><span class=p>(</span><span class=s1>&#39;Tom&#39;</span><span class=p>,</span> <span class=s1>&#39;Male&#39;</span><span class=p>)</span>
</code></pre></div> <p>上例中，对象<code>professor</code>是调用类<code>StandfordProfessor</code>得到的。类<code>StandfordProfessor</code>本质也是一个对象， 下面可以验证，<code>StandfordProfessor</code>是调用了内置的类<code>type</code>得到的。这个<code>type</code>称为元类。</p> <div class=highlight><pre><span></span><code><span class=nb>print</span><span class=p>(</span><span class=nb>type</span><span class=p>(</span><span class=n>StandfordProfessor</span><span class=p>))</span>
<span class=c1># &lt;class &#39;type&#39;&gt;</span>
</code></pre></div> <p>如果一个类没有声明自己的元类，默认它的元类就是<code>type</code>，除了使用内置元类<code>type</code>，我们也可以通过继承<code>type</code>来自定义元类，然后使用<code>metaclass</code>关键字参数为一个类的指定元类。</p> <p>只有继承了type类才能称之为一个元类，否则就是一个普通的自定义类。</p> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Mymeta</span><span class=p>(</span><span class=nb>type</span><span class=p>):</span>
    <span class=k>pass</span>


<span class=k>class</span> <span class=nc>StandfordProfessor</span><span class=p>(</span><span class=nb>object</span><span class=p>,</span> <span class=n>metaclass</span><span class=o>=</span><span class=n>Mymeta</span><span class=p>):</span>
    <span class=n>university</span> <span class=o>=</span> <span class=s1>&#39;Standford&#39;</span>

    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=n>gender</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>name</span> <span class=o>=</span> <span class=n>name</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>gender</span> <span class=o>=</span> <span class=n>gender</span>

    <span class=k>def</span> <span class=nf>display</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;Professor </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s1> says welcome to </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>university</span><span class=si>}</span><span class=s1>!&#39;</span><span class=p>)</span>


<span class=n>professor</span> <span class=o>=</span> <span class=n>StandfordProfessor</span><span class=p>(</span><span class=s1>&#39;Tom&#39;</span><span class=p>,</span> <span class=s1>&#39;Male&#39;</span><span class=p>)</span>
</code></pre></div> <p>下面进行自定义元类，控制类<code>StandfordProfessor</code>的调用。</p> <p>要想让<code>professor</code>这个对象变成一个可调用的对象，需要在该对象的类中定义一个方法<code>__call__</code>，该方法会在调用对象时自动触发。调用<code>professor</code>的返回值就是<code>__call__</code>方法的返回值。</p> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Mymeta</span><span class=p>(</span><span class=nb>type</span><span class=p>):</span>

    <span class=k>def</span> <span class=fm>__call__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
        <span class=nb>print</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>  <span class=c1># 类名</span>
        <span class=nb>print</span><span class=p>(</span><span class=n>args</span><span class=p>)</span>  <span class=c1># 输入参数</span>
        <span class=nb>print</span><span class=p>(</span><span class=n>kwargs</span><span class=p>)</span>  <span class=c1># 输入参数</span>
        <span class=k>return</span> <span class=mi>10086</span>


<span class=k>class</span> <span class=nc>StandfordProfessor</span><span class=p>(</span><span class=nb>object</span><span class=p>,</span> <span class=n>metaclass</span><span class=o>=</span><span class=n>Mymeta</span><span class=p>):</span>
    <span class=n>university</span> <span class=o>=</span> <span class=s1>&#39;Standford&#39;</span>

    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=n>gender</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>name</span> <span class=o>=</span> <span class=n>name</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>gender</span> <span class=o>=</span> <span class=n>gender</span>

    <span class=k>def</span> <span class=nf>display</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;Professor </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s1> says welcome to </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>university</span><span class=si>}</span><span class=s1>!&#39;</span><span class=p>)</span>


<span class=n>professor</span> <span class=o>=</span> <span class=n>StandfordProfessor</span><span class=p>(</span><span class=s1>&#39;Tom&#39;</span><span class=p>,</span> <span class=s1>&#39;Male&#39;</span><span class=p>)</span>
<span class=c1># &lt;class &#39;__main__.StandfordProfessor&#39;&gt;</span>
<span class=c1># (&#39;Tom&#39;, &#39;Male&#39;)</span>
<span class=c1># {}</span>
</code></pre></div> <p>类的产生过程其实就是元类的调用过程,即<code>StandfordProfessor = Mymeta('StandfordProfessor', (object), {...})</code>，调用<code>Mymeta</code>会先产生一个空对象<code>StandfordProfessor</code>，然后连同调用<code>Mymeta</code>括号内的参数一同传给<code>Mymeta</code>下的<code>__init__</code>方法，完成初始化。我们可以基于上例做如下改写。</p> <div class=highlight><pre><span></span><code><span class=k>class</span> <span class=nc>Mymeta</span><span class=p>(</span><span class=nb>type</span><span class=p>):</span>

    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>class_name</span><span class=p>,</span> <span class=n>class_bases</span><span class=p>,</span> <span class=n>class_dic</span><span class=p>):</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>Mymeta</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>class_name</span><span class=p>,</span> <span class=n>class_bases</span><span class=p>,</span> <span class=n>class_dic</span><span class=p>)</span>

        <span class=k>if</span> <span class=n>class_name</span><span class=o>.</span><span class=n>islower</span><span class=p>():</span>
            <span class=k>raise</span> <span class=ne>TypeError</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;Please follow Camel-Case to change class name </span><span class=si>{</span><span class=n>class_name</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
        <span class=k>if</span> <span class=s1>&#39;__doc__&#39;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>class_dic</span> <span class=ow>or</span> <span class=nb>len</span><span class=p>(</span><span class=n>class_dic</span><span class=p>[</span><span class=s1>&#39;__doc__&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>strip</span><span class=p>(</span><span class=s1>&#39; </span><span class=se>\n</span><span class=s1>&#39;</span><span class=p>))</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>TypeError</span><span class=p>(</span><span class=s1>&#39;Please add documentation in class </span><span class=si>{class_name}</span><span class=s1>, which is mandatory.&#39;</span><span class=p>)</span>


<span class=k>class</span> <span class=nc>StandfordProfessor</span><span class=p>(</span><span class=nb>object</span><span class=p>,</span> <span class=n>metaclass</span><span class=o>=</span><span class=n>Mymeta</span><span class=p>):</span>
    <span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Documentation of class StanfordTeacher</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>university</span> <span class=o>=</span> <span class=s1>&#39;Standford&#39;</span>

    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=n>gender</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>name</span> <span class=o>=</span> <span class=n>name</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>gender</span> <span class=o>=</span> <span class=n>gender</span>

    <span class=k>def</span> <span class=nf>display</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;Professor </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s1> says welcome to </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>university</span><span class=si>}</span><span class=s1>!&#39;</span><span class=p>)</span>


<span class=n>professor</span> <span class=o>=</span> <span class=n>StandfordProfessor</span><span class=p>(</span><span class=s1>&#39;Tom&#39;</span><span class=p>,</span> <span class=s1>&#39;Male&#39;</span><span class=p>)</span>

<span class=n>professor</span><span class=o>.</span><span class=n>display</span><span class=p>()</span>
<span class=c1># Professor Tom says welcome to Standford!</span>

<span class=nb>print</span><span class=p>(</span><span class=n>professor</span><span class=o>.</span><span class=vm>__dict__</span><span class=p>)</span>
<span class=c1># {&#39;name&#39;: &#39;Tom&#39;, &#39;gender&#39;: &#39;Male&#39;}</span>

<span class=n>StandfordProfessor</span><span class=o>.</span><span class=n>mro</span><span class=p>()</span>
<span class=c1># [&lt;class &#39;__main__.StandfordProfessor&#39;&gt;, &lt;class &#39;object&#39;&gt;]</span>
</code></pre></div> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../ch04/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Python面向对象概念" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Python面向对象概念 </div> </div> </a> <a href=../../DataAnalysis/ch01/ class="md-footer__link md-footer__link--next" aria-label="Next: NumPy基础" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> NumPy基础 </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.instant", "navigation.top"], "search": "../../../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script> <script src=../../../assets/javascripts/bundle.2ab50757.min.js></script> </body> </html>